{
  "id": "taste-report",
  "name": "taste-report",
  "version": "1.0.0",
  "description": "Generate taste-ordered checklist for shipping. Uses trace data to prioritize failure modes by taste impact: Tier 1 (taste-critical), Tier 2 (taste-significant), Tier 3 (technical-only). Updates AUDIT-REPORT.md with taste-weighted prioritization.",
  "phase": "DOCUMENT",
  "category": "engineering",
  "content": "# Taste Report\n\nGenerate taste-ordered checklist for shipping.\n\n## When to Use\n\n- **Final phase of audit** — Runs in DOCUMENT phase after all analysis complete\n- **Generating prioritized checklist** — Order fixes by taste impact, not just severity\n- **Ship decision documentation** — Summarize what needs fixing and why\n- When you say: \"generate the checklist\", \"what do we fix first?\", \"taste-ordered report\"\n\n## Reference Requirements\n\n**MUST read before applying this skill:**\n\n| Reference | Why Required |\n|-----------|--------------|\n| `tier-algorithm.md` | How to order items by taste impact |\n| `checklist-template.md` | Output format for checklist |\n\n**Verification:** Checklist items are ordered by taste impact, not just technical severity.\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| Updated `AUDIT-REPORT.md` | Project root | Always (taste-ordered sections) |\n\n## Core Concept\n\nTaste Report answers: **\"What should we fix first to ship with quality?\"**\n\nTraditional prioritization: Severity (S1 > S2 > S3 > S4)\nTaste prioritization: User impact (Taste-Critical > Taste-Significant > Technical-Only)\n\n**Why taste-first?**\n- A technically perfect system that feels wrong won't ship\n- Users experience taste gaps directly\n- Technical-only issues are invisible to users\n\n## The Tier Algorithm\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                    TIER ALGORITHM                           │\n│                                                             │\n│  TIER 1: TASTE-CRITICAL                                     │\n│    Failure modes traced to CRITICAL taste gaps              │\n│    (gaps where floor >= 3.0)                                │\n│    → Fix these first, they block ship                       │\n│                                                             │\n│  TIER 2: TASTE-SIGNIFICANT                                  │\n│    Failure modes traced to SIGNIFICANT taste gaps           │\n│    (gaps where floor < 3.0)                                 │\n│    → Fix these before polish phase ends                     │\n│                                                             │\n│  TIER 3: TECHNICAL-ONLY                                     │\n│    Failure modes with no taste trace                        │\n│    Ordered by severity: S1 > S2 > S3 > S4                   │\n│    → Fix if time allows, not blocking                       │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Input Processing\n\n### From TASTE-TRACE.md\n\nExtract failure modes linked to gaps:\n\n```yaml\nTG-001 (critical):\n  - P2-007 (direct)\n  - P2-003 (contributing)\n\nTG-002 (significant):\n  - U2-003 (direct)\n  - U1-004 (direct)\n```\n\n### From Failure Mode Files\n\nGet all failure modes:\n- PIPELINE-FAILURE-MODES.md\n- UI-FAILURE-MODES.md\n\n### Categorization\n\n```\nTier 1: [P2-007, P2-003]        # Linked to TG-001 (critical)\nTier 2: [U2-003, U1-004]        # Linked to TG-002 (significant)\nTier 3: [U1-005, P1-007, ...]   # No taste trace\n```\n\n## Output Format\n\n### AUDIT-REPORT.md Structure\n\n```markdown\n# Audit Report\n\n**Project:** [name]\n**Date:** [timestamp]\n**Status:** POLISH_THEN_SHIP\n\n## Ship Decision\n\n| Metric | Current | Target | Status |\n|--------|---------|--------|--------|\n| Taste Score | 3.38 | 3.5 | ⚠️ Below target |\n| Backend Coverage | 37% | 70% | ⚠️ Below target |\n| UI Coverage | 18% | 60% | ⚠️ Below target |\n| Critical Gaps | 1 | 0 | ⚠️ Blocking |\n\n## Checklist to Done (Taste-Ordered)\n\n### Tier 1: Taste-Critical\n*Fixes for critical taste gaps — must complete before ship*\n\n| # | Item | Gap | Failure Mode | Type | Effort |\n|---|------|-----|--------------|------|--------|\n| 1 | Expand template pool | TG-001 | P2-007 | Backend | M |\n| 2 | Add dynamic hooks | TG-001 | P2-003 | Backend | S |\n\n**Tier 1 Impact:** Fixing these raises engagement from 2.4 → ~2.9\n\n---\n\n### Tier 2: Taste-Significant\n*Fixes for significant taste gaps — complete before polish ends*\n\n| # | Item | Gap | Failure Mode | Type | Effort |\n|---|------|-----|--------------|------|--------|\n| 3 | Add loading indicator | TG-002 | U2-003 | UI | S |\n| 4 | Include change summary | TG-002 | U1-004 | UI | S |\n\n**Tier 2 Impact:** Fixing these raises feedback_clarity from 2.8 → ~3.2\n\n---\n\n### Tier 3: Technical-Only\n*Technical fixes with no direct taste impact — fix if time allows*\n\n| # | Item | Severity | Failure Mode | Type | Effort |\n|---|------|----------|--------------|------|--------|\n| 5 | Fix cache invalidation | S1-Silent | U1-005 | UI | S |\n| 6 | Validate JSON structure | S1-Silent | P1-007 | Backend | S |\n| 7 | Add SSE retry | S3-Visible | U2-002 | UI | M |\n\n**Note:** Ordered by severity (S1 first), then by type.\n\n---\n\n## Coverage Summary\n\n| Category | Current | Target | Gap | Priority |\n|----------|---------|--------|-----|----------|\n| Taste Score | 3.38 | 3.5 | +0.12 | Address Tier 1 |\n| Backend | 37% | 70% | 33 tests | Write test specs |\n| UI | 18% | 60% | 23 tests | Write test specs |\n| Cross | 0% | 50% | 8 tests | Write test specs |\n\n## Recommendations\n\n1. **Immediate:** Complete Tier 1 items (engagement gap)\n2. **Before ship:** Complete Tier 2 items (feedback gap)\n3. **Post-ship:** Address Tier 3 based on priority\n4. **Ongoing:** Write tests per generated specs to reach coverage targets\n```\n\n## Effort Estimation\n\n| Code | Meaning | Typical Scope |\n|------|---------|---------------|\n| S | Small | < 1 hour, single file |\n| M | Medium | 1-4 hours, 2-5 files |\n| L | Large | 4+ hours, multiple components |\n\n## Tier Ordering Rules\n\n### Within Tier 1\nOrder by:\n1. Gap severity (lower score = higher priority)\n2. Relationship (direct before contributing)\n3. Confidence (high before medium)\n\n### Within Tier 2\nSame as Tier 1\n\n### Within Tier 3\nOrder by:\n1. Severity code (S1 > S2 > S3 > S4)\n2. Type (Backend before UI, typically)\n3. Effort (S before M before L)\n\n## Validation\n\nBefore completing, verify:\n\n- [ ] All traced failure modes appear in Tier 1 or 2\n- [ ] All untraced failure modes appear in Tier 3\n- [ ] No failure mode appears in multiple tiers\n- [ ] Tier ordering follows algorithm\n- [ ] Impact estimates are included for Tier 1/2\n- [ ] Coverage summary is accurate\n- [ ] Recommendations are actionable",
  "references": [
    {
      "name": "checklist-template.md",
      "path": "references/checklist-template.md",
      "content": "# Checklist Template\n\nOutput format for taste-ordered checklist.\n\n## Full Template\n\n```markdown\n## Checklist to Done (Taste-Ordered)\n\n### Tier 1: Taste-Critical\n*Fixes for critical taste gaps — must complete before ship*\n\n| # | Item | Gap | Failure Mode | Type | Effort |\n|---|------|-----|--------------|------|--------|\n| 1 | [Action verb] [what to fix] | TG-NNN | XX-NNN | Backend/UI | S/M/L |\n\n**Tier 1 Impact:** Fixing these raises [dimension] from X.X → ~Y.Y\n\n---\n\n### Tier 2: Taste-Significant\n*Fixes for significant taste gaps — complete before polish ends*\n\n| # | Item | Gap | Failure Mode | Type | Effort |\n|---|------|-----|--------------|------|--------|\n| N | [Action verb] [what to fix] | TG-NNN | XX-NNN | Backend/UI | S/M/L |\n\n**Tier 2 Impact:** Fixing these raises [dimension] from X.X → ~Y.Y\n\n---\n\n### Tier 3: Technical-Only\n*Technical fixes with no direct taste impact — fix if time allows*\n\n| # | Item | Severity | Failure Mode | Type | Effort |\n|---|------|----------|--------------|------|--------|\n| N | [Action verb] [what to fix] | SN-Name | XX-NNN | Backend/UI | S/M/L |\n\n**Note:** Ordered by severity (S1 first), then by type.\n```\n\n## Column Definitions\n\n### Item\nAction-oriented description:\n- Start with verb: Add, Fix, Implement, Validate, Remove\n- Be specific: \"Add loading indicator during generation\" not \"Fix loading\"\n\n### Gap (Tier 1/2)\nReference to taste gap: TG-001, TG-002, etc.\n\n### Severity (Tier 3)\nSeverity code with label: S1-Silent, S2-Partial, S3-Visible, S4-Blocking\n\n### Failure Mode\nReference to failure mode: P2-007, U1-004, etc.\n\n### Type\n- Backend: Server-side code\n- UI: Client-side code\n- Cross: Integration points\n\n### Effort\n| Code | Time | Files | Description |\n|------|------|-------|-------------|\n| S | <1h | 1-2 | Simple fix |\n| M | 1-4h | 2-5 | Moderate change |\n| L | 4h+ | 5+ | Significant work |\n\n## Impact Statements\n\nAfter each tier, summarize impact:\n\n**Good:**\n> Fixing these raises engagement from 2.4 → ~2.9, clearing the 2.5 floor\n\n**Bad:**\n> These are important fixes\n\n## Numbering\n\nContinuous numbering across all tiers:\n- Tier 1: #1, #2, #3\n- Tier 2: #4, #5\n- Tier 3: #6, #7, #8\n\nThis creates a single ordered list for execution.\n\n## Empty Tiers\n\nIf a tier is empty, include it with note:\n\n```markdown\n### Tier 1: Taste-Critical\n*No critical taste gaps identified*\n\nAll critical quality dimensions meet their floors.\n```\n\n## Summary Section\n\nAlways end with coverage summary:\n\n```markdown\n## Coverage Summary\n\n| Category | Current | Target | Gap | Priority |\n|----------|---------|--------|-----|----------|\n| Taste Score | X.XX | X.X | +X.XX | [Action] |\n| Backend | XX% | 70% | NN tests | [Action] |\n| UI | XX% | 60% | NN tests | [Action] |\n| Cross | XX% | 50% | NN tests | [Action] |\n```\n"
    },
    {
      "name": "tier-algorithm.md",
      "path": "references/tier-algorithm.md",
      "content": "# Tier Algorithm\n\nHow to order checklist items by taste impact.\n\n## The Three Tiers\n\n```\n                    TASTE IMPACT\n                         │\n         ┌───────────────┼───────────────┐\n         │               │               │\n    TIER 1          TIER 2          TIER 3\n  Critical Gap    Significant Gap   No Trace\n   (floor≥3)       (floor<3)       (technical)\n         │               │               │\n    FIX FIRST     FIX BEFORE      FIX IF TIME\n                    POLISH\n```\n\n## Tier Classification\n\n### Tier 1: Taste-Critical\n\n**Criteria:**\n- Failure mode traced to a gap where `floor >= 3.0`\n- These are \"must-have\" quality dimensions\n\n**Why first:**\n- Critical gaps block ship entirely\n- Users will immediately notice these issues\n- High impact on perceived quality\n\n### Tier 2: Taste-Significant\n\n**Criteria:**\n- Failure mode traced to a gap where `floor < 3.0`\n- These are \"nice-to-have\" quality dimensions\n\n**Why second:**\n- Significant gaps allow polish-then-ship\n- Users may notice but not critical\n- Medium impact on perceived quality\n\n### Tier 3: Technical-Only\n\n**Criteria:**\n- Failure mode has no taste trace\n- OR explicitly marked \"no taste impact\"\n\n**Why last:**\n- Users don't directly experience these\n- Technical debt, not quality debt\n- Low/no impact on perceived quality\n\n## Assignment Algorithm\n\n```python\ndef assign_tier(failure_mode, traces):\n    # Check if traced to any gap\n    for gap in traces:\n        if failure_mode.id in gap.traced_failure_modes:\n            if gap.floor >= 3.0:\n                return TIER_1\n            else:\n                return TIER_2\n\n    return TIER_3\n```\n\n## Ordering Within Tiers\n\n### Tier 1/2 Ordering\n\n```\n1. Gap severity (score delta from floor)\n   - Larger negative delta = higher priority\n   - TG-001 (2.4, floor 2.5, delta -0.1) before TG-003 (2.9, floor 3.0, delta -0.1)\n\n2. Relationship type\n   - Direct causes before contributing\n   - Contributing before correlated\n\n3. Trace confidence\n   - High confidence before medium\n   - Medium before low\n\n4. Effort (tiebreaker)\n   - Small before medium before large\n```\n\n### Tier 3 Ordering\n\n```\n1. Severity code\n   - S1 (Silent) — highest priority, most dangerous\n   - S2 (Partial)\n   - S3 (Visible)\n   - S4 (Blocking) — lowest priority, usually already handled\n\n2. Location code (tiebreaker)\n   - L4 (Integration) before L1-L3\n   - Cross-pipeline issues are higher risk\n\n3. Effort (tiebreaker)\n   - Small before medium before large\n```\n\n## Edge Cases\n\n### Failure Mode in Multiple Traces\n\nIf a failure mode is traced to multiple gaps:\n- Assign to highest tier (Tier 1 wins over Tier 2)\n- List all gaps in the checklist entry\n\n### Gap with No Traced Failure Modes\n\nIf a gap has no technical cause:\n- Document in report as \"non-technical gap\"\n- Resolution is content/design/process, not code\n\n### Failure Mode with No Gap Impact\n\nIf a failure mode is traced but relationship is \"correlated\":\n- Assign to Tier 3 (no direct taste impact)\n- Note the correlation in documentation\n"
    }
  ],
  "tags": [
    "audit",
    "taste",
    "report",
    "checklist",
    "prioritization"
  ],
  "dependsOn": [
    "taste-trace"
  ]
}