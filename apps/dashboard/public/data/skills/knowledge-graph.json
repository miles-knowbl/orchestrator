{
  "id": "knowledge-graph",
  "name": "knowledge-graph",
  "version": "1.0.0",
  "description": "Build and query the skill-based knowledge graph ontology. Enables discovery of high-leverage skills, gap analysis, and understanding skill dependencies.",
  "phase": "INIT",
  "category": "operations",
  "content": "# Knowledge Graph Skill\n\n> Build and query the skill-based knowledge graph ontology\n\n## Overview\n\nThe knowledge graph represents skills as nodes and their relationships as edges. It enables discovery of high-leverage skills, gap analysis, and understanding skill dependencies. Skills are the only primitive; everything else (patterns, loops, learnings) is metadata or derived from skills.\n\n## Graph Structure\n\n### Nodes (Skills)\nEach skill becomes a node with:\n- **id**: Unique skill identifier\n- **name**: Human-readable name\n- **description**: What the skill does\n- **phase**: Which loop phase (INIT, IMPLEMENT, TEST, etc.)\n- **tags**: Categories for clustering\n- **version**: Current skill version\n- **usageCount**: Times used in executions\n- **lastUsed**: Most recent execution timestamp\n- **leverageScore**: PageRank-like centrality score\n- **inDegree/outDegree**: Connection counts\n\n### Edge Types\n| Type | Meaning |\n|------|---------|\n| `depends_on` | Skill A requires skill B |\n| `tag_cluster` | Skills share the same tag |\n| `sequence` | Skill A commonly follows skill B |\n| `co_executed` | Skills frequently run together |\n| `improved_by` | Skill upgraded based on another's execution |\n\n### Clusters\nSkills grouped by shared tags, with computed cohesion scores.\n\n## API Endpoints\n\n### Core Operations\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/api/knowledge-graph/build` | POST | Build/rebuild graph from skills and archives |\n| `/api/knowledge-graph` | GET | Get full graph structure |\n| `/api/knowledge-graph/stats` | GET | Graph statistics (nodes, edges, density) |\n| `/api/knowledge-graph/terminal` | GET | Terminal-friendly visualization |\n\n### Node Operations\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/api/knowledge-graph/nodes/:skillId` | GET | Get node with edges |\n| `/api/knowledge-graph/nodes/:skillId/neighbors` | GET | Get connected skills |\n| `/api/knowledge-graph/nodes/:skillId/refresh` | POST | Refresh single node |\n| `/api/knowledge-graph/nodes/:skillId` | DELETE | Remove node from graph |\n\n### Query Operations\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/api/knowledge-graph/phases/:phase/nodes` | GET | Nodes by phase |\n| `/api/knowledge-graph/tags/:tag/nodes` | GET | Nodes by tag |\n| `/api/knowledge-graph/edges/:type` | GET | Edges by type |\n| `/api/knowledge-graph/path?from=&to=` | GET | Find path between skills |\n\n### Analysis Operations\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/api/knowledge-graph/high-leverage` | GET | Top leverage skills |\n| `/api/knowledge-graph/isolated` | GET | Skills with no connections |\n| `/api/knowledge-graph/unused?days=30` | GET | Skills not recently used |\n| `/api/knowledge-graph/gaps` | GET | Gap analysis |\n| `/api/knowledge-graph/clusters` | GET | All clusters |\n| `/api/knowledge-graph/clusters/:tag` | GET | Specific cluster |\n\n## MCP Tools\n\n### Building\n| Tool | Description |\n|------|-------------|\n| `build_knowledge_graph` | Build/rebuild the graph |\n| `refresh_graph_node` | Refresh a single node |\n| `remove_graph_node` | Remove a node |\n\n### Querying\n| Tool | Description |\n|------|-------------|\n| `get_knowledge_graph` | Get full graph |\n| `get_graph_node` | Get specific node |\n| `get_graph_nodes_by_phase` | Filter by phase |\n| `get_graph_nodes_by_tag` | Filter by tag |\n| `get_graph_edges` | Get edges for a skill |\n| `get_graph_edges_by_type` | Filter edges by type |\n| `get_graph_neighbors` | Get connected skills |\n| `find_graph_path` | Find path between skills |\n\n### Analysis\n| Tool | Description |\n|------|-------------|\n| `get_graph_clusters` | Get all clusters |\n| `get_graph_cluster_by_tag` | Get specific cluster |\n| `get_high_leverage_skills` | Top leverage skills |\n| `get_isolated_skills` | Unconnected skills |\n| `get_unused_skills` | Stale skills |\n| `analyze_graph_gaps` | Full gap analysis |\n| `get_graph_stats` | Statistics |\n| `render_graph_terminal` | Terminal view |\n\n## Leverage Score Calculation\n\nUses PageRank-like algorithm:\n1. Initialize all nodes with score 1.0\n2. For each iteration:\n   - Distribute score to neighbors proportionally\n   - Apply damping factor (0.85)\n   - Add base score (0.15)\n3. Normalize final scores\n\nHigh leverage skills are \"force multipliers\" that unlock or improve many others.\n\n## Gap Analysis\n\nIdentifies:\n- **Missing Dependencies**: Referenced skills that don't exist\n- **Isolated Skills**: No connections (potential orphans)\n- **Weak Clusters**: Low cohesion (< 0.3)\n- **Phase Gaps**: Phases with few or no skills\n\n## Process\n\n### Building the Graph\n1. Load all skills from registry\n2. Parse run archives for execution data\n3. Create nodes from skills\n4. Infer edges from:\n   - Explicit dependencies\n   - Tag co-occurrence\n   - Execution sequences\n   - Co-execution patterns\n5. Compute leverage scores\n6. Build clusters\n7. Save to knowledge-graph.json\n\n### Querying\n1. Load graph from JSON\n2. Apply filters/traversals\n3. Return results with computed metrics\n\n### Maintenance\n- Refresh after skill updates\n- Rebuild periodically for execution data\n- Prune removed skills\n\n## Data Location\n\n```\nmemory/knowledge-graph.json\n```\n\n## Integration Points\n\n- **SkillRegistry**: Source of skill definitions\n- **RunArchivalService**: Source of execution history\n- **LearningService**: Improved_by edge source\n- **Analytics**: Leverage scores feed analytics\n\n## Example Usage\n\n```typescript\n// Build the graph\nawait knowledgeGraphService.build();\n\n// Find high-leverage skills\nconst top = knowledgeGraphService.getHighLeverageSkills(5);\n\n// Analyze gaps\nconst gaps = knowledgeGraphService.analyzeGaps();\n\n// Find path between skills\nconst path = knowledgeGraphService.findPath('implement', 'deploy');\n```",
  "references": [],
  "tags": [
    "knowledge-graph",
    "ontology",
    "skills",
    "dependencies",
    "learning"
  ],
  "dependsOn": []
}