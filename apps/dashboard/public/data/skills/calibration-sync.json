{
  "id": "calibration-sync",
  "name": "calibration-sync",
  "version": "1.0.0",
  "description": "Syncs calibration data for async operation. Loads effort estimates, accuracy history, and adjustment factors to improve planning accuracy.",
  "phase": "GATHER",
  "category": "async",
  "content": "# Calibration Sync\n\nLoads calibration data to inform accurate effort estimation during async operation.\n\n## When to Use\n\n- During async-loop GATHER phase\n- To provide estimation context for queue planning\n- To surface any calibration drift warnings\n\n## What It Syncs\n\n### Calibration Data\n\n| Data | Source | Purpose |\n|------|--------|---------|\n| Base estimates | CalibrationService | Default effort per skill/loop |\n| Multipliers | Calibration history | Personal adjustment factors |\n| Accuracy metrics | Historical results | How accurate past estimates were |\n| Drift warnings | Trend analysis | When calibration needs attention |\n\n### Key Metrics\n\n```json\n{\n  \"calibration\": {\n    \"overall_accuracy\": 0.78,\n    \"by_loop\": {\n      \"engineering-loop\": { \"accuracy\": 0.82, \"sample_size\": 15 },\n      \"bugfix-loop\": { \"accuracy\": 0.75, \"sample_size\": 8 }\n    },\n    \"personal_multiplier\": 1.15,\n    \"recent_trend\": \"improving\"\n  }\n}\n```\n\n## Workflow\n\n### Step 1: Load Calibration Service Data\n\n```typescript\nconst calibration = await calibrationService.getCalibrationReport();\n```\n\n### Step 2: Extract Key Metrics\n\n- Overall accuracy percentage\n- Per-loop accuracy breakdown\n- Personal multiplier (systematic over/under estimation)\n- Sample sizes (confidence indicator)\n\n### Step 3: Detect Drift\n\n```typescript\nconst drift = {\n  detected: calibration.accuracy < 0.7,\n  direction: calibration.recentTrend,\n  recommendation: calibration.accuracy < 0.7\n    ? \"Consider re-calibrating estimates\"\n    : null\n};\n```\n\n### Step 4: Build Context\n\n```json\n{\n  \"calibration\": {\n    \"synced_at\": \"ISO-timestamp\",\n    \"accuracy\": 0.78,\n    \"multiplier\": 1.15,\n    \"confidence\": \"high\",  // based on sample size\n    \"drift_warning\": null,\n    \"by_loop\": { ... },\n    \"recommendations\": []\n  }\n}\n```\n\n## Output\n\nUpdates `memory/async-context.json`:\n\n```json\n{\n  \"calibration\": {\n    \"synced_at\": \"ISO-timestamp\",\n    \"overall_accuracy\": 0.78,\n    \"personal_multiplier\": 1.15,\n    \"confidence_level\": \"high\",\n    \"loop_estimates\": {\n      \"engineering-loop\": { \"base_hours\": 3, \"calibrated_hours\": 3.45 },\n      \"bugfix-loop\": { \"base_hours\": 1, \"calibrated_hours\": 1.15 }\n    },\n    \"drift_warning\": null\n  }\n}\n```\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| Updated async context | `memory/async-context.json` | Always |\n\n## Calibration Application\n\nWhen planning async queue:\n\n```typescript\nconst estimatedDuration = baseEstimate * calibration.personal_multiplier;\n```\n\n## References\n\n- [calibration-factors.md](references/calibration-factors.md) â€” How calibration factors are calculated",
  "references": [
    {
      "name": "calibration-factors.md",
      "path": "references/calibration-factors.md",
      "content": "# Calibration Factors\n\nHow calibration data is calculated and applied.\n\n## Personal Multiplier\n\n### Calculation\n\n```\npersonal_multiplier = average(actual_duration / estimated_duration)\n```\n\nOver the last N completed executions (default N=20).\n\n### Interpretation\n\n| Multiplier | Meaning |\n|------------|---------|\n| < 0.9 | Consistently faster than estimates |\n| 0.9-1.1 | Well calibrated |\n| 1.1-1.5 | Consistently slower than estimates |\n| > 1.5 | Significantly underestimating effort |\n\n### Application\n\n```typescript\ncalibrated_estimate = base_estimate * personal_multiplier\n```\n\n## Loop-Specific Adjustments\n\nDifferent loops have different baseline durations:\n\n| Loop | Base Duration | Typical Range |\n|------|---------------|---------------|\n| engineering-loop | 3 hours | 1-8 hours |\n| bugfix-loop | 1 hour | 30 min - 3 hours |\n| distribution-loop | 30 min | 15 min - 1 hour |\n| learning-loop | 45 min | 30 min - 2 hours |\n\n## Accuracy Metrics\n\n### Overall Accuracy\n\n```\naccuracy = 1 - average(abs(actual - estimated) / actual)\n```\n\n### Per-Loop Accuracy\n\nSame formula, filtered by loop type.\n\n### Confidence Level\n\nBased on sample size:\n\n| Sample Size | Confidence |\n|-------------|------------|\n| < 5 | Low |\n| 5-15 | Medium |\n| > 15 | High |\n\n## Drift Detection\n\n### Warning Triggers\n\n1. Accuracy drops below 70%\n2. Last 5 estimates all in same direction (over or under)\n3. Personal multiplier changes >20% from previous period\n\n### Remediation\n\n1. Review recent executions for anomalies\n2. Adjust base estimates if systematic\n3. Consider loop complexity changes\n4. Flag for manual calibration review\n\n## Context for Async\n\nDuring async operation:\n- Use calibrated estimates for queue planning\n- Factor in time-of-day adjustments (evening work slower)\n- Account for mobile context (interruptions likely)\n\n### Mobile Adjustment\n\n```typescript\nconst mobileMultiplier = 1.3; // 30% longer when mobile\nconst asyncEstimate = calibrated_estimate * mobileMultiplier;\n```\n"
    }
  ],
  "tags": [
    "async",
    "calibration",
    "estimation",
    "planning"
  ],
  "dependsOn": [
    "state-loader"
  ]
}