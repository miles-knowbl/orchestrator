{
  "id": "infra-devenv",
  "name": "infra-devenv",
  "version": "1.0.0",
  "description": "Set up local development environment with scripts, devcontainers, and environment variable templates for consistent onboarding.",
  "phase": "SCAFFOLD",
  "category": "engineering",
  "content": "# Infra Dev Environment\n\nSet up local development environment for consistent onboarding.\n\n## When to Use\n\n- **New project** — Establishing the local dev setup from scratch\n- **Onboarding** — Making it easy for new contributors to get started\n- **Environment drift** — Standardizing tool versions across the team\n- When you say: \"set up dev environment\", \"create devcontainer\", \"dev setup script\"\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| `dev.sh` or `.devcontainer/` | Project root | Always (one or both) |\n| `.env.example` | Project root | When env vars exist |\n\n## Core Concept\n\nDev environment setup answers: **\"How does a new developer go from clone to running in one command?\"**\n\n```\nClone → dev.sh (or devcontainer) → All tools installed → App running locally\n```\n\nThe goal is zero-friction onboarding. A developer should run one command and have everything working.\n\n## Setup Approaches\n\n| Approach | Best For | Tradeoffs |\n|----------|----------|-----------|\n| **Shell script (dev.sh)** | Simple projects, macOS/Linux | Fast, no Docker needed |\n| **Devcontainer** | Complex deps, cross-platform teams | Requires Docker, slower startup |\n| **Both** | Open source projects | Maximum compatibility |\n\n## Shell Script Pattern (dev.sh)\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\necho \"Setting up development environment...\"\n\n# Check prerequisites\ncommand -v node >/dev/null 2>&1 || { echo \"Node.js required. Install via nvm.\"; exit 1; }\ncommand -v git >/dev/null 2>&1 || { echo \"Git required.\"; exit 1; }\n\n# Install dependencies\nnpm ci\n\n# Set up environment\nif [ ! -f .env ]; then\n  cp .env.example .env\n  echo \"Created .env from template — edit with your values\"\nfi\n\n# Build\nnpm run build\n\necho \"Development environment ready. Run: npm run dev\"\n```\n\n## Devcontainer Pattern\n\n```json\n{\n  \"name\": \"Project Dev\",\n  \"image\": \"mcr.microsoft.com/devcontainers/typescript-node:20\",\n  \"postCreateCommand\": \"npm ci && npm run build\",\n  \"customizations\": {\n    \"vscode\": {\n      \"extensions\": [\"dbaeumer.vscode-eslint\", \"esbenp.prettier-vscode\"]\n    }\n  },\n  \"forwardPorts\": [3000],\n  \"features\": {\n    \"ghcr.io/devcontainers/features/github-cli:1\": {}\n  }\n}\n```\n\n## Environment Variables\n\nAlways provide a `.env.example` with:\n- All required variables listed with placeholder values\n- Comments explaining each variable\n- Sensitive defaults clearly marked as needing replacement\n\n```bash\n# .env.example\nDATABASE_URL=postgresql://localhost:5432/myapp_dev\nAPI_KEY=your-api-key-here  # Get from dashboard.example.com\nPORT=3000\nNODE_ENV=development\n```\n\n## Checklist\n\n- [ ] One command to set up from clean clone\n- [ ] `.env.example` documents all environment variables\n- [ ] Prerequisites checked with clear error messages\n- [ ] Tool versions specified (Node, Python, etc.)\n- [ ] Database initialization included (if applicable)\n- [ ] Port configuration documented\n\n## Relationship to Other Skills\n\n| Skill | Relationship |\n|-------|--------------|\n| `scaffold` | Scaffold creates project structure; infra-devenv makes it runnable locally |\n| `infra-database` | Database setup may depend on dev environment being configured |\n| `infra-docker` | Devcontainers use Docker; coordinate container configurations |\n| `document` | Dev setup should be documented in README |\n\n## Key Principles\n\n**One command setup.** `./dev.sh` or \"Open in Container\" — nothing more.\n\n**Fail fast with clear messages.** Check prerequisites and report what's missing.\n\n**Template secrets, never commit them.** `.env.example` with placeholders, `.env` in `.gitignore`.\n\n**Pin tool versions.** Use `.nvmrc`, `python-version`, or similar for reproducibility.",
  "references": [],
  "tags": [
    "infrastructure",
    "development",
    "devcontainer",
    "scripts",
    "environment"
  ],
  "dependsOn": [
    "scaffold"
  ]
}