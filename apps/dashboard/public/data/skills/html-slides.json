{
  "id": "html-slides",
  "name": "html-slides",
  "version": "1.0.0",
  "description": "Renders presentation schemas into a self-contained HTML file using reveal.js. The HTML is version-controllable, hostable anywhere, and can be converted to other formats. Optionally exports to Google Slides via API.",
  "phase": "DOCUMENT",
  "category": "content",
  "content": "# HTML Slides\n\nRenders deck schemas into a self-contained HTML presentation using reveal.js.\n\n## When to Use\n\n- After deck-text-schema and deck-image-schema are complete\n- To produce the final deliverable of the deck-loop\n- When you need a presentation that works anywhere\n\n## Why HTML First\n\n| Benefit | Description |\n|---------|-------------|\n| **Universal** | Works in any browser, no special software needed |\n| **Version Control** | Text-based, diffs cleanly in git |\n| **Hostable** | Deploy to any static host (GitHub Pages, Vercel, etc.) |\n| **Convertible** | Can export to PDF, or push to Google Slides |\n| **AI-Editable** | Easy to modify programmatically |\n\n## Inputs Required\n\n1. **deck-text-schema.json** — Slide content, structure, speaker notes\n2. **deck-image-schema.json** — Visual specifications, image prompts\n3. **taste-schema.json** — Brand styling parameters\n\n## Output Structure\n\n```\noutput/\n├── index.html          # Self-contained presentation\n├── assets/\n│   ├── images/         # Generated/sourced images\n│   └── custom.css      # Brand-specific overrides\n└── render-manifest.json # Build metadata\n```\n\n## Workflow\n\n### Step 1: Load Schemas\n\n```javascript\nconst textSchema = await loadJSON('deck-text-schema.json');\nconst imageSchema = await loadJSON('deck-image-schema.json');\nconst tasteSchema = await loadJSON('taste-schema.json');\n```\n\n### Step 2: Generate Slide HTML\n\nFor each slide in the text schema:\n\n```html\n<section data-background-color=\"{slide.background}\">\n  <h2>{slide.title}</h2>\n  <div class=\"content\">\n    {slide.body}\n  </div>\n  <aside class=\"notes\">\n    {slide.speakerNotes}\n  </aside>\n</section>\n```\n\n### Step 3: Apply Brand Styling\n\nExtract from taste-schema:\n- Primary/secondary colors → CSS variables\n- Typography → font imports and styles\n- Mood → transition effects, background treatment\n\n```css\n:root {\n  --r-background-color: {taste.visual.colors.background};\n  --r-main-color: {taste.visual.colors.text};\n  --r-heading-color: {taste.visual.colors.primary};\n  --r-link-color: {taste.visual.colors.accent};\n}\n```\n\n### Step 4: Process Images\n\nFor each image specification:\n1. Check if image URL provided → use directly\n2. If generation prompt provided → generate via AI\n3. Optimize and place in assets/images/\n\n### Step 5: Assemble HTML\n\nUse the reveal.js template:\n\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>{presentation.title}</title>\n  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/reveal.js@4/dist/reveal.css\">\n  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/reveal.js@4/dist/theme/white.css\">\n  <style>{customCSS}</style>\n</head>\n<body>\n  <div class=\"reveal\">\n    <div class=\"slides\">\n      {generatedSlides}\n    </div>\n  </div>\n  <script src=\"https://cdn.jsdelivr.net/npm/reveal.js@4/dist/reveal.js\"></script>\n  <script>\n    Reveal.initialize({\n      hash: true,\n      transition: '{taste.visual.mood.energy === \"high\" ? \"slide\" : \"fade\"}'\n    });\n  </script>\n</body>\n</html>\n```\n\n### Step 6: Generate Manifest\n\n```json\n{\n  \"version\": \"1.0.0\",\n  \"generatedAt\": \"ISO-timestamp\",\n  \"slideCount\": 12,\n  \"imageCount\": 8,\n  \"sourceSchemas\": {\n    \"text\": \"deck-text-schema.json\",\n    \"image\": \"deck-image-schema.json\",\n    \"taste\": \"taste-schema.json\"\n  },\n  \"output\": {\n    \"html\": \"index.html\",\n    \"assets\": \"assets/\"\n  },\n  \"exports\": {\n    \"googleSlides\": null,\n    \"pdf\": null\n  }\n}\n```\n\n## Optional: Google Slides Export\n\nIf Google Slides API is configured:\n\n1. Create new presentation via API\n2. Map reveal.js slides to Slides format\n3. Upload images to Drive\n4. Apply brand styling via Slides API\n5. Update manifest with share link\n\n```json\n{\n  \"exports\": {\n    \"googleSlides\": {\n      \"id\": \"1abc...\",\n      \"url\": \"https://docs.google.com/presentation/d/1abc.../edit\",\n      \"exportedAt\": \"ISO-timestamp\"\n    }\n  }\n}\n```\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| HTML presentation | `index.html` | Always |\n| Render manifest | `render-manifest.json` | Always |\n| Assets directory | `assets/` | If images present |\n\n## Validation Checklist\n\nBefore marking complete:\n- [ ] HTML renders correctly in browser\n- [ ] All slides present and in order\n- [ ] Images load properly\n- [ ] Brand colors applied\n- [ ] Speaker notes included\n- [ ] Navigation works (arrows, space)\n- [ ] Manifest is accurate\n\n## References\n\n- [reveal-js-config.md](references/reveal-js-config.md) — reveal.js configuration options\n- [google-slides-api.md](references/google-slides-api.md) — Google Slides export guide",
  "references": [
    {
      "name": "google-slides-api.md",
      "path": "references/google-slides-api.md",
      "content": "# Google Slides API Reference\n\n## Overview\n\nOptional export from HTML to Google Slides. Requires Google Cloud project with Slides API enabled.\n\n## Prerequisites\n\n1. Google Cloud project\n2. Slides API enabled\n3. OAuth 2.0 credentials or Service Account\n4. Drive API enabled (for image uploads)\n\n## Authentication\n\n### Service Account (Recommended for Automation)\n\n```typescript\nimport { google } from 'googleapis';\n\nconst auth = new google.auth.GoogleAuth({\n  keyFile: 'service-account.json',\n  scopes: [\n    'https://www.googleapis.com/auth/presentations',\n    'https://www.googleapis.com/auth/drive.file',\n  ],\n});\n\nconst slides = google.slides({ version: 'v1', auth });\nconst drive = google.drive({ version: 'v3', auth });\n```\n\n### OAuth 2.0 (For User-Owned Presentations)\n\n```typescript\nconst oauth2Client = new google.auth.OAuth2(\n  CLIENT_ID,\n  CLIENT_SECRET,\n  REDIRECT_URL\n);\n\noauth2Client.setCredentials({\n  access_token: 'ACCESS_TOKEN',\n  refresh_token: 'REFRESH_TOKEN',\n});\n```\n\n## Create Presentation\n\n```typescript\nconst presentation = await slides.presentations.create({\n  requestBody: {\n    title: 'My Presentation',\n  },\n});\n\nconst presentationId = presentation.data.presentationId;\n```\n\n## Add Slides\n\n```typescript\nawait slides.presentations.batchUpdate({\n  presentationId,\n  requestBody: {\n    requests: [\n      {\n        createSlide: {\n          objectId: 'slide_1',\n          insertionIndex: 0,\n          slideLayoutReference: {\n            predefinedLayout: 'TITLE_AND_BODY',\n          },\n        },\n      },\n    ],\n  },\n});\n```\n\n## Predefined Layouts\n\n| Layout | Description |\n|--------|-------------|\n| `BLANK` | Blank slide |\n| `CAPTION_ONLY` | Caption at bottom |\n| `TITLE` | Title slide |\n| `TITLE_AND_BODY` | Title with body text |\n| `TITLE_AND_TWO_COLUMNS` | Title with two columns |\n| `TITLE_ONLY` | Title only |\n| `SECTION_HEADER` | Section header |\n| `SECTION_TITLE_AND_DESCRIPTION` | Section with description |\n| `ONE_COLUMN_TEXT` | Single column text |\n| `MAIN_POINT` | Main point emphasized |\n| `BIG_NUMBER` | Large number display |\n\n## Add Text\n\n```typescript\nawait slides.presentations.batchUpdate({\n  presentationId,\n  requestBody: {\n    requests: [\n      {\n        insertText: {\n          objectId: 'title_element_id',\n          text: 'Slide Title',\n        },\n      },\n      {\n        insertText: {\n          objectId: 'body_element_id',\n          text: 'Body content goes here',\n        },\n      },\n    ],\n  },\n});\n```\n\n## Format Text\n\n```typescript\n{\n  updateTextStyle: {\n    objectId: 'text_box_id',\n    textRange: {\n      type: 'ALL',\n    },\n    style: {\n      fontFamily: 'Arial',\n      fontSize: { magnitude: 18, unit: 'PT' },\n      foregroundColor: {\n        opaqueColor: {\n          rgbColor: { red: 0.2, green: 0.2, blue: 0.2 },\n        },\n      },\n      bold: true,\n    },\n    fields: 'fontFamily,fontSize,foregroundColor,bold',\n  },\n}\n```\n\n## Add Images\n\n### Upload to Drive First\n\n```typescript\nconst imageFile = await drive.files.create({\n  requestBody: {\n    name: 'slide-image.png',\n    mimeType: 'image/png',\n  },\n  media: {\n    mimeType: 'image/png',\n    body: fs.createReadStream('image.png'),\n  },\n});\n\n// Make file accessible\nawait drive.permissions.create({\n  fileId: imageFile.data.id,\n  requestBody: {\n    role: 'reader',\n    type: 'anyone',\n  },\n});\n```\n\n### Insert Image\n\n```typescript\n{\n  createImage: {\n    objectId: 'image_1',\n    url: `https://drive.google.com/uc?id=${imageFile.data.id}`,\n    elementProperties: {\n      pageObjectId: 'slide_1',\n      size: {\n        height: { magnitude: 300, unit: 'PT' },\n        width: { magnitude: 400, unit: 'PT' },\n      },\n      transform: {\n        scaleX: 1,\n        scaleY: 1,\n        translateX: 100,\n        translateY: 150,\n        unit: 'PT',\n      },\n    },\n  },\n}\n```\n\n## Set Background Color\n\n```typescript\n{\n  updatePageProperties: {\n    objectId: 'slide_1',\n    pageProperties: {\n      pageBackgroundFill: {\n        solidFill: {\n          color: {\n            rgbColor: { red: 0.1, green: 0.1, blue: 0.1 },\n          },\n        },\n      },\n    },\n    fields: 'pageBackgroundFill',\n  },\n}\n```\n\n## HTML to Slides Mapping\n\n| HTML (reveal.js) | Slides API |\n|------------------|------------|\n| `<section>` | `createSlide` |\n| `<h1>`, `<h2>` | Title placeholder |\n| `<p>`, `<ul>`, `<ol>` | Body placeholder |\n| `<img>` | `createImage` |\n| `data-background-color` | `updatePageProperties` |\n| `<aside class=\"notes\">` | Speaker notes (separate API) |\n| CSS colors | `rgbColor` objects |\n\n## Speaker Notes\n\n```typescript\n{\n  insertText: {\n    objectId: 'speaker_notes_shape_id',\n    text: 'Speaker notes for this slide',\n  },\n}\n```\n\n## Export Link\n\nAfter creation, generate shareable link:\n\n```typescript\nconst shareUrl = `https://docs.google.com/presentation/d/${presentationId}/edit`;\nconst presentUrl = `https://docs.google.com/presentation/d/${presentationId}/present`;\n```\n\n## Rate Limits\n\n- 300 requests per minute per user\n- Batch requests to stay under limit\n- Use exponential backoff on 429 errors\n\n## Error Handling\n\n```typescript\ntry {\n  await slides.presentations.batchUpdate({ ... });\n} catch (error) {\n  if (error.code === 429) {\n    // Rate limited - wait and retry\n    await sleep(error.retryAfter * 1000);\n    // Retry request\n  } else if (error.code === 403) {\n    // Permission denied - check scopes\n  } else if (error.code === 404) {\n    // Presentation not found\n  }\n}\n```\n"
    },
    {
      "name": "reveal-js-config.md",
      "path": "references/reveal-js-config.md",
      "content": "# reveal.js Configuration Reference\n\n## Basic Setup\n\n```html\n<!doctype html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"utf-8\">\n  <title>Presentation Title</title>\n  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/reveal.js@4/dist/reveal.css\">\n  <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/reveal.js@4/dist/theme/white.css\">\n</head>\n<body>\n  <div class=\"reveal\">\n    <div class=\"slides\">\n      <section>Slide 1</section>\n      <section>Slide 2</section>\n    </div>\n  </div>\n  <script src=\"https://cdn.jsdelivr.net/npm/reveal.js@4/dist/reveal.js\"></script>\n  <script>\n    Reveal.initialize();\n  </script>\n</body>\n</html>\n```\n\n## Configuration Options\n\n```javascript\nReveal.initialize({\n  // Display controls in the bottom right corner\n  controls: true,\n\n  // Display a progress bar\n  progress: true,\n\n  // Display the page number\n  slideNumber: true,\n\n  // Push each slide to browser history\n  history: true,\n\n  // Enable keyboard shortcuts\n  keyboard: true,\n\n  // Enable the slide overview mode\n  overview: true,\n\n  // Vertical centering of slides\n  center: true,\n\n  // Enable touch navigation\n  touch: true,\n\n  // Loop the presentation\n  loop: false,\n\n  // Transition style: none/fade/slide/convex/concave/zoom\n  transition: 'slide',\n\n  // Transition speed: default/fast/slow\n  transitionSpeed: 'default',\n\n  // Parallax background image\n  parallaxBackgroundImage: '',\n\n  // Parallax background size (CSS syntax, e.g., \"2100px 900px\")\n  parallaxBackgroundSize: '',\n});\n```\n\n## Built-in Themes\n\n| Theme | Description |\n|-------|-------------|\n| `black` | Black background, white text, blue links |\n| `white` | White background, black text, blue links |\n| `league` | Gray background, white text, blue links |\n| `beige` | Beige background, dark text, brown links |\n| `sky` | Blue background, thin dark text, blue links |\n| `night` | Black background, thick white text, orange links |\n| `serif` | Cappuccino background, gray text, brown links |\n| `simple` | White background, black text, blue links |\n| `solarized` | Cream background, dark text, blue links |\n| `moon` | Dark blue background, thick grey text, blue links |\n| `blood` | Dark background, thick white text, red links |\n| `dracula` | Dark purple background, white text, pink links |\n\n## Custom Styling\n\n```css\n:root {\n  /* Background */\n  --r-background-color: #ffffff;\n\n  /* Main content */\n  --r-main-font: 'Source Sans Pro', sans-serif;\n  --r-main-font-size: 42px;\n  --r-main-color: #222;\n\n  /* Headings */\n  --r-heading-font: 'Source Sans Pro', sans-serif;\n  --r-heading-color: #222;\n  --r-heading-line-height: 1.2;\n  --r-heading-letter-spacing: normal;\n  --r-heading-text-transform: uppercase;\n  --r-heading-font-weight: 600;\n\n  /* Links */\n  --r-link-color: #2a76dd;\n  --r-link-color-hover: #6ca0e8;\n\n  /* Selection */\n  --r-selection-background-color: #98bdef;\n  --r-selection-color: #fff;\n}\n```\n\n## Slide Structure\n\n### Horizontal Slides\n```html\n<section>Slide 1</section>\n<section>Slide 2</section>\n<section>Slide 3</section>\n```\n\n### Vertical Slides (Nested)\n```html\n<section>\n  <section>Vertical Slide 1</section>\n  <section>Vertical Slide 2</section>\n</section>\n```\n\n### Slide Backgrounds\n```html\n<!-- Color -->\n<section data-background-color=\"#ff0000\">\n\n<!-- Image -->\n<section data-background-image=\"image.jpg\">\n\n<!-- Video -->\n<section data-background-video=\"video.mp4\">\n\n<!-- Gradient -->\n<section data-background-gradient=\"linear-gradient(to bottom, #283b95, #17b2c3)\">\n```\n\n### Speaker Notes\n```html\n<section>\n  <h2>Slide Title</h2>\n  <p>Slide content</p>\n\n  <aside class=\"notes\">\n    Speaker notes go here. Press 'S' to view.\n  </aside>\n</section>\n```\n\n## Fragments (Animations)\n\n```html\n<p class=\"fragment\">Appears first</p>\n<p class=\"fragment\">Appears second</p>\n<p class=\"fragment\">Appears third</p>\n```\n\nFragment styles:\n- `fade-in` (default)\n- `fade-out`\n- `fade-up`\n- `fade-down`\n- `fade-left`\n- `fade-right`\n- `highlight-red`\n- `highlight-blue`\n- `highlight-green`\n\n## Code Highlighting\n\n```html\n<pre><code data-trim data-noescape data-line-numbers=\"1|3-5\">\nfunction example() {\n  const x = 1;\n  const y = 2;\n  const z = 3;\n  return x + y + z;\n}\n</code></pre>\n```\n\n## Keyboard Shortcuts\n\n| Key | Action |\n|-----|--------|\n| `N`, `Space` | Next slide |\n| `P` | Previous slide |\n| `←` `→` | Navigate left/right |\n| `↑` `↓` | Navigate up/down |\n| `Home`, `End` | First/last slide |\n| `B`, `.` | Pause (blackout) |\n| `F` | Fullscreen |\n| `S` | Speaker view |\n| `O`, `Esc` | Overview |\n| `?` | Help |\n"
    }
  ],
  "tags": [
    "specialized",
    "presentation",
    "html",
    "reveal.js",
    "rendering"
  ],
  "dependsOn": [
    "deck-text-schema",
    "deck-image-schema"
  ]
}