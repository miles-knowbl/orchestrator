{
  "id": "patterns-roundup",
  "name": "patterns-roundup",
  "version": "1.0.0",
  "description": "Round up existing patterns and automatic pattern detection from observed behaviors. Query, filter, and formalize patterns from the memory hierarchy.",
  "phase": "COMPLETE",
  "category": "operations",
  "content": "# Patterns Roundup Skill\n\n> Round up existing patterns and automatic pattern detection from observed behaviors\n\n## Overview\n\nThe patterns-roundup module provides two core functions:\n1. **Pattern Query & Roundup**: Search, filter, and export patterns from the memory hierarchy\n2. **Automatic Pattern Detection**: Detect patterns from run behaviors and codebase analysis\n\n## Architecture\n\n### PatternsService\n\nLocated at `src/services/patterns/PatternsService.ts`, the service:\n\n- Queries patterns across all memory levels (orchestrator, loop, skill)\n- Generates formatted roundup summaries\n- Detects behavioral patterns from run archives\n- Identifies patterns in codebase (skills, loops)\n- Analyzes pattern gaps and coverage\n- Formalizes detected patterns into memory\n\n### Data Flow\n\n```\nMemoryService → Pattern Storage (orchestrator.json, loops/*.json, skills/*.json)\n     ↓\nPatternsService → Query, Roundup, Detection\n     ↓\nAPI Endpoints / MCP Tools\n```\n\n## MCP Tools\n\n| Tool | Description |\n|------|-------------|\n| `query_patterns` | Search and filter patterns across all levels |\n| `get_pattern` | Get a single pattern by ID |\n| `generate_pattern_roundup` | Generate formatted summary of patterns |\n| `detect_patterns` | Run automatic pattern detection |\n| `get_pattern_gaps` | Analyze gaps in pattern coverage |\n| `formalize_pattern` | Convert detected pattern to formal pattern |\n\n## API Endpoints\n\n| Endpoint | Method | Description |\n|----------|--------|-------------|\n| `/api/patterns` | GET | Query patterns with filtering |\n| `/api/patterns/:id` | GET | Get single pattern |\n| `/api/patterns/roundup/:level` | GET | Generate roundup for level |\n| `/api/patterns/detect` | POST | Run pattern detection |\n| `/api/patterns/gaps` | GET | Get pattern gaps |\n| `/api/patterns/formalize` | POST | Formalize detected pattern |\n\n## Pattern Detection Types\n\n### Behavioral Patterns\nDetected from run archives:\n- **Success patterns**: Loops with >90% success rate\n- **Failure patterns**: Loops with <50% success rate\n- **Skip patterns**: Frequently skipped phases\n\n### Codebase Patterns\nDetected from skill files:\n- Pattern sections in SKILL.md files\n- \"When to Use\" documentation\n- Repeated structural patterns\n\n### Gap Analysis\nIdentifies missing pattern categories:\n- Error handling, testing, deployment\n- Security, performance, documentation\n- Refactoring, debugging\n\n## Query Options\n\n| Option | Description |\n|--------|-------------|\n| `level` | Filter by orchestrator, loop, or skill |\n| `entityId` | Filter by specific loop or skill ID |\n| `confidence` | Filter by low, medium, or high |\n| `minUses` | Minimum usage count |\n| `search` | Search in name, context, solution |\n\n## Roundup Formats\n\n| Format | Output |\n|--------|--------|\n| `summary` | Stats and counts |\n| `full` | Stats + pattern lists |\n| `markdown` | Complete markdown document |\n\n## Integration\n\n- **MemoryService**: Pattern storage and retrieval\n- **AnalyticsService**: Run archive access for detection\n- **LearningService**: Pattern proposals (via ImprovementOrchestrator)\n\n## Example Usage\n\n### Query all high-confidence patterns\n```typescript\nquery_patterns({ confidence: 'high' })\n```\n\n### Generate full roundup\n```typescript\ngenerate_pattern_roundup({ level: 'orchestrator', format: 'full' })\n```\n\n### Run detection and formalize\n```typescript\ndetect_patterns({ includeGaps: true })\n// Review detected patterns...\nformalize_pattern({ detectedPatternId: 'detected-success-engineering-loop' })\n```\n\n## Version\n\n- v1.0.0 - Initial implementation with query, roundup, detection, and gap analysis",
  "references": [],
  "tags": [
    "patterns",
    "learning",
    "detection",
    "memory"
  ],
  "dependsOn": []
}