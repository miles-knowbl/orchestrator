{
  "id": "document",
  "name": "document",
  "version": "1.0.0",
  "description": "Generate and maintain technical documentation. Creates README files, API documentation, code comments, architecture docs, and user guides. Ensures documentation stays accurate, accessible, and useful. Follows documentation standards and best practices for different audiences.",
  "phase": "DOCUMENT",
  "category": "engineering",
  "content": "# Document\n\nGenerate and maintain technical documentation.\n\n## When to Use\n\n- **New project** â€” Create initial documentation suite\n- **New feature** â€” Document new functionality\n- **API changes** â€” Update API documentation\n- **Onboarding** â€” Create guides for new team members\n- **Release** â€” Generate changelogs and release notes\n- When you say: \"document this\", \"write docs for\", \"create a README\"\n\n## Reference Requirements\n\n**MUST read before applying this skill:**\n\n| Reference | Why Required |\n|-----------|--------------|\n| `readme-templates.md` | Templates for effective READMEs |\n\n**Read if applicable:**\n\n| Reference | When Needed |\n|-----------|-------------|\n| `api-documentation.md` | When documenting APIs |\n| `architecture-docs.md` | When documenting architecture |\n| `code-comments.md` | When adding inline documentation |\n| `changelog-guide.md` | When writing changelogs |\n\n**Verification:** Ensure README.md exists with quick start that actually works.\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| `README.md` | Project root | Always |\n| API documentation | `docs/` | If public API exists |\n| `CHANGELOG.md` | Project root | For versioned projects |\n\n## Core Concept\n\nDocument answers: **\"How do I explain this clearly to someone who isn't me?\"**\n\nGood documentation is:\n- **Accurate** â€” Matches the actual code/system\n- **Accessible** â€” Written for the target audience\n- **Actionable** â€” Readers can accomplish their goals\n- **Maintained** â€” Updated when things change\n\nDocumentation is NOT:\n- Comments on every line of code\n- Duplicating what the code already says\n- A one-time task (it requires maintenance)\n\n## Documentation Types\n\n| Type | Audience | Purpose | Update Frequency |\n|------|----------|---------|------------------|\n| **README** | New developers, users | First impression, quick start | Every major change |\n| **API Docs** | Developers integrating | How to use the API | Every API change |\n| **Code Comments** | Future maintainers | Why, not what | With code changes |\n| **Architecture** | Senior devs, architects | System design decisions | Major changes only |\n| **Runbooks** | Operators, on-call | How to operate/fix | After incidents |\n| **User Guides** | End users | How to use the product | Feature releases |\n| **Tutorials** | Learners | Step-by-step learning | Periodically |\n| **ADRs** | Future team members | Why decisions were made | When decisions made |\n\n## The Documentation Process\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                DOCUMENTATION PROCESS                    â”‚\nâ”‚                                                         â”‚\nâ”‚  1. IDENTIFY AUDIENCE                                   â”‚\nâ”‚     â””â”€â†’ Who will read this? What do they need?          â”‚\nâ”‚                                                         â”‚\nâ”‚  2. DETERMINE SCOPE                                     â”‚\nâ”‚     â””â”€â†’ What needs documenting? What's out of scope?    â”‚\nâ”‚                                                         â”‚\nâ”‚  3. GATHER INFORMATION                                  â”‚\nâ”‚     â””â”€â†’ Code, specs, interviews, existing docs          â”‚\nâ”‚                                                         â”‚\nâ”‚  4. STRUCTURE CONTENT                                   â”‚\nâ”‚     â””â”€â†’ Organize for reader's journey                   â”‚\nâ”‚                                                         â”‚\nâ”‚  5. WRITE DRAFT                                         â”‚\nâ”‚     â””â”€â†’ Clear, concise, example-rich                    â”‚\nâ”‚                                                         â”‚\nâ”‚  6. REVIEW & VERIFY                                     â”‚\nâ”‚     â””â”€â†’ Technically accurate? Readable?                 â”‚\nâ”‚                                                         â”‚\nâ”‚  7. PUBLISH & MAINTAIN                                  â”‚\nâ”‚     â””â”€â†’ Keep it current, remove stale content           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Step 1: Identify Audience\n\n### Audience Analysis\n\n| Audience | Knowledge Level | Goals | Preferred Format |\n|----------|-----------------|-------|------------------|\n| **New developer** | Low project knowledge | Get started quickly | Quick start, examples |\n| **Experienced dev** | High technical skill | Reference details | API docs, specs |\n| **Operator** | Knows how to run | Fix issues fast | Runbooks, troubleshooting |\n| **End user** | Non-technical | Accomplish tasks | Screenshots, step-by-step |\n| **Manager** | High-level view | Understand capabilities | Overview, architecture |\n\n### Writing for Your Audience\n\n```markdown\n## For New Developers\n- Assume no prior context\n- Start with \"what is this?\"\n- Provide copy-paste examples\n- Link to prerequisites\n\n## For Experienced Developers\n- Skip the basics\n- Provide complete reference\n- Include edge cases\n- Link to source code\n\n## For End Users\n- Use their language, not technical jargon\n- Focus on tasks, not features\n- Include screenshots\n- Provide troubleshooting\n```\n\n## Step 2: Determine Scope\n\n### Documentation Inventory\n\n```markdown\n## Documentation Needed\n\n### Essential (Must Have)\n- [ ] README with quick start\n- [ ] Installation instructions\n- [ ] Basic usage examples\n- [ ] Environment variables reference\n\n### Important (Should Have)\n- [ ] API documentation\n- [ ] Architecture overview\n- [ ] Contributing guide\n- [ ] Troubleshooting guide\n\n### Nice to Have\n- [ ] Tutorials for common tasks\n- [ ] Video walkthroughs\n- [ ] Migration guides\n- [ ] Performance tuning guide\n```\n\n### What NOT to Document\n\n- Implementation details that change frequently\n- Things the code clearly expresses\n- Obvious type information\n- Internal helper functions\n\n## Step 3: Gather Information\n\n### Information Sources\n\n| Source | What to Extract |\n|--------|-----------------|\n| **Code** | Actual behavior, APIs, types |\n| **Tests** | Usage examples, edge cases |\n| **Specs** | Intended behavior, requirements |\n| **Git history** | Why changes were made |\n| **Interviews** | Tribal knowledge, gotchas |\n| **Existing docs** | What to update/remove |\n| **Support tickets** | Common questions |\n\n### Extraction Techniques\n\n```bash\n# Extract function signatures\ngrep -r \"export function\\|export const\" src/\n\n# Find public APIs\ngrep -r \"@public\\|@api\" src/\n\n# Extract environment variables\ngrep -r \"process\\.env\\.\" src/ | grep -oE \"process\\.env\\.[A-Z_]+\" | sort -u\n\n# Find TODOs and FIXMEs\ngrep -r \"TODO\\|FIXME\" src/\n```\n\n## Step 4: Structure Content\n\n### Information Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    DOCUMENTATION MAP                    â”‚\nâ”‚                                                         â”‚\nâ”‚  Landing (README)                                       â”‚\nâ”‚  â”œâ”€â”€ What is this?                                      â”‚\nâ”‚  â”œâ”€â”€ Quick Start â†â”€â”€ Most users start here              â”‚\nâ”‚  â””â”€â”€ Links to deeper docs                               â”‚\nâ”‚                                                         â”‚\nâ”‚  Getting Started                                        â”‚\nâ”‚  â”œâ”€â”€ Installation                                       â”‚\nâ”‚  â”œâ”€â”€ Configuration                                      â”‚\nâ”‚  â””â”€â”€ First steps                                        â”‚\nâ”‚                                                         â”‚\nâ”‚  Guides (Task-oriented)                                 â”‚\nâ”‚  â”œâ”€â”€ How to do X                                        â”‚\nâ”‚  â”œâ”€â”€ How to do Y                                        â”‚\nâ”‚  â””â”€â”€ How to do Z                                        â”‚\nâ”‚                                                         â”‚\nâ”‚  Reference (Information-oriented)                       â”‚\nâ”‚  â”œâ”€â”€ API Reference                                      â”‚\nâ”‚  â”œâ”€â”€ Configuration Reference                            â”‚\nâ”‚  â””â”€â”€ CLI Reference                                      â”‚\nâ”‚                                                         â”‚\nâ”‚  Explanation (Understanding-oriented)                   â”‚\nâ”‚  â”œâ”€â”€ Architecture                                       â”‚\nâ”‚  â”œâ”€â”€ Design decisions                                   â”‚\nâ”‚  â””â”€â”€ Concepts                                           â”‚\nâ”‚                                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### The DiÃ¡taxis Framework\n\n| Quadrant | Purpose | Form |\n|----------|---------|------|\n| **Tutorials** | Learning | Lessons (do this, then this) |\n| **How-to Guides** | Problem-solving | Steps (to achieve X, do Y) |\n| **Reference** | Information | Dry description (X is Y) |\n| **Explanation** | Understanding | Discussion (X works because Y) |\n\n## Step 5: Write Draft\n\n### Writing Principles\n\n**Be concise.** Remove unnecessary words.\n```markdown\n# Bad\nIn order to install the application, you will need to run the following command:\n\n# Good\nInstall with:\n```\n\n**Use active voice.**\n```markdown\n# Bad\nThe configuration file should be created by the user.\n\n# Good\nCreate a configuration file.\n```\n\n**Front-load important information.**\n```markdown\n# Bad\nAfter completing the installation process and configuring your environment \nvariables, you can start the server by running npm start.\n\n# Good\nRun `npm start` to start the server.\n\nPrerequisites: Install dependencies and configure environment variables first.\n```\n\n**Show, don't just tell.**\n```markdown\n# Bad\nThe API returns user data.\n\n# Good\nThe API returns user data:\n```json\n{\n  \"id\": \"123\",\n  \"name\": \"Alice\",\n  \"email\": \"alice@example.com\"\n}\n```\n```\n\nâ†’ See `references/writing-guidelines.md`\n\n## README Template\n\n```markdown\n# Project Name\n\nOne-line description of what this project does.\n\n## Features\n\n- Feature 1\n- Feature 2\n- Feature 3\n\n## Quick Start\n\n```bash\n# Install\nnpm install project-name\n\n# Configure\ncp .env.example .env\n\n# Run\nnpm start\n```\n\n## Documentation\n\n- [Installation Guide](docs/installation.md)\n- [API Reference](docs/api.md)\n- [Configuration](docs/configuration.md)\n- [Contributing](CONTRIBUTING.md)\n\n## Requirements\n\n- Node.js 18+\n- PostgreSQL 14+\n\n## License\n\nMIT\n```\n\nâ†’ See `references/readme-templates.md`\n\n## API Documentation\n\n### Endpoint Documentation\n\n```markdown\n## Create User\n\nCreates a new user account.\n\n### Request\n\n```http\nPOST /api/users\nContent-Type: application/json\nAuthorization: Bearer <token>\n```\n\n#### Body\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| email | string | Yes | User's email address |\n| name | string | Yes | Display name (1-100 chars) |\n| role | string | No | User role (default: \"user\") |\n\n#### Example\n\n```json\n{\n  \"email\": \"alice@example.com\",\n  \"name\": \"Alice Smith\",\n  \"role\": \"admin\"\n}\n```\n\n### Response\n\n#### Success (201 Created)\n\n```json\n{\n  \"data\": {\n    \"id\": \"usr_123\",\n    \"email\": \"alice@example.com\",\n    \"name\": \"Alice Smith\",\n    \"role\": \"admin\",\n    \"createdAt\": \"2024-01-15T10:30:00Z\"\n  }\n}\n```\n\n#### Errors\n\n| Status | Code | Description |\n|--------|------|-------------|\n| 400 | VALIDATION_ERROR | Invalid input data |\n| 401 | UNAUTHORIZED | Missing or invalid token |\n| 409 | EMAIL_EXISTS | Email already registered |\n```\n\nâ†’ See `references/api-documentation.md`\n\n## Code Comments\n\n### When to Comment\n\n| Comment | Don't Comment |\n|---------|---------------|\n| **Why** something is done | **What** code does (code should be clear) |\n| Complex algorithms | Simple operations |\n| Non-obvious side effects | Type information (use types) |\n| Workarounds and their reasons | Obvious function behavior |\n| Public API contracts | Implementation details |\n\n### Comment Styles\n\n```typescript\n/**\n * Calculates the optimal shipping route for an order.\n * \n * Uses Dijkstra's algorithm with warehouse proximity weighting.\n * Falls back to nearest warehouse if no optimal route found.\n * \n * @param order - The order to ship\n * @param warehouses - Available warehouses with inventory\n * @returns The selected warehouse and estimated delivery date\n * @throws {NoInventoryError} If no warehouse has sufficient inventory\n * \n * @example\n * const route = await calculateRoute(order, warehouses);\n * console.log(route.warehouse.name, route.estimatedDelivery);\n */\nexport async function calculateShippingRoute(\n  order: Order,\n  warehouses: Warehouse[]\n): Promise<ShippingRoute> {\n  // ...\n}\n\n// BAD: Comments that repeat the code\n// Increment counter by 1\ncounter++;\n\n// GOOD: Comments that explain why\n// Skip the first item because it's the header row\nfor (let i = 1; i < rows.length; i++) {\n  // ...\n}\n\n// GOOD: Warning about non-obvious behavior\n// WARNING: This function mutates the input array for performance.\n// Clone the array first if you need to preserve the original.\nfunction sortInPlace(items: Item[]): void {\n  // ...\n}\n```\n\nâ†’ See `references/code-comments.md`\n\n## Architecture Documentation\n\n### Architecture Overview\n\n```markdown\n# Architecture Overview\n\n## System Context\n\n[Diagram showing system and external actors]\n\n## High-Level Architecture\n\n[Diagram showing major components]\n\n## Key Design Decisions\n\n| Decision | Rationale | Trade-offs |\n|----------|-----------|------------|\n| PostgreSQL for primary data | ACID compliance, team expertise | Scaling requires more effort |\n| Redis for caching | Sub-ms latency, built-in expiration | Additional infrastructure |\n| Event-driven for async | Decoupling, resilience | Eventual consistency |\n\n## Data Flow\n\n[Diagram showing how data moves through system]\n\n## Technology Stack\n\n| Layer | Technology | Purpose |\n|-------|------------|---------|\n| Frontend | React | User interface |\n| API | Node.js/Express | REST API |\n| Database | PostgreSQL | Primary data store |\n| Cache | Redis | Session, hot data |\n| Queue | SQS | Async processing |\n\n## Further Reading\n\n- [ADR-001: Database Selection](adrs/001-database.md)\n- [ADR-002: Authentication Approach](adrs/002-auth.md)\n```\n\nâ†’ See `references/architecture-docs.md`\n\n## Runbooks\n\n### Runbook Template\n\n```markdown\n# Runbook: [Issue Name]\n\n## Overview\nBrief description of the issue and its impact.\n\n## Symptoms\n- Symptom 1 (what you'll see)\n- Symptom 2\n- Related alerts: [Alert names]\n\n## Impact\n- User impact: [Description]\n- Business impact: [Description]\n- Severity: [P1/P2/P3]\n\n## Quick Diagnosis\n\n```bash\n# Check service health\ncurl https://api.example.com/health\n\n# Check recent logs\nkubectl logs -l app=api --tail=100\n\n# Check metrics\n# [Link to dashboard]\n```\n\n## Resolution Steps\n\n### Step 1: [First action]\n```bash\n[Command to run]\n```\nExpected output: [What you should see]\n\n### Step 2: [Second action]\n[Instructions]\n\n### Step 3: Verify fix\n```bash\n# Verify service is healthy\ncurl https://api.example.com/health\n```\n\n## Escalation\nIf the above steps don't resolve the issue:\n1. Page the on-call engineer: [Contact]\n2. Escalate to: [Team/Person]\n\n## Post-Incident\n- [ ] Create incident ticket\n- [ ] Update this runbook if needed\n- [ ] Schedule post-mortem if P1/P2\n\n## Related\n- [Link to architecture docs]\n- [Link to related runbooks]\n```\n\nâ†’ See `references/runbook-templates.md`\n\n## Changelog & Release Notes\n\n### Changelog Format\n\n```markdown\n# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/),\nand this project adheres to [Semantic Versioning](https://semver.org/).\n\n## [Unreleased]\n\n### Added\n- New feature X for doing Y\n\n### Changed\n- Improved performance of Z by 50%\n\n### Fixed\n- Bug where A happened when B\n\n## [2.1.0] - 2024-01-15\n\n### Added\n- User authentication via OAuth (#123)\n- Rate limiting on API endpoints (#145)\n- Dark mode support (#156)\n\n### Changed\n- Upgraded Node.js to v20 (#167)\n- Improved error messages for validation errors\n\n### Fixed\n- Memory leak in long-running connections (#178)\n- Incorrect timezone handling in reports (#182)\n\n### Security\n- Updated dependencies to patch CVE-2024-1234\n\n### Deprecated\n- The `legacyAuth` option will be removed in v3.0\n\n## [2.0.0] - 2024-01-01\n\n### Breaking Changes\n- Renamed `userId` to `user_id` in API responses\n- Minimum Node.js version is now 18\n\n### Migration Guide\nSee [MIGRATION.md](MIGRATION.md) for upgrade instructions.\n```\n\nâ†’ See `references/changelog-guide.md`\n\n## Documentation Maintenance\n\n### Keeping Docs Current\n\n| Trigger | Action |\n|---------|--------|\n| Code PR merged | Update relevant docs in same PR |\n| New feature shipped | Update README, user docs |\n| API changed | Update API docs |\n| Incident resolved | Update runbooks |\n| Question asked twice | Add to FAQ/docs |\n\n### Documentation Review Checklist\n\n```markdown\n## Periodic Review Checklist\n\n### Accuracy\n- [ ] Code examples still work\n- [ ] Screenshots match current UI\n- [ ] Links are not broken\n- [ ] Version numbers are current\n\n### Completeness\n- [ ] New features are documented\n- [ ] Deprecated features are marked\n- [ ] Common questions are answered\n\n### Quality\n- [ ] No spelling/grammar errors\n- [ ] Consistent terminology\n- [ ] Clear and concise\n- [ ] Properly formatted\n```\n\n### Stale Documentation Indicators\n\n- ğŸš© Last updated >6 months ago\n- ğŸš© References old versions\n- ğŸš© Broken code examples\n- ğŸš© Screenshots don't match UI\n- ğŸš© \"TODO\" or \"Coming soon\" sections\n- ğŸš© References removed features\n\n## Documentation Tools\n\n| Tool | Purpose | Best For |\n|------|---------|----------|\n| **Markdown** | Simple docs | README, guides |\n| **JSDoc/TSDoc** | Code docs | API documentation |\n| **OpenAPI/Swagger** | API specs | REST API docs |\n| **Docusaurus** | Doc sites | Product documentation |\n| **Storybook** | Component docs | UI libraries |\n| **Mermaid** | Diagrams | Architecture docs |\n\n## Relationship to Other Skills\n\n| Skill | Relationship |\n|-------|--------------|\n| `spec` | Specs are internal; docs are external-facing |\n| `architect` | ADRs document architecture decisions |\n| `implement` | Code comments are part of implementation |\n| `scaffold` | Initial README is part of scaffolding |\n| `code-review` | Review should check doc updates |\n\n## Key Principles\n\n**Write for your reader.** Not for yourself.\n\n**Less is more.** Concise docs get read; verbose docs get skipped.\n\n**Show examples.** One good example is worth paragraphs of explanation.\n\n**Keep it current.** Outdated docs are worse than no docs.\n\n**Make it findable.** Good docs that can't be found are useless.\n\n**Test your docs.** Follow your own instructions. Do they work?\n\n## References\n\n- `references/readme-templates.md`: README templates for different project types\n- `references/api-documentation.md`: API documentation patterns and examples\n- `references/code-comments.md`: When and how to comment code\n- `references/architecture-docs.md`: Architecture documentation templates\n- `references/runbook-templates.md`: Operational runbook templates\n- `references/writing-guidelines.md`: Technical writing best practices\n- `references/changelog-guide.md`: Changelog and release notes guide",
  "references": [
    {
      "name": "api-documentation.md",
      "path": "references/api-documentation.md",
      "content": "# API Documentation\n\nPatterns and templates for documenting APIs.\n\n## API Documentation Principles\n\n1. **Complete**: Document every public endpoint\n2. **Accurate**: Keep in sync with actual behavior\n3. **Exemplified**: Include request/response examples\n4. **Testable**: Examples should be copy-paste runnable\n\n## Endpoint Documentation Template\n\n```markdown\n## Endpoint Name\n\nBrief description of what this endpoint does.\n\n### Request\n\n```http\nMETHOD /path/:param\nContent-Type: application/json\nAuthorization: Bearer <token>\n```\n\n### Path Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `param` | string | Description of parameter |\n\n### Query Parameters\n\n| Parameter | Type | Required | Default | Description |\n|-----------|------|----------|---------|-------------|\n| `page` | integer | No | 1 | Page number |\n| `limit` | integer | No | 20 | Items per page (max 100) |\n| `sort` | string | No | \"created_at\" | Sort field |\n\n### Request Body\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `name` | string | Yes | User's name (1-100 chars) |\n| `email` | string | Yes | Valid email address |\n| `role` | string | No | User role (default: \"user\") |\n\n#### Example\n\n```json\n{\n  \"name\": \"Alice Smith\",\n  \"email\": \"alice@example.com\",\n  \"role\": \"admin\"\n}\n```\n\n### Response\n\n#### Success (200 OK)\n\n```json\n{\n  \"data\": {\n    \"id\": \"usr_abc123\",\n    \"name\": \"Alice Smith\",\n    \"email\": \"alice@example.com\",\n    \"role\": \"admin\",\n    \"createdAt\": \"2024-01-15T10:30:00Z\"\n  }\n}\n```\n\n#### Error Responses\n\n| Status | Code | Description |\n|--------|------|-------------|\n| 400 | VALIDATION_ERROR | Invalid request body |\n| 401 | UNAUTHORIZED | Missing or invalid token |\n| 403 | FORBIDDEN | Insufficient permissions |\n| 404 | NOT_FOUND | Resource not found |\n| 409 | CONFLICT | Resource already exists |\n\n#### Error Example\n\n```json\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Invalid request data\",\n    \"details\": [\n      {\n        \"field\": \"email\",\n        \"message\": \"Invalid email format\"\n      }\n    ]\n  }\n}\n```\n```\n\n## Full API Reference Example\n\n```markdown\n# API Reference\n\nBase URL: `https://api.example.com/v1`\n\n## Authentication\n\nAll endpoints require authentication via Bearer token unless marked as public.\n\n```bash\ncurl -H \"Authorization: Bearer YOUR_TOKEN\" \\\n  https://api.example.com/v1/users\n```\n\n### Obtaining a Token\n\n```http\nPOST /auth/token\nContent-Type: application/json\n\n{\n  \"email\": \"user@example.com\",\n  \"password\": \"your-password\"\n}\n```\n\nResponse:\n```json\n{\n  \"data\": {\n    \"accessToken\": \"eyJhbG...\",\n    \"refreshToken\": \"eyJhbG...\",\n    \"expiresIn\": 3600\n  }\n}\n```\n\n## Rate Limiting\n\n- 100 requests per minute for authenticated users\n- 10 requests per minute for unauthenticated requests\n\nRate limit headers:\n- `X-RateLimit-Limit`: Request limit\n- `X-RateLimit-Remaining`: Remaining requests\n- `X-RateLimit-Reset`: Reset timestamp (Unix)\n\n## Pagination\n\nList endpoints return paginated results:\n\n```json\n{\n  \"data\": [...],\n  \"meta\": {\n    \"page\": 1,\n    \"limit\": 20,\n    \"total\": 100,\n    \"totalPages\": 5\n  }\n}\n```\n\nQuery parameters:\n- `page` (default: 1) - Page number\n- `limit` (default: 20, max: 100) - Items per page\n\n## Errors\n\nAll errors follow this format:\n\n```json\n{\n  \"error\": {\n    \"code\": \"ERROR_CODE\",\n    \"message\": \"Human-readable message\",\n    \"details\": {}\n  }\n}\n```\n\n### Error Codes\n\n| Code | HTTP Status | Description |\n|------|-------------|-------------|\n| VALIDATION_ERROR | 400 | Invalid request data |\n| UNAUTHORIZED | 401 | Authentication required |\n| FORBIDDEN | 403 | Insufficient permissions |\n| NOT_FOUND | 404 | Resource not found |\n| CONFLICT | 409 | Resource conflict |\n| RATE_LIMITED | 429 | Too many requests |\n| INTERNAL_ERROR | 500 | Server error |\n\n---\n\n## Users\n\n### List Users\n\nReturns a paginated list of users.\n\n```http\nGET /users\n```\n\n**Query Parameters:**\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `page` | integer | Page number |\n| `limit` | integer | Items per page |\n| `role` | string | Filter by role |\n| `search` | string | Search by name/email |\n\n**Response:**\n\n```json\n{\n  \"data\": [\n    {\n      \"id\": \"usr_abc123\",\n      \"name\": \"Alice Smith\",\n      \"email\": \"alice@example.com\",\n      \"role\": \"admin\",\n      \"createdAt\": \"2024-01-15T10:30:00Z\"\n    }\n  ],\n  \"meta\": {\n    \"page\": 1,\n    \"limit\": 20,\n    \"total\": 42,\n    \"totalPages\": 3\n  }\n}\n```\n\n### Get User\n\nReturns a single user by ID.\n\n```http\nGET /users/:id\n```\n\n**Response:**\n\n```json\n{\n  \"data\": {\n    \"id\": \"usr_abc123\",\n    \"name\": \"Alice Smith\",\n    \"email\": \"alice@example.com\",\n    \"role\": \"admin\",\n    \"createdAt\": \"2024-01-15T10:30:00Z\",\n    \"lastLoginAt\": \"2024-01-20T08:15:00Z\"\n  }\n}\n```\n\n### Create User\n\nCreates a new user.\n\n```http\nPOST /users\nContent-Type: application/json\n```\n\n**Request Body:**\n\n| Field | Type | Required | Description |\n|-------|------|----------|-------------|\n| `name` | string | Yes | User's name |\n| `email` | string | Yes | Email address |\n| `password` | string | Yes | Password (min 8 chars) |\n| `role` | string | No | Role (default: \"user\") |\n\n**Example:**\n\n```json\n{\n  \"name\": \"Bob Jones\",\n  \"email\": \"bob@example.com\",\n  \"password\": \"securepassword123\",\n  \"role\": \"user\"\n}\n```\n\n**Response (201 Created):**\n\n```json\n{\n  \"data\": {\n    \"id\": \"usr_def456\",\n    \"name\": \"Bob Jones\",\n    \"email\": \"bob@example.com\",\n    \"role\": \"user\",\n    \"createdAt\": \"2024-01-21T14:00:00Z\"\n  }\n}\n```\n\n### Update User\n\nUpdates an existing user.\n\n```http\nPATCH /users/:id\nContent-Type: application/json\n```\n\n**Request Body:** (all fields optional)\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `name` | string | User's name |\n| `email` | string | Email address |\n| `role` | string | User role |\n\n**Example:**\n\n```json\n{\n  \"name\": \"Robert Jones\"\n}\n```\n\n**Response (200 OK):**\n\n```json\n{\n  \"data\": {\n    \"id\": \"usr_def456\",\n    \"name\": \"Robert Jones\",\n    \"email\": \"bob@example.com\",\n    \"role\": \"user\",\n    \"createdAt\": \"2024-01-21T14:00:00Z\",\n    \"updatedAt\": \"2024-01-22T09:30:00Z\"\n  }\n}\n```\n\n### Delete User\n\nDeletes a user.\n\n```http\nDELETE /users/:id\n```\n\n**Response (204 No Content)**\n\nNo response body.\n\n---\n\n## Products\n\n[Continue with other resources...]\n```\n\n## OpenAPI/Swagger Documentation\n\n```yaml\n# openapi.yaml\nopenapi: 3.0.3\ninfo:\n  title: Example API\n  description: API for managing users and resources\n  version: 1.0.0\n  contact:\n    email: api@example.com\n  license:\n    name: MIT\n    url: https://opensource.org/licenses/MIT\n\nservers:\n  - url: https://api.example.com/v1\n    description: Production\n  - url: https://staging-api.example.com/v1\n    description: Staging\n\nsecurity:\n  - bearerAuth: []\n\npaths:\n  /users:\n    get:\n      summary: List users\n      description: Returns a paginated list of users\n      operationId: listUsers\n      tags:\n        - Users\n      parameters:\n        - name: page\n          in: query\n          schema:\n            type: integer\n            default: 1\n        - name: limit\n          in: query\n          schema:\n            type: integer\n            default: 20\n            maximum: 100\n        - name: role\n          in: query\n          schema:\n            type: string\n            enum: [user, admin]\n      responses:\n        '200':\n          description: Successful response\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  data:\n                    type: array\n                    items:\n                      $ref: '#/components/schemas/User'\n                  meta:\n                    $ref: '#/components/schemas/PaginationMeta'\n        '401':\n          $ref: '#/components/responses/Unauthorized'\n\n    post:\n      summary: Create user\n      description: Creates a new user\n      operationId: createUser\n      tags:\n        - Users\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              $ref: '#/components/schemas/CreateUserRequest'\n      responses:\n        '201':\n          description: User created\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  data:\n                    $ref: '#/components/schemas/User'\n        '400':\n          $ref: '#/components/responses/ValidationError'\n        '409':\n          $ref: '#/components/responses/Conflict'\n\n  /users/{id}:\n    get:\n      summary: Get user\n      operationId: getUser\n      tags:\n        - Users\n      parameters:\n        - name: id\n          in: path\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: Successful response\n          content:\n            application/json:\n              schema:\n                type: object\n                properties:\n                  data:\n                    $ref: '#/components/schemas/User'\n        '404':\n          $ref: '#/components/responses/NotFound'\n\ncomponents:\n  securitySchemes:\n    bearerAuth:\n      type: http\n      scheme: bearer\n      bearerFormat: JWT\n\n  schemas:\n    User:\n      type: object\n      properties:\n        id:\n          type: string\n          example: usr_abc123\n        name:\n          type: string\n          example: Alice Smith\n        email:\n          type: string\n          format: email\n          example: alice@example.com\n        role:\n          type: string\n          enum: [user, admin]\n          example: user\n        createdAt:\n          type: string\n          format: date-time\n        updatedAt:\n          type: string\n          format: date-time\n\n    CreateUserRequest:\n      type: object\n      required:\n        - name\n        - email\n        - password\n      properties:\n        name:\n          type: string\n          minLength: 1\n          maxLength: 100\n        email:\n          type: string\n          format: email\n        password:\n          type: string\n          minLength: 8\n        role:\n          type: string\n          enum: [user, admin]\n          default: user\n\n    PaginationMeta:\n      type: object\n      properties:\n        page:\n          type: integer\n        limit:\n          type: integer\n        total:\n          type: integer\n        totalPages:\n          type: integer\n\n    Error:\n      type: object\n      properties:\n        error:\n          type: object\n          properties:\n            code:\n              type: string\n            message:\n              type: string\n            details:\n              type: object\n\n  responses:\n    Unauthorized:\n      description: Authentication required\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n          example:\n            error:\n              code: UNAUTHORIZED\n              message: Authentication required\n\n    NotFound:\n      description: Resource not found\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n          example:\n            error:\n              code: NOT_FOUND\n              message: Resource not found\n\n    ValidationError:\n      description: Validation error\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n          example:\n            error:\n              code: VALIDATION_ERROR\n              message: Invalid request data\n              details:\n                - field: email\n                  message: Invalid email format\n\n    Conflict:\n      description: Resource conflict\n      content:\n        application/json:\n          schema:\n            $ref: '#/components/schemas/Error'\n          example:\n            error:\n              code: CONFLICT\n              message: Email already exists\n```\n\n## SDK/Client Documentation\n\n```markdown\n# JavaScript SDK\n\n## Installation\n\n```bash\nnpm install example-sdk\n```\n\n## Quick Start\n\n```javascript\nimport { Client } from 'example-sdk';\n\nconst client = new Client({\n  apiKey: 'your-api-key',\n});\n\n// List users\nconst users = await client.users.list();\n\n// Create user\nconst user = await client.users.create({\n  name: 'Alice',\n  email: 'alice@example.com',\n});\n```\n\n## Configuration\n\n```javascript\nconst client = new Client({\n  apiKey: 'your-api-key',      // Required\n  baseUrl: 'https://...',       // Optional, for self-hosted\n  timeout: 10000,               // Optional, default 5000ms\n  retries: 3,                   // Optional, default 2\n});\n```\n\n## Users\n\n### List Users\n\n```javascript\nconst users = await client.users.list({\n  page: 1,\n  limit: 20,\n  role: 'admin',\n});\n\n// users.data - array of users\n// users.meta - pagination info\n```\n\n### Get User\n\n```javascript\nconst user = await client.users.get('usr_abc123');\n```\n\n### Create User\n\n```javascript\nconst user = await client.users.create({\n  name: 'Alice Smith',\n  email: 'alice@example.com',\n  password: 'securepassword',\n});\n```\n\n### Update User\n\n```javascript\nconst user = await client.users.update('usr_abc123', {\n  name: 'New Name',\n});\n```\n\n### Delete User\n\n```javascript\nawait client.users.delete('usr_abc123');\n```\n\n## Error Handling\n\n```javascript\nimport { APIError, ValidationError, NotFoundError } from 'example-sdk';\n\ntry {\n  await client.users.get('invalid-id');\n} catch (error) {\n  if (error instanceof NotFoundError) {\n    console.log('User not found');\n  } else if (error instanceof ValidationError) {\n    console.log('Validation errors:', error.details);\n  } else if (error instanceof APIError) {\n    console.log('API error:', error.code, error.message);\n  }\n}\n```\n\n## TypeScript\n\nFull TypeScript support included:\n\n```typescript\nimport { Client, User, CreateUserInput } from 'example-sdk';\n\nconst client = new Client({ apiKey: 'key' });\n\nconst input: CreateUserInput = {\n  name: 'Alice',\n  email: 'alice@example.com',\n};\n\nconst user: User = await client.users.create(input);\n```\n```\n"
    },
    {
      "name": "architecture-docs.md",
      "path": "references/architecture-docs.md",
      "content": "# Architecture Documentation\n\nTemplates and patterns for documenting system architecture.\n\n## Architecture Documentation Types\n\n| Document | Purpose | Audience | Updates |\n|----------|---------|----------|---------|\n| **Overview** | High-level system view | All stakeholders | Major changes |\n| **Component Docs** | Individual component details | Developers | Component changes |\n| **ADRs** | Decision records | Future team | When decisions made |\n| **Data Model** | Database schema | Developers, DBAs | Schema changes |\n| **Integration Docs** | External system integration | Integrators | Integration changes |\n\n## Architecture Overview Template\n\n```markdown\n# Architecture Overview\n\n## Executive Summary\n\n[2-3 sentences describing the system's purpose and architecture style]\n\nExample: \"OrderFlow is a microservices-based order management system handling 10M orders/month. It uses event-driven architecture for scalability and CQRS for optimized read/write operations.\"\n\n## System Context\n\n[Diagram showing system boundaries and external actors]\n\n```\n                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                         â”‚   Mobile    â”‚\n                         â”‚    App      â”‚\n                         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n                                â”‚\n      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n      â”‚   Partners   â”‚          â–¼          â”‚   Admins     â”‚\n      â”‚    (API)     â”‚â”€â”€â”€â”€â–¶â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â—€â”€â”€â”€â”€â”‚   (Web)      â”‚\n      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚         â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                           â”‚ OrderFlowâ”‚\n      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ System   â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n      â”‚   Payment    â”‚â—€â”€â”€â”€â”€â”‚         â”‚â”€â”€â”€â”€â–¶â”‚   Shipping   â”‚\n      â”‚   Gateway    â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   Provider   â”‚\n      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                â”‚\n                                â–¼\n                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                         â”‚  Analytics  â”‚\n                         â”‚   Platform  â”‚\n                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## High-Level Architecture\n\n[Diagram showing major components]\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                         Load Balancer                           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                                 â”‚\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚     API Gateway       â”‚       â”‚     Admin Gateway       â”‚\n    â”‚   (Authentication,    â”‚       â”‚   (Internal tools)      â”‚\n    â”‚    Rate Limiting)     â”‚       â”‚                         â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                                 â”‚\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚                    Service Mesh                         â”‚\n    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚\n    â”‚  â”‚  Order   â”‚  â”‚  User    â”‚  â”‚ Inventoryâ”‚  â”‚ Payment  â”‚â”‚\n    â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚â”‚\n    â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜â”‚\n    â”‚       â”‚             â”‚             â”‚             â”‚      â”‚\n    â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚\n    â”‚                     â”‚             â”‚                    â”‚\n    â”‚              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”            â”‚\n    â”‚              â”‚  Message   â”‚ â”‚   Event    â”‚            â”‚\n    â”‚              â”‚   Queue    â”‚ â”‚   Store    â”‚            â”‚\n    â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                â”‚                         â”‚\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚    PostgreSQL         â”‚ â”‚      Redis            â”‚\n    â”‚    (Primary DB)       â”‚ â”‚      (Cache)          â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Components\n\n### Order Service\n\n**Purpose:** Manages order lifecycle from creation to completion.\n\n**Responsibilities:**\n- Order creation and validation\n- Order status management\n- Order history and reporting\n\n**Technology:** Node.js, Express, PostgreSQL\n\n**API:** REST, documented at `/api/orders`\n\n**Dependencies:** User Service, Inventory Service, Payment Service\n\n### User Service\n\n**Purpose:** Manages user accounts and authentication.\n\n[Continue for each component...]\n\n## Data Flow\n\n### Order Creation Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Client â”‚â”€â”€â”€â”€â–¶â”‚   API   â”‚â”€â”€â”€â”€â–¶â”‚  Order   â”‚â”€â”€â”€â”€â–¶â”‚Inventoryâ”‚\nâ”‚        â”‚     â”‚ Gateway â”‚     â”‚ Service  â”‚     â”‚ Service â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜\n                                    â”‚                â”‚\n                                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                    â”‚  â”‚\n                                    â–¼  â–¼\n                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                               â”‚ Payment â”‚\n                               â”‚ Service â”‚\n                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜\n                                    â”‚\n                                    â–¼\n                               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                               â”‚  Event  â”‚â”€â”€â”€â”€â”€â”€â–¶ Email, Analytics\n                               â”‚  Queue  â”‚\n                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Technology Stack\n\n| Layer | Technology | Purpose | Rationale |\n|-------|------------|---------|-----------|\n| Frontend | React | Web UI | Team expertise, ecosystem |\n| Mobile | React Native | iOS/Android | Code sharing with web |\n| API Gateway | Kong | Routing, auth | Enterprise features |\n| Services | Node.js | Business logic | JavaScript ecosystem |\n| Database | PostgreSQL | Primary data | ACID, reliability |\n| Cache | Redis | Performance | Sub-ms latency |\n| Queue | RabbitMQ | Async processing | Reliable delivery |\n| Search | Elasticsearch | Full-text search | Scalable search |\n\n## Cross-Cutting Concerns\n\n### Authentication\n\n- JWT-based authentication\n- Tokens issued by User Service\n- Validated at API Gateway\n- 24-hour token expiration\n\n### Logging\n\n- Structured JSON logging\n- Centralized in Elasticsearch\n- Correlation IDs across services\n- 30-day retention\n\n### Monitoring\n\n- Prometheus metrics\n- Grafana dashboards\n- PagerDuty alerting\n- SLOs: 99.9% availability, <500ms p95\n\n## Deployment\n\n- Kubernetes on AWS EKS\n- Multi-AZ deployment\n- Blue/green deployments\n- Automated via GitHub Actions\n\n## Security\n\n- All traffic over HTTPS\n- Secrets in AWS Secrets Manager\n- Network segmentation via VPC\n- Regular security scans\n\n## Related Documentation\n\n- [ADRs](adrs/README.md)\n- [API Documentation](api/README.md)\n- [Runbooks](runbooks/README.md)\n- [Data Model](data-model.md)\n```\n\n## Architecture Decision Record (ADR)\n\n```markdown\n# ADR-001: Use PostgreSQL for Primary Database\n\n## Status\n\nAccepted\n\n## Date\n\n2024-01-15\n\n## Context\n\nWe need to choose a primary database for the OrderFlow system. The database will store:\n- User accounts and profiles\n- Orders and order history\n- Product catalog\n- Inventory levels\n\nRequirements:\n- ACID transactions for order processing\n- Support for complex queries (reporting)\n- Horizontal read scaling\n- Team has SQL experience\n\nOptions considered:\n1. PostgreSQL\n2. MySQL\n3. MongoDB\n4. CockroachDB\n\n## Decision\n\nWe will use **PostgreSQL** as our primary database.\n\n## Rationale\n\n### Why PostgreSQL\n\n- **ACID compliance**: Critical for financial transactions in order processing\n- **Rich query capabilities**: JSON support, CTEs, window functions for reporting\n- **Read replicas**: Easy horizontal read scaling for our read-heavy workload\n- **Team expertise**: 4 of 5 engineers have PostgreSQL experience\n- **Ecosystem**: Excellent tooling (pgAdmin, pg_dump, etc.)\n- **Maturity**: Proven at scale, excellent documentation\n\n### Why Not Alternatives\n\n**MySQL:**\n- Weaker JSON support\n- Less sophisticated query planner\n- Similar operational complexity\n\n**MongoDB:**\n- Would need additional system for ACID transactions\n- Team lacks NoSQL experience\n- Harder to enforce data integrity\n\n**CockroachDB:**\n- Higher operational complexity\n- Cost implications for our scale\n- Team unfamiliar with distributed SQL\n\n## Consequences\n\n### Positive\n\n- Strong data integrity for orders and payments\n- Rich querying for reports and analytics\n- Team can be productive immediately\n- Large community for support\n\n### Negative\n\n- Vertical scaling limits (acceptable for 3-5 year horizon)\n- Need to manage read replicas ourselves\n- Some flexibility lost vs document stores\n\n### Neutral\n\n- Standard PostgreSQL operational knowledge required\n- Need connection pooling (PgBouncer) at scale\n\n## Follow-up Actions\n\n- [ ] Set up PostgreSQL 15 on RDS\n- [ ] Configure read replicas for reporting\n- [ ] Implement connection pooling\n- [ ] Document backup/recovery procedures\n\n## References\n\n- [PostgreSQL documentation](https://www.postgresql.org/docs/)\n- [Scaling PostgreSQL guide](internal-wiki/scaling-postgres)\n- [Database comparison analysis](docs/database-comparison.md)\n```\n\n## Component Documentation\n\n```markdown\n# Order Service\n\n## Overview\n\nThe Order Service manages the complete order lifecycle, from creation through fulfillment.\n\n## Responsibilities\n\n- Create and validate new orders\n- Manage order status transitions\n- Calculate order totals and taxes\n- Coordinate with Inventory and Payment services\n- Emit order events for downstream consumers\n\n## API\n\n### Endpoints\n\n| Method | Path | Description |\n|--------|------|-------------|\n| POST | /orders | Create new order |\n| GET | /orders | List orders |\n| GET | /orders/:id | Get order details |\n| PATCH | /orders/:id/cancel | Cancel order |\n\nSee [API documentation](../api/orders.md) for details.\n\n### Events Published\n\n| Event | Description |\n|-------|-------------|\n| order.created | New order created |\n| order.paid | Payment confirmed |\n| order.shipped | Order shipped |\n| order.delivered | Order delivered |\n| order.cancelled | Order cancelled |\n\n## Architecture\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    Order Service                        â”‚\nâ”‚                                                         â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚\nâ”‚  â”‚   HTTP API   â”‚â”€â”€â”€â–¶â”‚   Service    â”‚â”€â”€â”€â–¶â”‚Repository â”‚ â”‚\nâ”‚  â”‚  (Express)   â”‚    â”‚    Layer     â”‚    â”‚  (Kysely) â”‚ â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚\nâ”‚                             â”‚                  â”‚       â”‚\nâ”‚                      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â” â”‚\nâ”‚                      â”‚   Event      â”‚    â”‚PostgreSQL â”‚ â”‚\nâ”‚                      â”‚   Publisher  â”‚    â”‚           â”‚ â”‚\nâ”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n           â”‚\n           â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚  RabbitMQ   â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Configuration\n\n| Variable | Required | Default | Description |\n|----------|----------|---------|-------------|\n| DATABASE_URL | Yes | - | PostgreSQL connection string |\n| RABBITMQ_URL | Yes | - | RabbitMQ connection string |\n| PORT | No | 3000 | HTTP server port |\n| LOG_LEVEL | No | info | Logging level |\n\n## Dependencies\n\n### Internal\n\n- **User Service**: Validate user exists\n- **Inventory Service**: Check/reserve inventory\n- **Payment Service**: Process payments\n\n### External\n\n- **PostgreSQL**: Primary data store\n- **RabbitMQ**: Event publishing\n\n## Data Model\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚     orders       â”‚       â”‚   order_items    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ id (PK)          â”‚       â”‚ id (PK)          â”‚\nâ”‚ user_id (FK)     â”‚â—€â”€â”€â”€â”€â”€â”€â”‚ order_id (FK)    â”‚\nâ”‚ status           â”‚       â”‚ product_id       â”‚\nâ”‚ total_cents      â”‚       â”‚ quantity         â”‚\nâ”‚ created_at       â”‚       â”‚ price_cents      â”‚\nâ”‚ updated_at       â”‚       â”‚ created_at       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Runbooks\n\n- [Order stuck in pending](../runbooks/order-stuck-pending.md)\n- [High order failure rate](../runbooks/order-failure-rate.md)\n\n## SLOs\n\n| Metric | Target | Current |\n|--------|--------|---------|\n| Availability | 99.9% | 99.95% |\n| Create order p50 | <100ms | 45ms |\n| Create order p99 | <500ms | 320ms |\n| Error rate | <0.1% | 0.05% |\n```\n\n## Integration Documentation\n\n```markdown\n# Payment Gateway Integration\n\n## Overview\n\nIntegration with Stripe for payment processing.\n\n## Authentication\n\nAll requests require API key authentication:\n\n```bash\nAuthorization: Bearer sk_live_xxxxx\n```\n\nStore the API key in AWS Secrets Manager under `payment/stripe/api_key`.\n\n## Endpoints Used\n\n### Create Payment Intent\n\n```http\nPOST https://api.stripe.com/v1/payment_intents\n```\n\nRequest:\n```json\n{\n  \"amount\": 2000,\n  \"currency\": \"usd\",\n  \"payment_method\": \"pm_xxxxx\",\n  \"confirm\": true\n}\n```\n\nResponse:\n```json\n{\n  \"id\": \"pi_xxxxx\",\n  \"status\": \"succeeded\",\n  \"amount\": 2000\n}\n```\n\n### Refund Payment\n\n```http\nPOST https://api.stripe.com/v1/refunds\n```\n\nRequest:\n```json\n{\n  \"payment_intent\": \"pi_xxxxx\",\n  \"amount\": 1000\n}\n```\n\n## Webhook Events\n\nWe subscribe to these webhook events:\n\n| Event | Handler | Description |\n|-------|---------|-------------|\n| payment_intent.succeeded | handlePaymentSuccess | Mark order as paid |\n| payment_intent.failed | handlePaymentFailed | Mark order as failed |\n| charge.refunded | handleRefund | Update refund status |\n\nWebhook endpoint: `POST /webhooks/stripe`\n\nWebhook secret: AWS Secrets Manager `payment/stripe/webhook_secret`\n\n## Error Handling\n\n| Stripe Error | Our Action | User Message |\n|--------------|------------|--------------|\n| card_declined | Retry once, then fail | \"Payment declined\" |\n| insufficient_funds | Fail immediately | \"Insufficient funds\" |\n| rate_limit | Retry with backoff | \"Please try again\" |\n| api_error | Alert on-call, retry | \"Payment processing error\" |\n\n## Testing\n\nUse Stripe test mode with `sk_test_xxxxx`.\n\nTest card numbers:\n- Success: 4242424242424242\n- Decline: 4000000000000002\n- Insufficient funds: 4000000000009995\n\n## Monitoring\n\nDashboard: [Grafana - Payment Metrics](https://grafana.../payments)\n\nAlerts:\n- Payment success rate < 95%\n- Payment latency p99 > 5s\n- Stripe API errors > 10/min\n```\n"
    },
    {
      "name": "changelog-guide.md",
      "path": "references/changelog-guide.md",
      "content": "# Changelog Guide\n\nHow to write and maintain changelogs and release notes.\n\n## Changelog Principles\n\n1. **For humans**: Write for people, not machines\n2. **Chronological**: Newest changes first\n3. **Grouped**: Organize by change type\n4. **Linked**: Reference issues, PRs, commits\n5. **Versioned**: Follow semantic versioning\n\n## Keep a Changelog Format\n\nBased on [keepachangelog.com](https://keepachangelog.com/).\n\n```markdown\n# Changelog\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## [Unreleased]\n\n### Added\n- New feature being developed\n\n## [1.2.0] - 2024-01-15\n\n### Added\n- User authentication via OAuth (#123)\n- Rate limiting on API endpoints (#145)\n- Dark mode support in web UI (#156)\n\n### Changed\n- Improved error messages for validation errors\n- Upgraded Node.js from 18 to 20 (#167)\n- Refactored database queries for better performance\n\n### Deprecated\n- The `legacyAuth` option will be removed in v2.0\n\n### Removed\n- Dropped support for Node.js 16\n\n### Fixed\n- Memory leak in long-running WebSocket connections (#178)\n- Incorrect timezone handling in date pickers (#182)\n- Race condition in concurrent order updates (#189)\n\n### Security\n- Updated `lodash` to patch CVE-2024-1234\n- Fixed XSS vulnerability in user profile page (#195)\n\n## [1.1.0] - 2024-01-01\n\n### Added\n- Feature A\n- Feature B\n\n### Fixed\n- Bug X\n- Bug Y\n\n## [1.0.0] - 2023-12-01\n\nInitial release.\n\n### Added\n- Core functionality\n- API endpoints\n- Web interface\n\n[Unreleased]: https://github.com/org/repo/compare/v1.2.0...HEAD\n[1.2.0]: https://github.com/org/repo/compare/v1.1.0...v1.2.0\n[1.1.0]: https://github.com/org/repo/compare/v1.0.0...v1.1.0\n[1.0.0]: https://github.com/org/repo/releases/tag/v1.0.0\n```\n\n## Change Categories\n\n| Category | Description | Examples |\n|----------|-------------|----------|\n| **Added** | New features | New API endpoint, new config option |\n| **Changed** | Changes to existing features | Updated behavior, improved performance |\n| **Deprecated** | Features to be removed | Old API version, legacy option |\n| **Removed** | Features removed | Deleted endpoint, dropped support |\n| **Fixed** | Bug fixes | Resolved crash, fixed calculation |\n| **Security** | Security fixes | Patched vulnerability, updated dependency |\n\n## Writing Changelog Entries\n\n### Good Entries\n\n```markdown\n### Added\n- User authentication via Google OAuth - Users can now sign in with their Google accounts (#123)\n- Export data to CSV - Added \"Export\" button to data tables\n\n### Fixed  \n- Fixed memory leak when processing large files - Memory usage now stays constant regardless of file size (#178)\n- Order totals now correctly handle decimal currencies like JPY (#182)\n\n### Security\n- Updated `jsonwebtoken` to 9.0.0 to address CVE-2023-48238\n```\n\n### Bad Entries\n\n```markdown\n### Added\n- Added stuff (#123)  âŒ Too vague\n- New feature  âŒ No description\n\n### Fixed\n- Fixed bug  âŒ What bug?\n- Various fixes  âŒ Meaningless\n\n### Changed\n- Updated dependencies  âŒ Which ones? Why?\n- Refactored code  âŒ User-facing impact?\n```\n\n### Entry Format\n\n```markdown\n- [Brief description] - [Additional context if needed] ([#PR] or [#issue])\n```\n\nExamples:\n```markdown\n- Add user profile page - Users can now view and edit their profile (#234)\n- Fix crash when uploading files larger than 10MB (#456)\n- Update React from 17 to 18 for improved performance (#567)\n```\n\n## Semantic Versioning\n\nFormat: `MAJOR.MINOR.PATCH`\n\n| Change | Version Bump | Example |\n|--------|--------------|---------|\n| Breaking changes | MAJOR | 1.0.0 â†’ 2.0.0 |\n| New features (backward compatible) | MINOR | 1.0.0 â†’ 1.1.0 |\n| Bug fixes (backward compatible) | PATCH | 1.0.0 â†’ 1.0.1 |\n\n### Breaking Changes\n\nDocument breaking changes prominently:\n\n```markdown\n## [2.0.0] - 2024-02-01\n\n### âš ï¸ Breaking Changes\n\n- **API**: Renamed `userId` to `user_id` in all responses\n  - Migration: Update your code to use `user_id`\n  \n- **Config**: Removed `legacyMode` option\n  - Migration: Remove `legacyMode` from your config file\n\n- **Minimum Node.js version is now 18**\n  - Migration: Upgrade Node.js to 18 or later\n\n### Migration Guide\n\nSee [MIGRATION.md](MIGRATION.md) for detailed upgrade instructions.\n```\n\n## Release Notes\n\nMore detailed than changelog entries, for major releases.\n\n```markdown\n# Release Notes: v2.0.0\n\n**Release Date:** 2024-02-01\n\nWe're excited to announce version 2.0 of Example App! This major release \nincludes significant performance improvements, a redesigned API, and \nseveral new features.\n\n## Highlights\n\n### ğŸš€ 50% Faster Performance\n\nWe've completely rewritten the data processing engine. Benchmarks show:\n- API response times reduced by 50%\n- Memory usage reduced by 30%\n- File processing 3x faster\n\n### ğŸ” Enhanced Security\n\n- Two-factor authentication now available for all accounts\n- API keys can now have scoped permissions\n- Audit logs for all admin actions\n\n### ğŸ¨ Redesigned Dashboard\n\nThe dashboard has been completely redesigned:\n- New card-based layout\n- Real-time updates\n- Dark mode support\n\n## Breaking Changes\n\nThis release includes breaking changes. Please review the \n[Migration Guide](MIGRATION.md) before upgrading.\n\n### API Changes\n\n| Old | New |\n|-----|-----|\n| `GET /users/:userId` | `GET /users/:user_id` |\n| `response.userId` | `response.user_id` |\n\n### Configuration Changes\n\nThe following config options have been removed:\n- `legacyMode` - Legacy mode is no longer supported\n- `oldApiVersion` - Only v2 API is supported\n\n### Minimum Requirements\n\n- Node.js 18+ (was 16+)\n- PostgreSQL 14+ (was 12+)\n\n## New Features\n\n### User Authentication\n\n```javascript\n// New OAuth support\nconst user = await auth.loginWithGoogle();\n\n// Two-factor authentication\nawait auth.enableTwoFactor(user.id);\n```\n\n### Data Export\n\nUsers can now export their data in multiple formats:\n- CSV\n- JSON\n- Excel\n\n### Webhooks\n\nConfigure webhooks to receive real-time notifications:\n\n```javascript\nawait webhooks.create({\n  url: 'https://your-server.com/webhook',\n  events: ['order.created', 'order.updated']\n});\n```\n\n## Bug Fixes\n\n- Fixed memory leak in WebSocket connections (#178)\n- Fixed incorrect date formatting in reports (#182)\n- Fixed race condition in order processing (#189)\n\n## Deprecations\n\nThe following features are deprecated and will be removed in v3.0:\n\n- `legacyExport()` - Use `export()` instead\n- `v1` API endpoints - Use `v2` endpoints\n\n## Known Issues\n\n- Dashboard may flicker on Safari 15 (workaround: use Safari 16+)\n- CSV export limited to 100,000 rows\n\n## Upgrade Instructions\n\n1. Review breaking changes above\n2. Read the [Migration Guide](MIGRATION.md)\n3. Update dependencies: `npm update example-app`\n4. Run migrations: `npm run migrate`\n5. Test in staging before production\n\n## Thank You\n\nThanks to all 23 contributors who made this release possible!\n\nSpecial thanks to @alice, @bob, and @carol for major contributions.\n\n## Full Changelog\n\nSee [CHANGELOG.md](CHANGELOG.md) for the complete list of changes.\n```\n\n## Automation\n\n### Conventional Commits\n\nUse conventional commit messages for automated changelogs:\n\n```\nfeat: add user authentication\nfix: resolve memory leak in file processing\ndocs: update API documentation\nchore: upgrade dependencies\nBREAKING CHANGE: rename userId to user_id\n```\n\n### Tools\n\n| Tool | Purpose |\n|------|---------|\n| [standard-version](https://github.com/conventional-changelog/standard-version) | Automate versioning and changelog |\n| [semantic-release](https://github.com/semantic-release/semantic-release) | Fully automated releases |\n| [release-please](https://github.com/googleapis/release-please) | Google's release automation |\n\n### GitHub Actions Example\n\n```yaml\nname: Release\n\non:\n  push:\n    branches: [main]\n\njobs:\n  release:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n        with:\n          fetch-depth: 0\n\n      - name: Setup Node\n        uses: actions/setup-node@v4\n        with:\n          node-version: 20\n\n      - name: Release\n        run: npx semantic-release\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}\n```\n\n## Best Practices\n\n### Do\n\n- âœ… Write from user's perspective\n- âœ… Include PR/issue references\n- âœ… Group related changes\n- âœ… Highlight breaking changes\n- âœ… Keep unreleased section updated\n- âœ… Include migration instructions\n\n### Don't\n\n- âŒ Use commit messages as entries\n- âŒ Include internal refactoring (unless it affects users)\n- âŒ Write vague entries like \"bug fixes\"\n- âŒ Mix unrelated changes\n- âŒ Forget to update version links\n"
    },
    {
      "name": "code-comments.md",
      "path": "references/code-comments.md",
      "content": "# Code Comments\n\nGuidelines for writing effective code comments.\n\n## The Golden Rule\n\n**Comment the \"why\", not the \"what\".**\n\nThe code shows what it does. Comments explain why it does it that way.\n\n## When to Comment\n\n### âœ… DO Comment\n\n```typescript\n// WHY: Using insertion sort because array is nearly sorted (avg 2 swaps)\n// and n < 10, where insertion sort beats quicksort\nfunction sortSmallArray(items: number[]): number[] {\n  // insertion sort implementation\n}\n\n// WORKAROUND: Safari doesn't support lookbehind in regex\n// Remove this when Safari 16.4+ has majority adoption\n// See: https://bugs.webkit.org/show_bug.cgi?id=174931\nconst pattern = /(?:^|[^\\\\])\"/g;\n\n// WARNING: This function has O(nÂ²) complexity\n// Only use for small datasets (<1000 items)\nfunction findDuplicates(items: string[]): string[] {\n  // ...\n}\n\n// HACK: The API returns dates as strings without timezone\n// Assume UTC until they fix their API (ticket #1234)\nconst date = new Date(apiDate + 'Z');\n\n// NOTE: Order matters here - auth must run before rate limiting\n// because rate limits are per-user\napp.use(authenticate);\napp.use(rateLimit);\n```\n\n### âŒ DON'T Comment\n\n```typescript\n// BAD: States the obvious\n// Increment counter\ncounter++;\n\n// BAD: Repeats the code\n// Check if user is admin\nif (user.isAdmin) {\n\n// BAD: Outdated/wrong comment\n// Returns user's full name\nfunction getEmail(user: User): string {\n  return user.email;\n}\n\n// BAD: Commented-out code (just delete it)\n// function oldImplementation() {\n//   ...\n// }\n```\n\n## Comment Types\n\n### JSDoc/TSDoc for Public APIs\n\n```typescript\n/**\n * Calculates the shipping cost for an order.\n *\n * Uses weight-based pricing for domestic orders and zone-based\n * pricing for international orders. Express shipping adds 50% premium.\n *\n * @param order - The order to calculate shipping for\n * @param options - Shipping options\n * @returns Shipping cost in cents\n * @throws {InvalidAddressError} If shipping address is incomplete\n *\n * @example\n * ```typescript\n * const cost = calculateShipping(order, { express: true });\n * console.log(`Shipping: $${cost / 100}`);\n * ```\n */\nexport function calculateShipping(\n  order: Order,\n  options: ShippingOptions = {}\n): number {\n  // ...\n}\n```\n\n### Interface/Type Documentation\n\n```typescript\n/**\n * Configuration options for the API client.\n */\nexport interface ClientConfig {\n  /**\n   * API key for authentication.\n   * Get yours at https://dashboard.example.com/api-keys\n   */\n  apiKey: string;\n\n  /**\n   * Base URL for API requests.\n   * @default \"https://api.example.com/v1\"\n   */\n  baseUrl?: string;\n\n  /**\n   * Request timeout in milliseconds.\n   * @default 5000\n   */\n  timeout?: number;\n\n  /**\n   * Number of retry attempts for failed requests.\n   * Set to 0 to disable retries.\n   * @default 2\n   */\n  retries?: number;\n}\n```\n\n### Inline Explanations\n\n```typescript\nfunction processOrder(order: Order): void {\n  // Skip validation for legacy orders imported before 2020\n  // These have different data formats that would fail validation\n  if (order.createdAt < LEGACY_CUTOFF_DATE) {\n    return processLegacyOrder(order);\n  }\n\n  // Lock order to prevent concurrent modifications\n  // This is a distributed lock with 30s TTL\n  const lock = await acquireLock(`order:${order.id}`, { ttl: 30000 });\n\n  try {\n    // Process in specific order: inventory â†’ payment â†’ shipping\n    // Payment must come after inventory to avoid charging for out-of-stock items\n    await reserveInventory(order);\n    await processPayment(order);\n    await scheduleShipping(order);\n  } finally {\n    await lock.release();\n  }\n}\n```\n\n### Section Markers\n\n```typescript\nexport class OrderService {\n  // ============================================================\n  // Public API\n  // ============================================================\n\n  async createOrder(input: CreateOrderInput): Promise<Order> {\n    // ...\n  }\n\n  async cancelOrder(orderId: string): Promise<void> {\n    // ...\n  }\n\n  // ============================================================\n  // Private Helpers\n  // ============================================================\n\n  private validateOrder(order: Order): void {\n    // ...\n  }\n\n  private calculateTotal(items: OrderItem[]): number {\n    // ...\n  }\n}\n```\n\n### TODO/FIXME/HACK\n\n```typescript\n// TODO: Add pagination support (ticket #123)\nasync function getUsers(): Promise<User[]> {\n  return db.query('SELECT * FROM users');\n}\n\n// FIXME: Race condition when multiple requests update same user\n// Need to add optimistic locking\nasync function updateUser(id: string, data: UserUpdate): Promise<User> {\n  // ...\n}\n\n// HACK: Workaround for bug in third-party library\n// Remove when upgrading to v3.0 (see issue #456)\nconst result = JSON.parse(JSON.stringify(data));\n\n// NOTE: This timeout is intentionally long for slow network conditions\n// in some customer environments\nconst TIMEOUT = 30000;\n\n// WARNING: Do not call this in a loop - makes N database queries\n// Use batchGetUsers() instead for multiple users\nasync function getUser(id: string): Promise<User> {\n  // ...\n}\n\n// DEPRECATED: Use newFunction() instead. Will be removed in v3.0\nfunction oldFunction(): void {\n  console.warn('oldFunction is deprecated, use newFunction instead');\n  // ...\n}\n```\n\n## File Headers\n\n```typescript\n/**\n * @fileoverview Order processing service\n *\n * Handles order creation, payment processing, and fulfillment.\n * This is the main entry point for all order-related operations.\n *\n * @module services/order\n * @see {@link https://wiki.example.com/orders|Order Processing Wiki}\n */\n```\n\n## Module Documentation\n\n```typescript\n/**\n * Authentication and authorization utilities.\n *\n * @packageDocumentation\n *\n * @remarks\n * This module provides JWT-based authentication for the API.\n * All tokens expire after 24 hours and must be refreshed.\n *\n * @example\n * ```typescript\n * import { createToken, verifyToken } from './auth';\n *\n * const token = createToken({ userId: '123' });\n * const payload = verifyToken(token);\n * ```\n */\n\nexport * from './token';\nexport * from './middleware';\nexport * from './types';\n```\n\n## Comment Formatting\n\n### Multi-line Comments\n\n```typescript\n/*\n * This algorithm uses a modified Dijkstra's approach:\n * 1. Build graph from warehouse locations\n * 2. Weight edges by shipping cost + time\n * 3. Find shortest path considering inventory\n *\n * Time complexity: O(V log V + E) where V = warehouses, E = routes\n * Space complexity: O(V + E) for adjacency list\n */\nfunction findOptimalRoute(warehouses: Warehouse[]): Route {\n  // ...\n}\n```\n\n### Alignment\n\n```typescript\nconst config = {\n  timeout: 5000,    // Request timeout in ms\n  retries: 3,       // Number of retry attempts\n  backoff: 1000,    // Initial backoff delay in ms\n  maxBackoff: 30000 // Maximum backoff delay in ms\n};\n```\n\n## Comments to Avoid\n\n### Redundant Comments\n\n```typescript\n// BAD\n// Constructor\nconstructor() { }\n\n// Get the user's name\ngetName(): string {\n  return this.name;\n}\n\n// GOOD - no comment needed, the code is clear\nconstructor(private readonly name: string) { }\n\ngetName(): string {\n  return this.name;\n}\n```\n\n### Changelog in Comments\n\n```typescript\n// BAD\n// v1.0: Initial implementation\n// v1.1: Added caching\n// v1.2: Fixed bug with null values\n// v2.0: Refactored for performance\nfunction processData() { }\n\n// GOOD - use git history instead\nfunction processData() { }\n```\n\n### Commented-Out Code\n\n```typescript\n// BAD\nfunction calculate(x: number): number {\n  // const oldResult = x * 2;\n  // return oldResult + 1;\n  return x * 3;\n}\n\n// GOOD - just delete it\nfunction calculate(x: number): number {\n  return x * 3;\n}\n```\n\n## Testing Comments\n\n```typescript\ndescribe('OrderService', () => {\n  describe('createOrder', () => {\n    // Happy path tests\n    it('creates order with valid input', async () => {\n      // ...\n    });\n\n    // Edge cases\n    it('handles empty cart gracefully', async () => {\n      // ...\n    });\n\n    // Error cases\n    it('throws when product not found', async () => {\n      // ...\n    });\n\n    // Regression tests\n    // Regression: #789 - orders failed when quantity was exactly 100\n    it('accepts quantity of exactly 100', async () => {\n      // ...\n    });\n  });\n});\n```\n\n## Language-Specific Patterns\n\n### Python\n\n```python\ndef calculate_shipping(order: Order, express: bool = False) -> int:\n    \"\"\"Calculate shipping cost for an order.\n\n    Uses weight-based pricing for domestic and zone-based for international.\n    Express shipping adds 50% premium.\n\n    Args:\n        order: The order to calculate shipping for.\n        express: Whether to use express shipping.\n\n    Returns:\n        Shipping cost in cents.\n\n    Raises:\n        InvalidAddressError: If shipping address is incomplete.\n\n    Example:\n        >>> cost = calculate_shipping(order, express=True)\n        >>> print(f\"Shipping: ${cost / 100}\")\n    \"\"\"\n    pass\n```\n\n### Go\n\n```go\n// CalculateShipping calculates the shipping cost for an order.\n//\n// It uses weight-based pricing for domestic orders and zone-based\n// pricing for international orders. Express shipping adds 50% premium.\n//\n// Returns an error if the shipping address is incomplete.\nfunc CalculateShipping(order *Order, express bool) (int, error) {\n    // ...\n}\n```\n"
    },
    {
      "name": "readme-templates.md",
      "path": "references/readme-templates.md",
      "content": "# README Templates\n\nTemplates for different project types and contexts.\n\n## README Principles\n\n1. **Answer the first question first**: What is this?\n2. **Get users running quickly**: Quick start in <2 minutes\n3. **Don't bury the lede**: Important info at the top\n4. **Link, don't duplicate**: Point to detailed docs\n5. **Keep it current**: Update with major changes\n\n## Standard README Template\n\n```markdown\n# Project Name\n\n[![Build Status](https://img.shields.io/github/actions/workflow/status/org/repo/ci.yml)](https://github.com/org/repo/actions)\n[![npm version](https://img.shields.io/npm/v/package-name)](https://www.npmjs.com/package/package-name)\n[![License](https://img.shields.io/github/license/org/repo)](LICENSE)\n\nOne-line description of what this project does and why it matters.\n\n## Features\n\n- âœ… Feature one with brief benefit\n- âœ… Feature two with brief benefit\n- âœ… Feature three with brief benefit\n\n## Quick Start\n\n```bash\nnpm install package-name\n```\n\n```javascript\nimport { thing } from 'package-name';\n\nconst result = thing.doSomething();\nconsole.log(result);\n```\n\n## Installation\n\n### Prerequisites\n\n- Node.js 18 or later\n- npm 9 or later\n\n### Install\n\n```bash\nnpm install package-name\n```\n\nOr with yarn:\n\n```bash\nyarn add package-name\n```\n\n## Usage\n\n### Basic Example\n\n```javascript\nimport { Client } from 'package-name';\n\nconst client = new Client({ apiKey: 'your-key' });\nconst data = await client.getData();\n```\n\n### Advanced Usage\n\nSee the [Usage Guide](docs/usage.md) for more examples.\n\n## Configuration\n\n| Option | Type | Default | Description |\n|--------|------|---------|-------------|\n| `apiKey` | string | - | Your API key (required) |\n| `timeout` | number | 5000 | Request timeout in ms |\n| `retries` | number | 3 | Number of retry attempts |\n\n## API Reference\n\nSee [API Documentation](docs/api.md).\n\n## Contributing\n\nWe welcome contributions! Please see [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.\n\n## License\n\n[MIT](LICENSE) Â© [Your Name]\n```\n\n## Library/Package README\n\n```markdown\n# library-name\n\nA lightweight library for doing X in JavaScript/TypeScript.\n\n## Why This Library?\n\n- ğŸš€ **Fast**: 10x faster than alternatives\n- ğŸ“¦ **Small**: Only 2KB gzipped\n- ğŸ”’ **Type-safe**: Full TypeScript support\n- ğŸ§ª **Tested**: 100% test coverage\n\n## Install\n\n```bash\nnpm install library-name\n```\n\n## Quick Start\n\n```typescript\nimport { parse, format } from 'library-name';\n\n// Parse input\nconst data = parse('input string');\n\n// Format output\nconst output = format(data, { pretty: true });\n```\n\n## API\n\n### `parse(input: string, options?: ParseOptions): Data`\n\nParses the input string into a Data object.\n\n**Parameters:**\n- `input` - The string to parse\n- `options.strict` - Enable strict mode (default: false)\n\n**Returns:** Parsed data object\n\n**Example:**\n```typescript\nconst data = parse('hello world', { strict: true });\n```\n\n### `format(data: Data, options?: FormatOptions): string`\n\nFormats data back to a string.\n\n**Parameters:**\n- `data` - The data to format\n- `options.pretty` - Pretty print output (default: false)\n\n**Returns:** Formatted string\n\n## TypeScript\n\nFull TypeScript definitions are included:\n\n```typescript\nimport type { Data, ParseOptions, FormatOptions } from 'library-name';\n```\n\n## Browser Support\n\nWorks in all modern browsers and Node.js 16+.\n\n| Browser | Version |\n|---------|---------|\n| Chrome | 90+ |\n| Firefox | 88+ |\n| Safari | 14+ |\n| Edge | 90+ |\n\n## Benchmarks\n\n```\nlibrary-name    x 1,234,567 ops/sec\nalternative-1   x   123,456 ops/sec\nalternative-2   x    12,345 ops/sec\n```\n\n## Related\n\n- [similar-library](https://github.com/...) - Another approach\n- [related-tool](https://github.com/...) - Complementary tool\n\n## License\n\nMIT\n```\n\n## API/Backend Service README\n\n```markdown\n# Service Name API\n\nREST API for managing [resources].\n\n## Overview\n\nThis service provides:\n- User authentication and authorization\n- Resource CRUD operations\n- Webhook notifications\n- Rate-limited API access\n\n## Quick Start\n\n### Development Setup\n\n```bash\n# Install dependencies\nnpm install\n\n# Configure environment\ncp .env.example .env\n\n# Start development (auto-detects project type)\n./scripts/dev.sh\n```\n\nOr manually:\n\n```bash\n# Start infrastructure\ndocker-compose up -d db redis\n\n# Run migrations\nnpm run db:migrate\n\n# Start server\nnpm run dev\n```\n\nAPI available at http://localhost:3000\n\n## API Endpoints\n\n| Method | Endpoint | Description |\n|--------|----------|-------------|\n| POST | /auth/login | Authenticate user |\n| GET | /users | List users |\n| POST | /users | Create user |\n| GET | /users/:id | Get user by ID |\n| PUT | /users/:id | Update user |\n| DELETE | /users/:id | Delete user |\n\nFull API documentation: http://localhost:3000/api/docs\n\n## Authentication\n\nAll API requests require a Bearer token:\n\n```bash\ncurl -H \"Authorization: Bearer <token>\" \\\n  https://api.example.com/users\n```\n\nObtain a token via the `/auth/login` endpoint.\n\n## Environment Variables\n\n| Variable | Required | Default | Description |\n|----------|----------|---------|-------------|\n| DATABASE_URL | Yes | - | PostgreSQL connection string |\n| JWT_SECRET | Yes | - | Secret for JWT signing |\n| PORT | No | 3000 | Server port |\n| LOG_LEVEL | No | info | Logging level |\n\n## Development\n\n```bash\n# Run tests\nnpm test\n\n# Run with hot reload\nnpm run dev\n\n# Check types\nnpm run type-check\n\n# Lint\nnpm run lint\n```\n\n## Deployment\n\nSee [Deployment Guide](docs/deployment.md).\n\n### Docker\n\n```bash\ndocker build -t service-name .\ndocker run -p 3000:3000 service-name\n```\n\n## Monitoring\n\n- Health check: GET /health\n- Metrics: GET /metrics (Prometheus format)\n- API docs: GET /api/docs\n\n## License\n\nProprietary - Â© Company Name\n```\n\n## CLI Tool README\n\n```markdown\n# cli-tool\n\nA command-line tool for doing X.\n\n## Installation\n\n### npm (recommended)\n\n```bash\nnpm install -g cli-tool\n```\n\n### Homebrew (macOS)\n\n```bash\nbrew install cli-tool\n```\n\n### Binary\n\nDownload from [Releases](https://github.com/org/cli-tool/releases).\n\n## Usage\n\n```bash\ncli-tool <command> [options]\n```\n\n### Commands\n\n#### `init`\n\nInitialize a new project:\n\n```bash\ncli-tool init my-project\ncli-tool init my-project --template typescript\n```\n\nOptions:\n- `--template, -t` - Project template (default: \"basic\")\n- `--force, -f` - Overwrite existing files\n\n#### `build`\n\nBuild the project:\n\n```bash\ncli-tool build\ncli-tool build --output dist\ncli-tool build --watch\n```\n\nOptions:\n- `--output, -o` - Output directory\n- `--watch, -w` - Watch for changes\n- `--minify` - Minify output\n\n#### `deploy`\n\nDeploy to production:\n\n```bash\ncli-tool deploy\ncli-tool deploy --env staging\n```\n\nOptions:\n- `--env, -e` - Target environment\n- `--dry-run` - Preview without deploying\n\n### Global Options\n\n- `--help, -h` - Show help\n- `--version, -v` - Show version\n- `--verbose` - Verbose output\n- `--config, -c` - Path to config file\n\n## Configuration\n\nCreate `cli-tool.config.js`:\n\n```javascript\nmodule.exports = {\n  build: {\n    output: 'dist',\n    minify: true,\n  },\n  deploy: {\n    provider: 'aws',\n    region: 'us-east-1',\n  },\n};\n```\n\nOr use `cli-tool.config.json`:\n\n```json\n{\n  \"build\": {\n    \"output\": \"dist\",\n    \"minify\": true\n  }\n}\n```\n\n## Examples\n\n### Basic workflow\n\n```bash\n# Create new project\ncli-tool init my-app\n\n# Navigate to project\ncd my-app\n\n# Build\ncli-tool build\n\n# Deploy\ncli-tool deploy\n```\n\n### CI/CD integration\n\n```yaml\n# .github/workflows/deploy.yml\n- name: Build and Deploy\n  run: |\n    npm install -g cli-tool\n    cli-tool build --minify\n    cli-tool deploy --env production\n```\n\n## Troubleshooting\n\n### Common Issues\n\n**Error: EACCES permission denied**\n\nFix npm permissions:\n```bash\nsudo chown -R $(whoami) ~/.npm\n```\n\n**Error: Config file not found**\n\nEnsure you're in a project directory or specify config:\n```bash\ncli-tool build --config /path/to/config.js\n```\n\n## License\n\nMIT\n```\n\n## Monorepo README\n\n```markdown\n# Project Name\n\nMonorepo for the Project Name ecosystem.\n\n## Packages\n\n| Package | Description | Version |\n|---------|-------------|---------|\n| [@project/core](packages/core) | Core library | [![npm](https://img.shields.io/npm/v/@project/core)](https://www.npmjs.com/package/@project/core) |\n| [@project/cli](packages/cli) | CLI tool | [![npm](https://img.shields.io/npm/v/@project/cli)](https://www.npmjs.com/package/@project/cli) |\n| [@project/react](packages/react) | React bindings | [![npm](https://img.shields.io/npm/v/@project/react)](https://www.npmjs.com/package/@project/react) |\n\n## Apps\n\n| App | Description |\n|-----|-------------|\n| [web](apps/web) | Main web application |\n| [docs](apps/docs) | Documentation site |\n| [admin](apps/admin) | Admin dashboard |\n\n## Getting Started\n\n### Prerequisites\n\n- Node.js 18+\n- pnpm 8+\n\n### Setup\n\n```bash\n# Clone repository\ngit clone https://github.com/org/project.git\ncd project\n\n# Install dependencies\npnpm install\n\n# Build all packages\npnpm build\n\n# Start development\npnpm dev\n```\n\n### Working with Packages\n\n```bash\n# Run command in specific package\npnpm --filter @project/core build\n\n# Run command in all packages\npnpm -r build\n\n# Add dependency to package\npnpm --filter @project/core add lodash\n```\n\n## Development\n\n### Commands\n\n| Command | Description |\n|---------|-------------|\n| `pnpm dev` | Start all apps in dev mode |\n| `pnpm build` | Build all packages and apps |\n| `pnpm test` | Run all tests |\n| `pnpm lint` | Lint all packages |\n| `pnpm clean` | Clean all build outputs |\n\n### Creating a New Package\n\n```bash\npnpm create-package my-package\n```\n\n## Architecture\n\n```\nproject/\nâ”œâ”€â”€ apps/\nâ”‚   â”œâ”€â”€ web/          # Next.js web app\nâ”‚   â”œâ”€â”€ docs/         # Documentation site\nâ”‚   â””â”€â”€ admin/        # Admin dashboard\nâ”œâ”€â”€ packages/\nâ”‚   â”œâ”€â”€ core/         # Core library\nâ”‚   â”œâ”€â”€ cli/          # CLI tool\nâ”‚   â”œâ”€â”€ react/        # React bindings\nâ”‚   â”œâ”€â”€ config/       # Shared configs\nâ”‚   â””â”€â”€ tsconfig/     # Shared TypeScript configs\nâ”œâ”€â”€ package.json\nâ”œâ”€â”€ pnpm-workspace.yaml\nâ””â”€â”€ turbo.json\n```\n\n## Contributing\n\nSee [CONTRIBUTING.md](CONTRIBUTING.md).\n\n## License\n\nMIT\n```\n\n## Minimal README\n\nFor small projects or internal tools:\n\n```markdown\n# tool-name\n\nBrief description.\n\n## Install\n\n```bash\nnpm install\n```\n\n## Usage\n\n```bash\nnpm start\n```\n\n## Configuration\n\nCopy `.env.example` to `.env` and configure.\n\n## License\n\nMIT\n```\n"
    },
    {
      "name": "runbook-templates.md",
      "path": "references/runbook-templates.md",
      "content": "# Runbook Templates\n\nTemplates for operational documentation and incident response.\n\n## Runbook Principles\n\n1. **Actionable**: Clear steps that can be followed under pressure\n2. **Tested**: Procedures have been verified to work\n3. **Current**: Updated after every incident\n4. **Accessible**: Easy to find when needed\n\n## Standard Runbook Template\n\n```markdown\n# Runbook: [Issue Title]\n\n**Last Updated:** YYYY-MM-DD\n**Owner:** [Team/Person]\n**Related Services:** [Service names]\n\n## Overview\n\n[One paragraph describing the issue and its impact on users/business]\n\n## Detection\n\n### Symptoms\n\n- [What users/operators will see]\n- [Error messages]\n- [Abnormal metrics]\n\n### Alerts\n\n| Alert Name | Severity | Threshold |\n|------------|----------|-----------|\n| [Alert 1] | P1 | [Condition] |\n| [Alert 2] | P2 | [Condition] |\n\n### Dashboards\n\n- [Link to primary dashboard]\n- [Link to related dashboards]\n\n## Impact Assessment\n\n**User Impact:**\n- [How users are affected]\n\n**Business Impact:**\n- [Revenue, reputation, etc.]\n\n**Severity Guide:**\n- P1: Full outage, all users affected\n- P2: Partial outage, significant users affected\n- P3: Degraded performance, some users affected\n- P4: Minor issue, few users affected\n\n## Quick Diagnosis\n\n### Step 1: Verify the issue\n\n```bash\n# Check service health\ncurl -s https://api.example.com/health | jq .\n\n# Check error rate\ncurl -s \"https://prometheus/api/v1/query?query=rate(http_errors_total[5m])\"\n```\n\nExpected healthy response:\n```json\n{\"status\": \"healthy\", \"version\": \"1.2.3\"}\n```\n\n### Step 2: Check recent changes\n\n```bash\n# Recent deployments\nkubectl rollout history deployment/api-service\n\n# Recent config changes\ngit log --oneline -10 config/\n```\n\n### Step 3: Check dependencies\n\n```bash\n# Database connectivity\npsql $DATABASE_URL -c \"SELECT 1\"\n\n# Redis connectivity  \nredis-cli -u $REDIS_URL ping\n\n# External API health\ncurl -s https://api.stripe.com/health\n```\n\n## Resolution Steps\n\n### Scenario A: [Most common cause]\n\n**Diagnosis:** [How to confirm this is the issue]\n\n```bash\n# Commands to diagnose\n```\n\n**Resolution:**\n\n1. [First action]\n   ```bash\n   [Command]\n   ```\n   Expected output: [What you should see]\n\n2. [Second action]\n   ```bash\n   [Command]\n   ```\n\n3. Verify fix:\n   ```bash\n   curl -s https://api.example.com/health\n   ```\n\n### Scenario B: [Second most common cause]\n\n**Diagnosis:** [How to confirm]\n\n**Resolution:**\n1. [Steps...]\n\n### Scenario C: [Third cause]\n\n[Continue pattern...]\n\n## Escalation\n\nIf the above steps don't resolve within [X minutes]:\n\n1. **First escalation:** [Team/Person]\n   - Slack: #[channel]\n   - PagerDuty: [service]\n\n2. **Second escalation:** [Team/Person]\n   - Phone: [number]\n\n3. **Executive escalation:** [For P1 lasting >1 hour]\n   - [Contact info]\n\n## Rollback Procedures\n\n### Application Rollback\n\n```bash\n# Rollback to previous version\nkubectl rollout undo deployment/api-service\n\n# Verify rollback\nkubectl rollout status deployment/api-service\n```\n\n### Database Rollback\n\n```bash\n# Restore from backup (CAUTION: data loss)\n./scripts/restore-db.sh --backup-id [ID]\n```\n\n### Feature Flag Disable\n\n```bash\n# Disable problematic feature\ncurl -X POST https://features.internal/api/flags/new-checkout/disable\n```\n\n## Post-Incident\n\n- [ ] Create incident ticket: [Link to template]\n- [ ] Update this runbook if procedures changed\n- [ ] Schedule post-mortem if P1/P2\n- [ ] Notify stakeholders of resolution\n\n## Related Documentation\n\n- [Architecture Overview](../architecture/overview.md)\n- [Service Dependencies](../architecture/dependencies.md)\n- [Related Runbook](./related-issue.md)\n\n## Revision History\n\n| Date | Author | Changes |\n|------|--------|---------|\n| 2024-01-15 | @alice | Initial version |\n| 2024-02-01 | @bob | Added Scenario C |\n```\n\n## Service-Specific Runbooks\n\n### Database Issues\n\n```markdown\n# Runbook: Database Connection Exhaustion\n\n## Overview\n\nPostgreSQL connection pool is exhausted, causing requests to fail with connection timeout errors.\n\n## Symptoms\n\n- API returns 500 errors with \"connection timeout\"\n- Logs show: `FATAL: too many connections for role \"app\"`\n- Metric `pg_connections_active` approaching `pg_connections_max`\n\n## Quick Diagnosis\n\n```bash\n# Check active connections\npsql -c \"SELECT count(*) FROM pg_stat_activity WHERE state = 'active';\"\n\n# Check connection sources\npsql -c \"SELECT application_name, count(*) \n         FROM pg_stat_activity \n         GROUP BY application_name \n         ORDER BY count DESC;\"\n\n# Check for long-running queries\npsql -c \"SELECT pid, now() - pg_stat_activity.query_start AS duration, query\n         FROM pg_stat_activity\n         WHERE state = 'active' AND now() - pg_stat_activity.query_start > interval '5 minutes';\"\n```\n\n## Resolution\n\n### Immediate: Kill idle connections\n\n```bash\n# Kill idle connections older than 10 minutes\npsql -c \"SELECT pg_terminate_backend(pid) \n         FROM pg_stat_activity \n         WHERE state = 'idle' \n         AND query_start < now() - interval '10 minutes';\"\n```\n\n### Immediate: Restart problematic service\n\n```bash\n# Identify service with most connections\n# Then restart it\nkubectl rollout restart deployment/[service-name]\n```\n\n### Long-term: Increase connection limit\n\n```bash\n# Update RDS parameter group\naws rds modify-db-parameter-group \\\n  --db-parameter-group-name production \\\n  --parameters \"ParameterName=max_connections,ParameterValue=500\"\n```\n\n## Prevention\n\n- Ensure all services use connection pooling\n- Set appropriate pool sizes (connections = cores * 2 + disk spindles)\n- Monitor connection metrics, alert at 80% capacity\n```\n\n### High Memory Usage\n\n```markdown\n# Runbook: Service High Memory Usage\n\n## Overview\n\nService memory usage is approaching limits, risking OOM kills.\n\n## Symptoms\n\n- Kubernetes events show OOMKilled\n- Memory metric approaching container limit\n- Response times increasing (GC pressure)\n\n## Quick Diagnosis\n\n```bash\n# Check memory usage\nkubectl top pods -l app=api-service\n\n# Check for OOM events\nkubectl get events --field-selector reason=OOMKilled\n\n# Check memory profile (if enabled)\ncurl -s http://localhost:6060/debug/pprof/heap > heap.prof\ngo tool pprof heap.prof\n```\n\n## Resolution\n\n### Immediate: Restart pod\n\n```bash\nkubectl delete pod [pod-name]\n```\n\n### Immediate: Scale horizontally\n\n```bash\nkubectl scale deployment/api-service --replicas=5\n```\n\n### Investigation: Memory leak\n\n```bash\n# Enable memory profiling\nkubectl set env deployment/api-service ENABLE_PPROF=true\n\n# Wait for memory to grow, then capture\nkubectl exec [pod] -- curl -s http://localhost:6060/debug/pprof/heap > heap.prof\n\n# Analyze\ngo tool pprof -http=:8080 heap.prof\n```\n\n### Long-term: Increase limits\n\nUpdate deployment:\n```yaml\nresources:\n  limits:\n    memory: \"2Gi\"  # Was 1Gi\n```\n```\n\n## Incident Response Checklist\n\n```markdown\n# Incident Response Checklist\n\n## Initial Response (First 5 minutes)\n\n- [ ] Acknowledge alert in PagerDuty\n- [ ] Join incident Slack channel: #incident-[date]\n- [ ] Announce: \"I'm investigating [alert name]\"\n- [ ] Open relevant dashboards\n\n## Assessment (5-15 minutes)\n\n- [ ] Determine severity (P1/P2/P3/P4)\n- [ ] Identify affected services\n- [ ] Estimate user impact\n- [ ] Update Slack with initial assessment\n\n## Communication\n\n### Internal (via Slack #incidents)\n\nTemplate:\n```\nğŸš¨ [P1/P2] [Brief description]\nImpact: [User-facing impact]\nStatus: [Investigating/Identified/Monitoring/Resolved]\nETA: [If known]\nUpdates: Every [15/30] minutes\n```\n\n### External (via status page)\n\n- [ ] Update status page if user-facing\n- [ ] Notify support team\n- [ ] Prepare customer communication if needed\n\n## Resolution\n\n- [ ] Implement fix\n- [ ] Verify fix in production\n- [ ] Monitor for recurrence (30 min)\n- [ ] Update status page: Resolved\n\n## Post-Incident\n\n- [ ] Write incident summary\n- [ ] Schedule post-mortem (P1/P2)\n- [ ] Update runbooks\n- [ ] Create follow-up tickets\n- [ ] Close incident channel\n```\n\n## Post-Mortem Template\n\n```markdown\n# Post-Mortem: [Incident Title]\n\n**Date:** YYYY-MM-DD\n**Duration:** HH:MM\n**Severity:** P1/P2\n**Author:** [Name]\n\n## Summary\n\n[2-3 sentence summary of what happened]\n\n## Impact\n\n- **Duration:** X hours Y minutes\n- **Users affected:** N users / N% of traffic\n- **Revenue impact:** $X (if applicable)\n- **Data loss:** None / Describe\n\n## Timeline\n\nAll times in UTC.\n\n| Time | Event |\n|------|-------|\n| 14:00 | Deployment of version 1.2.3 |\n| 14:05 | Error rate starts increasing |\n| 14:10 | Alert fires, on-call paged |\n| 14:15 | On-call acknowledges, begins investigation |\n| 14:25 | Root cause identified |\n| 14:30 | Rollback initiated |\n| 14:35 | Rollback complete, error rate normal |\n| 15:00 | Monitoring confirms resolution |\n\n## Root Cause\n\n[Detailed explanation of what caused the incident]\n\n## Detection\n\n**How was the incident detected?**\n- [Alert / Customer report / Internal discovery]\n\n**Detection time:** X minutes from start to detection\n\n**Could we have detected it faster?**\n- [Yes/No, and how]\n\n## Resolution\n\n**What fixed the issue?**\n- [Specific actions taken]\n\n**Resolution time:** X minutes from detection to resolution\n\n## Lessons Learned\n\n### What went well\n\n- [Thing 1]\n- [Thing 2]\n\n### What went poorly\n\n- [Thing 1]\n- [Thing 2]\n\n### Where we got lucky\n\n- [Thing 1]\n\n## Action Items\n\n| Priority | Action | Owner | Due Date | Status |\n|----------|--------|-------|----------|--------|\n| P0 | [Immediate fix] | @alice | YYYY-MM-DD | Done |\n| P1 | [Prevent recurrence] | @bob | YYYY-MM-DD | In Progress |\n| P2 | [Improve detection] | @carol | YYYY-MM-DD | Todo |\n\n## References\n\n- [Incident Slack channel](link)\n- [Related PRs](link)\n- [Monitoring dashboards](link)\n```\n"
    },
    {
      "name": "writing-guidelines.md",
      "path": "references/writing-guidelines.md",
      "content": "# Writing Guidelines\n\nBest practices for clear, effective technical writing.\n\n## Core Principles\n\n### 1. Know Your Audience\n\n| Audience | Assume They Know | Don't Assume They Know |\n|----------|------------------|------------------------|\n| **New developers** | Programming basics | Your codebase, domain |\n| **Experienced devs** | General best practices | Your specific implementation |\n| **End users** | How to use software | Technical details |\n| **Operators** | Infrastructure basics | Your service internals |\n\n### 2. Front-Load Important Information\n\n```markdown\nâŒ BAD: Buries the lede\nAfter you've installed the dependencies and configured your environment \nvariables, you can run the migration script by executing `npm run migrate`, \nwhich will set up your database tables.\n\nâœ… GOOD: Important information first\nRun `npm run migrate` to set up database tables.\n\nPrerequisites:\n- Install dependencies: `npm install`\n- Configure environment: Copy `.env.example` to `.env`\n```\n\n### 3. Be Concise\n\n| Verbose | Concise |\n|---------|---------|\n| In order to | To |\n| At this point in time | Now |\n| Due to the fact that | Because |\n| In the event that | If |\n| It is necessary to | Must / Need to |\n| Prior to | Before |\n| Is able to | Can |\n| Make use of | Use |\n\n```markdown\nâŒ VERBOSE:\nIn order to make use of the authentication functionality, it is necessary \nfor you to first generate an API key prior to making any requests.\n\nâœ… CONCISE:\nGenerate an API key before making requests.\n```\n\n### 4. Use Active Voice\n\n```markdown\nâŒ PASSIVE:\nThe configuration file should be created by the user.\nThe request will be processed by the server.\nErrors are logged by the system.\n\nâœ… ACTIVE:\nCreate a configuration file.\nThe server processes the request.\nThe system logs errors.\n```\n\n### 5. Use Simple Words\n\n| Complex | Simple |\n|---------|--------|\n| Utilize | Use |\n| Facilitate | Help / Enable |\n| Leverage | Use |\n| Implement | Build / Add |\n| Terminate | End / Stop |\n| Initialize | Start / Set up |\n| Functionality | Feature |\n| Methodology | Method |\n\n## Structure Guidelines\n\n### Use Headings Effectively\n\n```markdown\n# Document Title (H1 - one per document)\n\n## Major Section (H2)\n\n### Subsection (H3)\n\n#### Detail (H4 - use sparingly)\n```\n\n### Use Lists Appropriately\n\n**Use bullets for:**\n- Unordered items\n- Features\n- Requirements\n\n**Use numbers for:**\n1. Sequential steps\n2. Ranked items\n3. Procedures\n\n**Avoid:**\n- Single-item lists\n- Deeply nested lists (>2 levels)\n- Mixing bullets and numbers unnecessarily\n\n### Use Tables for Comparisons\n\n```markdown\n| Feature | Free | Pro | Enterprise |\n|---------|------|-----|------------|\n| Users | 5 | 50 | Unlimited |\n| Storage | 1GB | 10GB | 100GB |\n| Support | Community | Email | 24/7 Phone |\n```\n\n### Use Code Blocks\n\n````markdown\nInline code for `short references` like variable names.\n\nCode blocks for longer examples:\n\n```javascript\nconst result = await api.getData();\nconsole.log(result);\n```\n````\n\n## Formatting Guidelines\n\n### Emphasis\n\n```markdown\nUse **bold** for:\n- UI elements: Click **Save**\n- Important warnings: **Do not delete**\n- Key terms on first use\n\nUse *italics* for:\n- Introducing terms: An *API* is...\n- Titles: See *Getting Started*\n- Emphasis in prose: This is *very* important\n\nUse `code` for:\n- Commands: Run `npm install`\n- File names: Edit `config.json`\n- Variable names: Set `API_KEY`\n- Code references: The `User` class\n```\n\n### Callouts\n\n```markdown\n> **Note:** Additional information that's helpful but not critical.\n\n> **Warning:** Information about potential problems.\n\n> **Tip:** Helpful suggestions for better usage.\n\n> **Important:** Critical information that affects functionality.\n```\n\n### Links\n\n```markdown\nGood: See the [API documentation](./api.md) for details.\n\nAvoid: Click [here](./api.md) for API documentation.\nAvoid: See the API documentation at https://example.com/docs/api/v1/reference/endpoints/users.md\n```\n\n## Writing Procedures\n\n### Step-by-Step Instructions\n\n```markdown\n## Install the Application\n\n1. Download the installer:\n   ```bash\n   curl -O https://example.com/install.sh\n   ```\n\n2. Make it executable:\n   ```bash\n   chmod +x install.sh\n   ```\n\n3. Run the installer:\n   ```bash\n   ./install.sh\n   ```\n   \n   You should see: `Installation complete!`\n\n4. Verify the installation:\n   ```bash\n   myapp --version\n   ```\n```\n\n### Prerequisites\n\n```markdown\n## Prerequisites\n\nBefore you begin, ensure you have:\n\n- [ ] Node.js 18 or later ([download](https://nodejs.org/))\n- [ ] npm 9 or later (included with Node.js)\n- [ ] A GitHub account\n- [ ] Git installed and configured\n```\n\n## Common Patterns\n\n### Defining Terms\n\n```markdown\nAn *API key* is a unique identifier used to authenticate requests.\n\n**OAuth** (Open Authorization) is a protocol for token-based authentication.\n```\n\n### Providing Examples\n\n```markdown\nFor example, to fetch a user:\n\n```javascript\nconst user = await api.users.get('usr_123');\n```\n\nThis returns:\n\n```json\n{\n  \"id\": \"usr_123\",\n  \"name\": \"Alice\"\n}\n```\n```\n\n### Explaining Options\n\n```markdown\nThe `timeout` option controls how long to wait:\n\n| Value | Behavior |\n|-------|----------|\n| `0` | No timeout (wait forever) |\n| `> 0` | Wait N milliseconds |\n| Not set | Default: 5000ms |\n\nExample:\n```javascript\nconst client = new Client({ timeout: 10000 });\n```\n```\n\n### Warning About Dangers\n\n```markdown\n> **âš ï¸ Warning:** This action cannot be undone. All data will be permanently deleted.\n\n> **ğŸ”’ Security:** Never commit API keys to version control.\n```\n\n## Editing Checklist\n\nBefore publishing, verify:\n\n### Accuracy\n- [ ] Code examples work (test them!)\n- [ ] Commands are correct\n- [ ] Links are not broken\n- [ ] Version numbers are current\n\n### Clarity\n- [ ] Jargon is explained or avoided\n- [ ] Sentences are under 25 words\n- [ ] One idea per paragraph\n- [ ] Steps are in correct order\n\n### Completeness\n- [ ] All prerequisites listed\n- [ ] Error cases covered\n- [ ] Next steps provided\n\n### Formatting\n- [ ] Consistent heading levels\n- [ ] Code is syntax-highlighted\n- [ ] Tables are aligned\n- [ ] No orphaned headings\n\n### Style\n- [ ] Active voice used\n- [ ] Concise language\n- [ ] Consistent terminology\n- [ ] No spelling errors\n\n## Common Mistakes\n\n### Assuming Knowledge\n\n```markdown\nâŒ BAD:\nConfigure the webhook endpoint.\n\nâœ… GOOD:\nConfigure the webhook endpoint:\n1. Go to Settings > Webhooks\n2. Click \"Add Webhook\"\n3. Enter your endpoint URL\n4. Select events to receive\n5. Click \"Save\"\n```\n\n### Missing Context\n\n```markdown\nâŒ BAD:\nRun `npm run build`.\n\nâœ… GOOD:\nFrom the project root directory, run:\n```bash\nnpm run build\n```\n```\n\n### Unclear Pronouns\n\n```markdown\nâŒ BAD:\nAfter the user submits the form, it validates the data and then it shows a message.\n\nâœ… GOOD:\nAfter the user submits the form, the server validates the data and displays a confirmation message.\n```\n\n### Wall of Text\n\n```markdown\nâŒ BAD:\nThe authentication system uses JWT tokens that are issued when a user logs in with valid credentials. These tokens contain encoded claims about the user's identity and permissions and must be included in the Authorization header of subsequent requests. Tokens expire after 24 hours at which point the user must log in again or use a refresh token to obtain a new access token.\n\nâœ… GOOD:\nThe authentication system uses JWT tokens.\n\n**How it works:**\n1. User logs in with credentials\n2. Server issues a JWT token\n3. Client includes token in `Authorization` header\n4. Tokens expire after 24 hours\n\n**Token contents:**\n- User identity\n- Permissions\n- Expiration time\n```\n"
    }
  ],
  "tags": [
    "documentation",
    "core-workflow"
  ],
  "dependsOn": [
    "implement"
  ]
}