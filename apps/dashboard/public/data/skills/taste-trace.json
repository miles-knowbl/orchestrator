{
  "id": "taste-trace",
  "name": "taste-trace",
  "version": "1.0.0",
  "description": "Link taste gaps to technical failure modes. Creates traceability from subjective quality gaps to specific technical failures, enabling taste-ordered prioritization of fixes. Produces TASTE-TRACE.md with gap-to-failure-mode mappings.",
  "phase": "REVIEW",
  "category": "engineering",
  "content": "# Taste Trace\n\nLink taste gaps to technical failure modes.\n\n## When to Use\n\n- **After failure mode analysis** — Runs in REVIEW phase after failure modes identified\n- **Connecting taste to technical** — Map subjective gaps to objective failures\n- **Prioritizing fixes** — Enable taste-ordered checklist generation\n- When you say: \"trace the gaps\", \"link taste to failures\", \"what causes this gap?\"\n\n## Reference Requirements\n\n**MUST read before applying this skill:**\n\n| Reference | Why Required |\n|-----------|--------------|\n| `tracing-methodology.md` | How to link gaps to failure modes |\n| `trace-matrix-template.md` | Output format for traces |\n\n**Verification:** Every gap should have at least one traced failure mode (or explicit \"no technical cause\").\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| `TASTE-TRACE.md` | Project root | Always |\n| Updated `TASTE-GAPS.md` | Project root | Update traced_failure_modes field |\n\n## Core Concept\n\nTaste Trace answers: **\"What technical failures cause this taste gap?\"**\n\nThe connection between taste and technical:\n- **Taste gap:** \"Generated content lacks engagement\" (subjective)\n- **Technical failure:** \"Template selection logic uses only 3 templates\" (objective)\n- **Trace:** TG-001 (engagement) ← P2-007 (limited templates)\n\nThis enables:\n1. Fixing technical issues that matter most (taste impact)\n2. Understanding why technical debt affects users\n3. Prioritizing work by user-perceived impact\n\n## The Tracing Process\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                   TRACING PROCESS                           │\n│                                                             │\n│  1. LOAD INPUTS                                             │\n│     ├─→ Taste gaps from TASTE-GAPS.md                      │\n│     ├─→ Backend failure modes from PIPELINE-FAILURE-MODES.md│\n│     └─→ UI failure modes from UI-FAILURE-MODES.md          │\n│                                                             │\n│  2. FOR EACH GAP                                            │\n│     ├─→ Analyze gap evidence                               │\n│     ├─→ Identify candidate failure modes                   │\n│     ├─→ Verify causal relationship                         │\n│     └─→ Document trace with confidence                     │\n│                                                             │\n│  3. CLASSIFY TRACES                                         │\n│     ├─→ Direct cause (failure directly causes gap)         │\n│     ├─→ Contributing (failure contributes to gap)          │\n│     └─→ Correlated (related but not causal)                │\n│                                                             │\n│  4. GENERATE DELIVERABLES                                   │\n│     ├─→ TASTE-TRACE.md (full trace documentation)          │\n│     └─→ Update TASTE-GAPS.md traced_failure_modes          │\n└─────────────────────────────────────────────────────────────┘\n```\n\n## Step 1: Load Inputs\n\n**From TASTE-GAPS.md:**\n```yaml\nid: TG-001\ndimension: engagement\nscore: 2.4\nfloor: 2.5\nevidence:\n  - \"Content lacks compelling hooks\"\n  - \"Structure becomes repetitive\"\n```\n\n**From PIPELINE-FAILURE-MODES.md:**\n```yaml\nid: P2-007\npipeline: P2-Content-Generation\nlocation: L2-Processing\ntype: T4-Quality\ndescription: Template selection uses only 3 templates\n```\n\n## Step 2: Analyze and Match\n\nFor each gap, examine the evidence and find failure modes that could cause it:\n\n| Gap Evidence | Candidate Failure Modes |\n|--------------|------------------------|\n| \"Content lacks hooks\" | P2-003 (hook generation weak) |\n| \"Structure repetitive\" | P2-007 (limited templates) |\n| \"Loading unclear\" | U2-003 (missing loading state) |\n\n## Step 3: Verify Causality\n\nFor each candidate, determine relationship:\n\n### Direct Cause\nThe failure mode directly produces the gap symptom.\n\n**Test:** If we fix this failure mode, does the gap improve?\n\n```\nP2-007 (3 templates) → TG-001 (repetitive content)\nRelationship: DIRECT\nConfidence: HIGH\n```\n\n### Contributing Cause\nThe failure mode contributes to but doesn't fully explain the gap.\n\n**Test:** Fixing this helps but doesn't fully resolve the gap.\n\n```\nP2-003 (weak hooks) → TG-001 (lacks engagement)\nRelationship: CONTRIBUTING\nConfidence: MEDIUM\n```\n\n### Correlated\nRelated symptoms but not causal.\n\n**Test:** These appear together but one doesn't cause the other.\n\n```\nP1-002 (slow ingestion) ~ TG-002 (poor responsiveness)\nRelationship: CORRELATED (both caused by infra)\n```\n\n## Step 4: Document Traces\n\n### TASTE-TRACE.md Format\n\n```markdown\n# Taste-to-Failure-Mode Trace\n\n**Project:** [name]\n**Gaps Traced:** N\n**Failure Modes Linked:** M\n\n## Trace Summary\n\n| Gap | Dimension | Direct Causes | Contributing |\n|-----|-----------|---------------|--------------|\n| TG-001 | engagement | P2-007 | P2-003 |\n| TG-002 | feedback_clarity | U2-003, U1-004 | - |\n\n## Detailed Traces\n\n### TG-001: engagement (CRITICAL)\n\n**Gap Details:**\n- Score: 2.4 (floor: 2.5)\n- Evidence: \"Content lacks hooks\", \"Structure repetitive\"\n\n**Traced Failure Modes:**\n\n| ID | Relationship | Confidence | Impact |\n|----|--------------|------------|--------|\n| P2-007 | Direct | High | Fixing would improve score +0.3 |\n| P2-003 | Contributing | Medium | Fixing would improve score +0.2 |\n\n**Trace Reasoning:**\n- P2-007: Template pool has only 3 variations, causing repetition\n- P2-003: Hook generation uses static patterns, lacks variety\n\n**Estimated Impact:** Fixing both would raise engagement to ~2.9\n\n---\n\n### TG-002: feedback_clarity (SIGNIFICANT)\n\n**Gap Details:**\n- Score: 2.8 (floor: 3.0)\n- Evidence: \"Loading unclear\", \"Change summaries missing\"\n\n**Traced Failure Modes:**\n\n| ID | Relationship | Confidence | Impact |\n|----|--------------|------------|--------|\n| U2-003 | Direct | High | Fixing would improve score +0.3 |\n| U1-004 | Direct | High | Fixing would improve score +0.2 |\n\n## Untraced Failure Modes\n\nFailure modes not linked to any taste gap:\n\n| ID | Location | Severity | Note |\n|----|----------|----------|------|\n| U1-005 | L3-Output | S1-Silent | Technical issue, no taste impact |\n| P1-007 | L2-Processing | S1-Silent | Internal quality, not user-facing |\n\nThese go to Tier 3 in the final checklist.\n```\n\n## Trace Confidence Levels\n\n| Level | Meaning | When to Use |\n|-------|---------|-------------|\n| High | Clear causal link | Code path shows direct relationship |\n| Medium | Likely causal | Evidence suggests but not certain |\n| Low | Possible link | Hypothesized based on patterns |\n\n## Impact Estimation\n\nEstimate how much fixing a failure mode improves the gap:\n\n```\nCurrent score: 2.4\nFloor: 2.5\nGap delta: -0.1\n\nFailure mode P2-007 estimated impact: +0.3\nIf fixed, projected score: 2.7 (above floor)\n```\n\n## No Technical Cause\n\nSome gaps may have no technical failure mode:\n\n```markdown\n### TG-003: brand_voice (SIGNIFICANT)\n\n**Gap Details:**\n- Score: 2.6 (floor: 3.0)\n- Evidence: \"Tone doesn't match brand guidelines\"\n\n**Traced Failure Modes:** None\n\n**Note:** This is a content/prompt issue, not a technical failure.\nThe system works correctly but produces off-brand content.\n\n**Resolution:** Update prompts/examples, not code.\n```\n\n## Validation\n\nBefore completing, verify:\n\n- [ ] Every gap has been analyzed\n- [ ] Each trace has relationship type (direct/contributing/correlated)\n- [ ] Each trace has confidence level\n- [ ] Impact estimates are provided\n- [ ] TASTE-GAPS.md is updated with traced_failure_modes\n- [ ] Untraced failure modes are documented",
  "references": [
    {
      "name": "trace-matrix-template.md",
      "path": "references/trace-matrix-template.md",
      "content": "# Trace Matrix Template\n\nOutput format for taste-to-failure-mode traces.\n\n## Summary Matrix\n\n```markdown\n## Trace Summary\n\n| Gap ID | Dimension | Score | Direct Causes | Contributing | Untraced |\n|--------|-----------|-------|---------------|--------------|----------|\n| TG-001 | engagement | 2.4 | P2-007 | P2-003 | - |\n| TG-002 | feedback_clarity | 2.8 | U2-003, U1-004 | - | - |\n| TG-003 | brand_voice | 2.6 | - | - | No tech cause |\n```\n\n## Detailed Trace Entry\n\n```markdown\n### TG-001: engagement (CRITICAL)\n\n**Gap Details:**\n| Attribute | Value |\n|-----------|-------|\n| Category | content |\n| Dimension | engagement |\n| Score | 2.4 |\n| Floor | 2.5 |\n| Delta | -0.1 |\n\n**Evidence:**\n- Content lacks compelling hooks\n- Structure becomes repetitive after 3 generations\n- Limited variety in openings\n\n**Traced Failure Modes:**\n\n| ID | Description | Relationship | Confidence | Est. Impact |\n|----|-------------|--------------|------------|-------------|\n| P2-007 | Limited template pool (3) | Direct | High | +0.3 |\n| P2-003 | Static hook patterns | Contributing | Medium | +0.2 |\n\n**Trace Reasoning:**\n\n**P2-007 → TG-001:**\nThe template_select() function in generate.ts:142 uses a hardcoded array of 3 templates. With high generation volume, users see repetition within 4-5 outputs. Expanding the template pool would directly reduce repetition.\n\n**P2-003 → TG-001:**\nHook generation in hooks.ts:78 uses 5 static patterns. While not the primary cause of low engagement, more dynamic hooks would improve the \"lacks compelling hooks\" symptom.\n\n**Projected Impact:**\n- Current score: 2.4\n- After P2-007 fix: ~2.7\n- After both fixes: ~2.9\n- Target (floor): 2.5 ✓\n```\n\n## Reverse Trace (Failure Mode → Gaps)\n\nAlso useful for understanding failure mode priority:\n\n```markdown\n## Failure Mode Impact Summary\n\n| Failure Mode | Gaps Affected | Total Impact |\n|--------------|---------------|--------------|\n| P2-007 | TG-001 (direct) | High priority |\n| U2-003 | TG-002 (direct) | High priority |\n| P2-003 | TG-001 (contrib) | Medium priority |\n| U1-005 | None | Low priority (Tier 3) |\n```\n\n## Untraced Sections\n\n```markdown\n## Gaps Without Technical Cause\n\n| Gap ID | Dimension | Reason |\n|--------|-----------|--------|\n| TG-003 | brand_voice | Content issue, not technical |\n\n## Failure Modes Without Taste Impact\n\n| ID | Description | Note |\n|----|-------------|------|\n| U1-005 | Cache invalidation | Silent failure, internal only |\n| P1-007 | JSON validation | Data quality, not user-facing |\n\nThese go to Tier 3 in the final checklist (technical-only).\n```\n"
    },
    {
      "name": "tracing-methodology.md",
      "path": "references/tracing-methodology.md",
      "content": "# Tracing Methodology\n\nHow to link taste gaps to technical failure modes.\n\n## The Tracing Question\n\nFor each gap, ask: **\"What technical failure could cause this symptom?\"**\n\n## Evidence-Based Tracing\n\nStart with gap evidence, work backward to technical causes:\n\n```\nGap Evidence                    Technical Cause\n─────────────                   ───────────────\n\"Content repetitive\"      →     Limited template pool\n\"Loading unclear\"         →     Missing loading state\n\"Errors confusing\"        →     Generic error messages\n\"Feels slow\"              →     No optimistic updates\n```\n\n## Tracing Techniques\n\n### 1. Code Path Analysis\nTrace the code path that produces the gap symptom:\n\n```\nUser sees repetitive content\n  ← Content rendered in ArticleCard\n    ← Content returned from generate endpoint\n      ← Content produced by template_select()\n        ← template_select() uses hardcoded list of 3\n          = P2-007: Limited template selection\n```\n\n### 2. Failure Mode Scanning\nReview failure modes and check if they could cause the gap:\n\n```\nGap: TG-001 (engagement low)\n\nScan P2 failure modes:\n  P2-001: Input validation fails      → No, wouldn't affect engagement\n  P2-002: API timeout                 → No, different symptom\n  P2-003: Weak hook generation        → YES, contributes to engagement\n  P2-007: Limited templates           → YES, causes repetition\n```\n\n### 3. Symptom Matching\nMatch gap symptoms to failure mode impacts:\n\n| Symptom | Failure Mode Pattern |\n|---------|---------------------|\n| \"Repetitive\" | T4-Quality, limited variety |\n| \"Slow\" | T3-Infrastructure, performance |\n| \"Confusing\" | T5-UX, feedback issues |\n| \"Wrong\" | T1-Data or T2-Logic |\n\n## Relationship Types\n\n### Direct Cause\n**Definition:** The failure mode is the primary cause of the gap.\n\n**Test:**\n- If we fix ONLY this failure mode, does the gap significantly improve?\n- Is there a clear code path from failure to symptom?\n\n**Example:**\n```\nP2-007 (3 templates) → TG-001 (repetitive)\nDirect: Yes, limited templates directly cause repetition\n```\n\n### Contributing Cause\n**Definition:** The failure mode contributes to but doesn't fully explain the gap.\n\n**Test:**\n- Fixing this helps but doesn't resolve the gap alone\n- Multiple failure modes combine to create the gap\n\n**Example:**\n```\nP2-003 (weak hooks) → TG-001 (low engagement)\nContributing: Hooks are one factor, but templates also matter\n```\n\n### Correlated\n**Definition:** The failure mode and gap appear together but aren't causally linked.\n\n**Test:**\n- They share a common cause\n- They affect similar areas but independently\n\n**Example:**\n```\nP1-002 (slow ingestion) ~ TG-002 (responsiveness)\nCorrelated: Both related to performance, but ingestion doesn't affect UI responsiveness\n```\n\n## Confidence Assessment\n\n| Confidence | Criteria |\n|------------|----------|\n| High | Code path verified, causal mechanism clear |\n| Medium | Evidence suggests link, mechanism plausible |\n| Low | Possible connection, needs investigation |\n\n## When No Trace Exists\n\nSome gaps have no technical cause:\n\n1. **Content/Prompt Issues:** System works correctly but produces wrong content\n2. **Design Issues:** UX is technically correct but poorly designed\n3. **Requirements Issues:** Feature works as specified but spec was wrong\n\nDocument these as \"No technical cause\" with explanation.\n"
    }
  ],
  "tags": [
    "audit",
    "taste",
    "traceability",
    "failure-modes",
    "prioritization"
  ],
  "dependsOn": [
    "taste-eval",
    "failure-mode-analysis",
    "ui-failure-mode-analysis"
  ]
}