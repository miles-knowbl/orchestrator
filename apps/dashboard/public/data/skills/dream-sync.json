{
  "id": "dream-sync",
  "name": "dream-sync",
  "version": "1.0.0",
  "description": "Synchronizes dream state context for async operation. Loads and caches the current dream state hierarchy (org → system → module) for offline reference.",
  "phase": "GATHER",
  "category": "operations",
  "content": "# Dream Sync\n\nLoads the complete dream state hierarchy and caches it for async operation context.\n\n## When to Use\n\n- During async-loop GATHER phase\n- When preparing for mobile/offline operation\n- To establish \"where we're going\" context\n\n## What It Syncs\n\n### Dream State Hierarchy\n\n```\nOrganization: ~/workspaces/{org}/.claude/DREAM-STATE.md\n    └── System: {project}/.claude/DREAM-STATE.md\n            └── Modules: Listed in system dream state\n```\n\n### Key Data Extracted\n\n| Data Point | Source | Purpose |\n|------------|--------|---------|\n| Vision | Dream state header | North star reference |\n| Module checklist | Dream state modules table | Track completion |\n| Completion algebra | Dream state formula | Understand dependencies |\n| Progress percentage | Calculated from checklist | Quick status |\n\n## Workflow\n\n### Step 1: Locate Dream States\n\n```typescript\nconst dreamPaths = {\n  org: `~/workspaces/${org}/.claude/DREAM-STATE.md`,\n  system: `${project}/.claude/DREAM-STATE.md`\n};\n```\n\n### Step 2: Parse Dream States\n\nFor each dream state:\n- Extract vision statement\n- Parse module table\n- Calculate progress\n- Extract completion algebra\n\n### Step 3: Build Context Cache\n\n```json\n{\n  \"dream_context\": {\n    \"org\": {\n      \"name\": \"superorganism\",\n      \"vision\": \"...\",\n      \"systems\": [\"orchestrator\", \"...\"]\n    },\n    \"system\": {\n      \"name\": \"orchestrator\",\n      \"vision\": \"Self-improving meta-system...\",\n      \"progress\": {\n        \"complete\": 34,\n        \"total\": 34,\n        \"percentage\": 100\n      },\n      \"modules\": [\n        { \"name\": \"skill-registry\", \"status\": \"complete\" },\n        ...\n      ],\n      \"next_milestone\": null\n    }\n  }\n}\n```\n\n### Step 4: Identify Next Actions\n\nBased on dream state:\n- Which modules are incomplete?\n- Which are unblocked (no pending dependencies)?\n- What's the highest-leverage next move?\n\n## Output\n\nUpdates `memory/async-context.json`:\n\n```json\n{\n  \"dream_state\": {\n    \"synced_at\": \"ISO-timestamp\",\n    \"org_vision\": \"...\",\n    \"system_vision\": \"...\",\n    \"system_progress\": {\n      \"complete\": 34,\n      \"total\": 34,\n      \"percentage\": 100\n    },\n    \"incomplete_modules\": [],\n    \"unblocked_modules\": [],\n    \"next_milestone\": null\n  }\n}\n```\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| Async context file | `memory/async-context.json` | Always |\n\n## Error Handling\n\n| Error | Recovery |\n|-------|----------|\n| Dream state not found | Create minimal context, warn user |\n| Parse error | Report specific line, use cached version |\n| No modules found | Warn, may indicate complete system |\n\n## References\n\n- [dream-state-schema.md](references/dream-state-schema.md) — Expected dream state structure",
  "references": [
    {
      "name": "dream-state-schema.md",
      "path": "references/dream-state-schema.md",
      "content": "# Dream State Schema\n\nExpected structure of DREAM-STATE.md files.\n\n## Required Sections\n\n### Header\n\n```markdown\n# System Dream State: {name}\n\n> {brief description}\n\n**Organization:** {org name}\n**Location:** {path}\n**Roadmap:** [ROADMAP.md](../ROADMAP.md) — {summary}\n```\n\n### Vision\n\n```markdown\n## Vision\n\n{Paragraph describing the vision}\n\n**Dream State:** {One-line summary of \"done\"}\n```\n\n### Modules Table\n\n```markdown\n## Modules\n\n| Module | Path | Status | Functions | Progress |\n|--------|------|--------|-----------|----------|\n| {name} | {path} | {complete|in-progress|blocked} | {n}/{m} | {%} |\n```\n\n### Completion Algebra\n\n```markdown\n## Completion Algebra\n\n\\`\\`\\`\nSystem.done = ALL(Module.done)\n            = module1.done AND module2.done AND ...\n\nCurrent: {n}/{m} modules complete ({%}%)\nPending: {list or \"None\"}\nStatus: {summary}\n\\`\\`\\`\n```\n\n## Parsing Rules\n\n### Status Values\n\n| Value | Meaning |\n|-------|---------|\n| `complete` | All functions implemented and verified |\n| `in-progress` | Work started but not complete |\n| `blocked` | Cannot proceed due to dependency |\n| `planned` | Scoped but not started |\n\n### Progress Calculation\n\n```\nprogress = complete_modules / total_modules * 100\n```\n\n### Module Dependencies\n\nExtracted from completion algebra or explicit depends_on fields.\n\n## Example Minimal Dream State\n\n```markdown\n# System Dream State: my-app\n\n**Organization:** superorganism\n**Location:** ~/workspaces/my-app\n\n## Vision\n\nA simple app that does X.\n\n**Dream State:** Deployed and operational.\n\n## Modules\n\n| Module | Status | Progress |\n|--------|--------|----------|\n| core | complete | 100% |\n| api | in-progress | 50% |\n\n## Completion Algebra\n\nSystem.done = core.done AND api.done\n\nCurrent: 1/2 complete (50%)\n```\n"
    }
  ],
  "tags": [
    "async",
    "dream-state",
    "context",
    "synchronization"
  ],
  "dependsOn": [
    "state-loader"
  ]
}