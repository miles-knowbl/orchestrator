{
  "id": "entry-portal",
  "name": "entry-portal",
  "version": "1.0.0",
  "description": "Converts fuzzy requirements into structured FeatureSpecs and GitHub issues. Manages the system queue for a domain's journey toward its dream state. The entry point for all new systems and features entering the engineering loop.",
  "phase": "INIT",
  "category": "meta",
  "content": "# Entry Portal\n\nTransform fuzzy ideas into actionable specifications.\n\n## When to Use\n\n- **New domain** â€” Defining a dream state and initial systems\n- **New system** â€” Adding a system to an existing domain\n- **New feature** â€” Adding capability to an existing system\n- **Fuzzy input** â€” User has an idea but not a clear spec\n- When you say: \"I want to build...\", \"we need a system that...\", \"let's add...\"\n\n## Reference Requirements\n\n**MUST read before applying this skill:**\n\n| Reference | Why Required |\n|-----------|--------------|\n| `clarifying-questions.md` | Essential patterns for requirement gathering |\n| `dream-state-template.md` | Template for vision document |\n| `system-decomposition.md` | How to break large initiatives into systems |\n\n**Read if applicable:**\n\n| Reference | When Needed |\n|-----------|-------------|\n| `queue-operations.md` | When managing existing queue |\n| `github-issue-format.md` | When publishing to GitHub |\n\n**Verification:** Before proceeding, confirm you have read and can apply guidance from required references.\n\n## Required Deliverables\n\n| Deliverable | Location | Condition |\n|-------------|----------|-----------|\n| `dream-state.md` | `../{domain}/` | New domain only (sibling to loop command) |\n| `config.json` | `../{domain}/` | New domain (autonomy config) |\n| `system-queue.json` | `../{domain}/` | Always (create or update) |\n| `loop-state.json` | `../{domain}/` | Always (tracks loop state) |\n| `FEATURESPEC.md` | `../{domain}/systems/{system}/` | Per system (invokes spec skill) |\n| `ESTIMATE.md` | `../{domain}/systems/{system}/` | Per system (invokes estimation skill) |\n\n## Entry-Portal vs Spec Skill\n\nBoth skills produce FeatureSpecs, but they serve different purposes:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                    WHEN TO USE WHICH SKILL                                   â”‚\nâ”‚                                                                             â”‚\nâ”‚  ENTRY-PORTAL                           SPEC                                â”‚\nâ”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”€â”€â”€â”€                                â”‚\nâ”‚  â€¢ New domain (dream state)             â€¢ Clear requirements exist          â”‚\nâ”‚  â€¢ Multiple systems to decompose        â€¢ Single feature/system             â”‚\nâ”‚  â€¢ Fuzzy/unclear input                  â€¢ Adding to existing system         â”‚\nâ”‚  â€¢ Need clarification dialogue          â€¢ Technical refinement              â”‚\nâ”‚  â€¢ Creates GitHub issues                â€¢ Just need the spec document       â”‚\nâ”‚  â€¢ Manages system queue                 â€¢ Mid-loop spec refinement          â”‚\nâ”‚                                                                             â”‚\nâ”‚  \"I want to build a field              \"Add a notification feature          â”‚\nâ”‚   service platform...\"                  when orders are assigned\"           â”‚\nâ”‚         â†“                                       â†“                           â”‚\nâ”‚    Entry-Portal                              Spec                           â”‚\nâ”‚         â†“                                       â†“                           â”‚\nâ”‚  [Dream State]                          [FeatureSpec document]              â”‚\nâ”‚  [System Queue]                                                             â”‚\nâ”‚  [GitHub Issues]                                                            â”‚\nâ”‚  [FeatureSpecs]                                                             â”‚\nâ”‚                                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Decision Guide\n\n| Situation | Use Entry-Portal | Use Spec |\n|-----------|------------------|----------|\n| Starting greenfield project | âœ… | |\n| Breaking down large initiative | âœ… | |\n| Input is vague or incomplete | âœ… | |\n| Need to create GitHub issues | âœ… | |\n| Requirements are already clear | | âœ… |\n| Adding feature to existing system | | âœ… |\n| Refining spec during implementation | | âœ… |\n| Just need spec document, no queue | | âœ… |\n\n**Note:** Entry-portal *invokes* both the spec skill and estimation skill internally. If you use entry-portal, you don't need to separately use spec or estimation â€” the FeatureSpec and ESTIMATE.md are generated as part of the entry flow.\n\n## Core Concept\n\nEntry Portal is the **front door** to the engineering loop. It takes natural language input and produces GitHub issues with complete FeatureSpecs that the engineering loop can execute.\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                           ENTRY PORTAL                                       â”‚\nâ”‚                                                                             â”‚\nâ”‚  \"I need a system for          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      GitHub Issue #123      â”‚\nâ”‚   managing field service   â”€â”€â”€â–¶â”‚ Entry Portal â”‚â”€â”€â”€â–¶  with FeatureSpec       â”‚\nâ”‚   operations...\"               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      ready for execution    â”‚\nâ”‚                                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## The Entry Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                         ENTRY PORTAL FLOW                                    â”‚\nâ”‚                                                                             â”‚\nâ”‚  1. RECEIVE                                                                 â”‚\nâ”‚     â””â”€â†’ Accept fuzzy input (natural language description)                   â”‚\nâ”‚                                                                             â”‚\nâ”‚  2. CLARIFY                                                                 â”‚\nâ”‚     â””â”€â†’ Ask targeted questions until requirements are clear                 â”‚\nâ”‚     â””â”€â†’ Use requirements skill patterns                                     â”‚\nâ”‚                                                                             â”‚\nâ”‚  3. CLASSIFY                                                                â”‚\nâ”‚     â””â”€â†’ New domain? New system? New feature?                                â”‚\nâ”‚     â””â”€â†’ Determine scope and context                                         â”‚\nâ”‚                                                                             â”‚\nâ”‚  4. DECOMPOSE (if needed)                                                   â”‚\nâ”‚     â””â”€â†’ Break into discrete systems                                         â”‚\nâ”‚     â””â”€â†’ Identify dependencies between systems                               â”‚\nâ”‚     â””â”€â†’ Order by dependency graph                                           â”‚\nâ”‚                                                                             â”‚\nâ”‚  5. SPECIFY                                                                 â”‚\nâ”‚     â””â”€â†’ Generate FeatureSpec for each system                                â”‚\nâ”‚     â””â”€â†’ Use spec skill with 18-section template                             â”‚\nâ”‚                                                                             â”‚\nâ”‚  6. ESTIMATE                                                                â”‚\nâ”‚     â””â”€â†’ Invoke estimation skill for each system                             â”‚\nâ”‚     â””â”€â†’ Produce ESTIMATE.md with effort breakdown                           â”‚\nâ”‚     â””â”€â†’ Apply calibration adjustments if available                          â”‚\nâ”‚                                                                             â”‚\nâ”‚  7. CONFIGURE                                                               â”‚\nâ”‚     â””â”€â†’ Set or confirm autonomy mode (autonomous/supervised/hybrid)         â”‚\nâ”‚     â””â”€â†’ Configure gates (specification, architecture, security, deploy)     â”‚\nâ”‚     â””â”€â†’ Create/update config.json at domain level                           â”‚\nâ”‚     â””â”€â†’ Apply per-system overrides if needed                                â”‚\nâ”‚                                                                             â”‚\nâ”‚  8. QUEUE                                                                   â”‚\nâ”‚     â””â”€â†’ Add to domain's system queue                                        â”‚\nâ”‚     â””â”€â†’ Update queue state (JSON file)                                      â”‚\nâ”‚                                                                             â”‚\nâ”‚  9. PUBLISH                                                                 â”‚\nâ”‚     â””â”€â†’ Create GitHub issue per system                                      â”‚\nâ”‚     â””â”€â†’ Attach FeatureSpec to issue                                         â”‚\nâ”‚     â””â”€â†’ Add appropriate labels                                              â”‚\nâ”‚     â””â”€â†’ Link dependencies between issues                                    â”‚\nâ”‚                                                                             â”‚\nâ”‚  OUTPUT: GitHub issues ready for engineering loop                           â”‚\nâ”‚                                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Step 1: Receive Input\n\nAccept any form of input:\n- Natural language description\n- Rough feature list\n- Problem statement\n- Existing documentation\n- Competitor reference\n- Wireframes/mockups\n\nDocument the raw input before processing.\n\n## Step 2: Clarify Requirements\n\nUse the clarifying questions framework to fill gaps:\n\n### Question Categories (ask in order)\n\n| Category | Questions |\n|----------|-----------|\n| **Users** | Who will use this? What are their roles? Technical level? |\n| **Goals** | What are they trying to accomplish? What's the primary job-to-be-done? |\n| **Current State** | How do they do it today? What tools exist? |\n| **Pain Points** | What's broken? What's slow? What's frustrating? |\n| **Constraints** | Technology requirements? Timeline? Budget? Team size? |\n| **Integration** | What existing systems must it work with? |\n| **Scale** | How many users? How much data? Growth expectations? |\n| **Success** | How will we know it's working? What metrics matter? |\n\n### Clarification Signals\n\nStop clarifying when:\n- [ ] Users and their goals are clearly defined\n- [ ] Core functionality is enumerable\n- [ ] Constraints are documented\n- [ ] Success criteria are measurable\n- [ ] Integration points are identified\n\nâ†’ See `references/clarifying-questions.md`\n\n## Step 3: Classify Input\n\nDetermine the scope:\n\n| Classification | Characteristics | Next Step |\n|----------------|-----------------|-----------|\n| **New Domain** | No existing systems, greenfield | Define dream state, decompose into systems |\n| **New System** | Adding to existing domain | Fit into existing queue, check dependencies |\n| **New Feature** | Adding to existing system | Single FeatureSpec, add to system's backlog |\n| **Enhancement** | Improving existing feature | May not need entry portal, go direct to spec |\n\n## Step 4: Define Dream State (New Domains)\n\nFor new domains, establish the vision:\n\n```markdown\n# Dream State: [Domain Name]\n\n## Vision\n[2-3 sentences describing the end state when fully realized]\n\n## Key Capabilities\nWhen complete, the domain will:\n- [ ] [Capability 1]\n- [ ] [Capability 2]\n- [ ] [Capability 3]\n- [ ] ...\n\n## Constraints\n| Constraint | Value |\n|------------|-------|\n| Technology Stack | [e.g., Django/Elm, React/Node] |\n| Timeline | [e.g., MVP in 3 months] |\n| Budget | [e.g., $50k infrastructure] |\n| Team | [e.g., 2 engineers + 1 designer] |\n| Integration | [e.g., Must work with SAP] |\n\n## Success Metrics\n| Metric | Target | Measurement |\n|--------|--------|-------------|\n| [Metric 1] | [Target] | [How measured] |\n| [Metric 2] | [Target] | [How measured] |\n\n## Anti-Goals (What We Won't Build)\n- [Explicitly out of scope item 1]\n- [Explicitly out of scope item 2]\n```\n\nâ†’ See `references/dream-state-template.md`\n\n## Step 5: Decompose into Systems\n\nBreak the dream state into implementable systems:\n\n### System Identification\n\nAsk:\n- What are the natural boundaries? (user-facing vs backend, real-time vs batch)\n- What can be deployed independently?\n- What has different scaling requirements?\n- What has different team ownership?\n\n### Dependency Mapping\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                      SYSTEM DEPENDENCY GRAPH                                 â”‚\nâ”‚                                                                             â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                            â”‚\nâ”‚  â”‚   Auth      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚\nâ”‚  â”‚  Service    â”‚                                      â”‚                     â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                      â”‚                     â”‚\nâ”‚         â”‚                                             â”‚                     â”‚\nâ”‚         â–¼                                             â”‚                     â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚\nâ”‚  â”‚    Core     â”‚â”€â”€â”€â”€â”€â–¶â”‚   Routing   â”‚â”€â”€â”€â”€â”€â–¶â”‚   Mobile    â”‚                 â”‚\nâ”‚  â”‚   Service   â”‚      â”‚   Service   â”‚      â”‚    App      â”‚                 â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚\nâ”‚         â”‚                                                                   â”‚\nâ”‚         â–¼                                                                   â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                            â”‚\nâ”‚  â”‚  Analytics  â”‚                                                            â”‚\nâ”‚  â”‚  Dashboard  â”‚                                                            â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                            â”‚\nâ”‚                                                                             â”‚\nâ”‚  Build Order: Auth â†’ Core â†’ Routing â†’ Mobile                                â”‚\nâ”‚               Auth â†’ Core â†’ Analytics (parallel with Routing)               â”‚\nâ”‚                                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### System Definition Template\n\n```markdown\n## System: [Name]\n\n### Purpose\n[One sentence: what this system does]\n\n### Inputs\n- [What data/events it receives]\n- [From which systems/users]\n\n### Outputs\n- [What data/events it produces]\n- [To which systems/users]\n\n### Dependencies\n- [System names this depends on]\n- [External services required]\n\n### Priority\nP[1-5] where P1 is highest (build first)\n\n### Estimated Complexity\n- [ ] Small (< 1 week)\n- [ ] Medium (1-4 weeks)\n- [ ] Large (1-3 months)\n- [ ] XL (> 3 months, consider further decomposition)\n```\n\nâ†’ See `references/system-decomposition.md`\n\n## Step 6: Generate FeatureSpecs\n\nFor each system, create a complete FeatureSpec:\n\n1. **Invoke the spec skill**\n   ```\n   Read /mnt/skills/user/engineering/spec/SKILL.md\n   ```\n\n2. **Use the 18-section template**\n   ```\n   Read /mnt/skills/user/engineering/spec/references/18-section-template.md\n   ```\n\n3. **Generate spec for this system's scope**\n\n4. **Validate with senior engineer audit**\n   ```\n   Read /mnt/skills/user/engineering/spec/references/senior-engineer-audit.md\n   ```\n\n## Step 7: Configure Autonomy\n\nBefore queuing systems for execution, configure how much human oversight is needed:\n\n### Autonomy Modes\n\n| Mode | Description | Use When |\n|------|-------------|----------|\n| **Autonomous** | Run to completion, pause only on failure | Small systems, high confidence, personal projects |\n| **Supervised** | Pause at all configured gates | Large systems, enterprise, security-critical |\n| **Hybrid** | Autonomous with gates at critical points | Standard projects (default) |\n\n### Gate Configuration\n\nDecide which gates require human approval:\n\n| Gate | Stage | Recommended For |\n|------|-------|-----------------|\n| `specification` | After SPEC | Major initiatives, unclear requirements |\n| `architecture` | After SCAFFOLD | Systems with complex architecture decisions |\n| `security` | After VALIDATE | Any system handling sensitive data |\n| `deploy` | Before SHIP | Production deployments |\n\n### Domain-Level Config\n\nCreate `config.json` at domain root:\n\n```json\n{\n  \"domain\": \"velocity-tracker\",\n  \"organization\": \"superorganism\",\n\n  \"autonomy\": {\n    \"defaultMode\": \"supervised\",\n    \"failureRetries\": 3,\n\n    \"gates\": {\n      \"specification\": { \"required\": true },\n      \"architecture\": { \"required\": true },\n      \"security\": { \"required\": false },\n      \"deploy\": { \"required\": true }\n    },\n\n    \"reason\": \"Why this mode was chosen\"\n  }\n}\n```\n\n### Per-System Override\n\nIn `system-queue.json`, add autonomy overrides for specific systems:\n\n```json\n{\n  \"id\": \"sys-001\",\n  \"name\": \"Auth Service\",\n  \"autonomy\": {\n    \"mode\": \"supervised\",\n    \"gates\": {\n      \"specification\": { \"required\": true },\n      \"architecture\": { \"required\": true },\n      \"security\": { \"required\": true },\n      \"database\": { \"required\": true },\n      \"deploy\": { \"required\": true }\n    },\n    \"reason\": \"Security-critical system requires full oversight\"\n  }\n}\n```\n\n### Configuration Checklist\n\nBefore starting any system:\n\n- [ ] Autonomy mode selected (autonomous/supervised/hybrid)\n- [ ] Gates configured for risk level\n- [ ] config.json created at domain level\n- [ ] Per-system overrides added if needed\n- [ ] loop-controller/references/autonomy-configuration.md read\n\nâ†’ See `loop-controller/references/autonomy-configuration.md` for full details\n\n## Step 8: Manage System Queue\n\n### Queue Data Structure\n\nStore in `domain-memory/{domain}/system-queue.json`:\n\n```json\n{\n  \"domain\": \"azure-standard-ops\",\n  \"repository\": \"org/azure-standard\",\n  \"dreamState\": \"Fully integrated field service management platform\",\n  \"createdAt\": \"2024-01-15T10:00:00Z\",\n  \"updatedAt\": \"2024-01-16T14:30:00Z\",\n  \"systems\": [\n    {\n      \"id\": \"sys-001\",\n      \"name\": \"Auth Service\",\n      \"description\": \"Authentication and authorization\",\n      \"githubIssue\": 100,\n      \"status\": \"complete\",\n      \"dependencies\": [],\n      \"priority\": 1,\n      \"completedAt\": \"2024-01-10T16:00:00Z\"\n    },\n    {\n      \"id\": \"sys-002\",\n      \"name\": \"ServiceGrid Core\",\n      \"description\": \"Core work order management\",\n      \"githubIssue\": 123,\n      \"status\": \"in-progress\",\n      \"dependencies\": [\"sys-001\"],\n      \"priority\": 1,\n      \"startedAt\": \"2024-01-11T09:00:00Z\"\n    },\n    {\n      \"id\": \"sys-003\",\n      \"name\": \"Route Optimization\",\n      \"description\": \"Intelligent route planning\",\n      \"githubIssue\": 124,\n      \"status\": \"specified\",\n      \"dependencies\": [\"sys-002\"],\n      \"priority\": 2\n    },\n    {\n      \"id\": \"sys-004\",\n      \"name\": \"Analytics Dashboard\",\n      \"description\": \"Operational analytics and reporting\",\n      \"githubIssue\": null,\n      \"status\": \"discovered\",\n      \"dependencies\": [\"sys-002\"],\n      \"priority\": 3\n    }\n  ]\n}\n```\n\n### Queue Status Values\n\n| Status | Meaning |\n|--------|---------|\n| `discovered` | Identified but not yet specified |\n| `specified` | FeatureSpec complete, GitHub issue created |\n| `ready` | Dependencies met, can start implementation |\n| `in-progress` | Currently being built |\n| `review` | Implementation complete, in PR review |\n| `complete` | Merged and deployed |\n| `blocked` | Cannot proceed (document reason) |\n\n### Queue Operations\n\n**Add system:**\n```json\n// Append to systems array\n{\n  \"id\": \"sys-005\",\n  \"name\": \"New System\",\n  \"status\": \"discovered\",\n  \"dependencies\": [\"sys-002\"],\n  \"priority\": 4\n}\n```\n\n**Update status:**\n```json\n// Find by id, update status\n\"status\": \"in-progress\",\n\"startedAt\": \"2024-01-16T09:00:00Z\"\n```\n\n**Get next ready:**\n```javascript\n// Find first system where:\n// - status === 'specified' or 'ready'\n// - all dependencies have status === 'complete'\n// - ordered by priority (lowest number first)\n```\n\nâ†’ See `references/queue-operations.md`\n\n## Step 8: Publish to GitHub\n\n### Issue Creation\n\nUse GitHub CLI or API:\n\n```bash\n# Create issue with FeatureSpec\ngh issue create \\\n  --repo \"org/repo\" \\\n  --title \"ğŸ¯ System: ServiceGrid Core\" \\\n  --body-file FEATURESPEC.md \\\n  --label \"domain:azure-standard\" \\\n  --label \"system:servicegrid\" \\\n  --label \"status:specified\" \\\n  --label \"priority:p1\"\n```\n\n### Issue Body Template\n\n```markdown\n## ğŸ¯ System: [Name]\n\n**Domain:** [Domain name]\n**Priority:** P[1-5]\n**Dependencies:** #[issue numbers] or None\n**Estimated Complexity:** [Small/Medium/Large/XL]\n\n---\n\n### Overview\n\n[Brief 2-3 sentence description]\n\n---\n\n### FeatureSpec\n\n<details>\n<summary>Click to expand full specification</summary>\n\n[Full 18-section FeatureSpec here]\n\n</details>\n\n---\n\n### Acceptance Criteria\n\n- [ ] [Criterion 1 from spec]\n- [ ] [Criterion 2 from spec]\n- [ ] [Criterion 3 from spec]\n- [ ] All tests passing\n- [ ] Documentation complete\n- [ ] Security audit passed\n- [ ] Performance targets met\n\n---\n\n### Labels\n\n- `domain:[name]` â€” Which domain this belongs to\n- `system:[name]` â€” System identifier\n- `status:specified` â€” Ready for implementation\n- `priority:p[1-5]` â€” Build order priority\n```\n\n### Linking Dependencies\n\nAfter creating issues, link them:\n\n```bash\n# Add dependency note to issue body\ngh issue edit 124 --body \"... **Dependencies:** #123 ...\"\n\n# Or use GitHub Projects for visual dependency tracking\n```\n\nâ†’ See `references/github-issue-format.md`\n\n## Outputs\n\nEntry Portal produces:\n\n| Output | Location | Purpose |\n|--------|----------|---------|\n| Dream State | `domain-memory/{domain}/dream-state.md` | Vision document |\n| System Queue | `domain-memory/{domain}/system-queue.json` | Tracking state |\n| FeatureSpecs | GitHub issues | Implementation specs |\n| Dependency Graph | Documented in queue | Build order |\n\n## Relationship to Other Skills\n\n| Skill | Relationship |\n|-------|--------------|\n| `requirements` | Entry portal uses requirements patterns for clarification |\n| `spec` | Entry portal invokes spec to generate FeatureSpecs |\n| `engineering` (loop) | Entry portal produces inputs for the engineering loop |\n\n## Key Principles\n\n**Clarify before specifying.** Don't generate a spec from ambiguous input.\n\n**Decompose thoughtfully.** Too many small systems = coordination overhead. Too few large systems = complexity and risk.\n\n**Dependencies matter.** Build order is determined by dependencies, not preferences.\n\n**One issue, one system.** Each GitHub issue represents exactly one deployable system.\n\n**Queue is source of truth.** The JSON queue file tracks all state.\n\n## Mode-Specific Behavior\n\nEntry portal behavior differs by orchestrator mode:\n\n### Greenfield Mode\n\n| Aspect | Behavior |\n|--------|----------|\n| **Scope** | Fuzzy requirements, vision statements |\n| **Approach** | Full discovery with extensive clarification |\n| **Patterns** | Free choiceâ€”establishing new patterns |\n| **Deliverables** | Dream state + FeatureSpecs + system queue |\n| **Validation** | Vision captured, systems decomposed |\n| **Constraints** | Minimalâ€”full creative freedom |\n\n### Brownfield-Polish Mode\n\n| Aspect | Behavior |\n|--------|----------|\n| **Scope** | Existing codebase + gap analysis |\n| **Approach** | Gap discoveryâ€”codebase defines scope |\n| **Patterns** | Should match existing codebase patterns |\n| **Deliverables** | Gap list + polish queue items |\n| **Validation** | All gaps identified and categorized |\n| **Constraints** | Must not alter existing functionality |\n\n**Polish considerations:**\n- Analyze codebase before defining work items\n- Group gaps by category (deploy, UI, data, tests)\n- Queue polish items, not full systems\n- Prioritize by impact/effort ratio\n\n### Brownfield-Enterprise Mode\n\n| Aspect | Behavior |\n|--------|----------|\n| **Scope** | Change request + pattern discovery |\n| **Approach** | Surgicalâ€”single focused change |\n| **Patterns** | Must conform exactly to existing |\n| **Deliverables** | Minimal change spec only |\n| **Validation** | Patterns identified, scope minimized |\n| **Constraints** | Requires approval workflow |\n\n**Enterprise constraints:**\n- Match existing coding patterns exactly\n- Respect existing architecture decisions\n- Identify and follow approval workflows\n- Plan for multi-team coordination\n\n---\n\n## References\n\n- `references/clarifying-questions.md`: Question framework for requirements\n- `references/dream-state-template.md`: Template for domain vision\n- `references/system-decomposition.md`: Breaking down into systems\n- `references/queue-operations.md`: Managing the system queue\n- `references/github-issue-format.md`: Issue templates and labels",
  "references": [
    {
      "name": "clarifying-questions.md",
      "path": "references/clarifying-questions.md",
      "content": "# Clarifying Questions Framework\n\nSystematic question framework for harvesting requirements from fuzzy input.\n\n## The Question Funnel\n\nAsk questions in this order, moving from broad to specific:\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                        QUESTION FUNNEL                                       â”‚\nâ”‚                                                                             â”‚\nâ”‚  BROAD    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 1. USERS: Who is this for?              â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                          â”‚                                                   â”‚\nâ”‚                          â–¼                                                   â”‚\nâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 2. GOALS: What do they want to do?      â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                          â”‚                                                   â”‚\nâ”‚                          â–¼                                                   â”‚\nâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 3. CONTEXT: How do they do it now?      â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                          â”‚                                                   â”‚\nâ”‚                          â–¼                                                   â”‚\nâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 4. PROBLEMS: What's broken or hard?     â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                          â”‚                                                   â”‚\nâ”‚                          â–¼                                                   â”‚\nâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 5. CONSTRAINTS: What limits exist?      â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                          â”‚                                                   â”‚\nâ”‚                          â–¼                                                   â”‚\nâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 6. INTEGRATION: What must it work with? â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                          â”‚                                                   â”‚\nâ”‚                          â–¼                                                   â”‚\nâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 7. SCALE: How big? How many?            â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                          â”‚                                                   â”‚\nâ”‚  SPECIFIC                â–¼                                                   â”‚\nâ”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚\nâ”‚           â”‚ 8. SUCCESS: How will we know it works?  â”‚                       â”‚\nâ”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚\nâ”‚                                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Category 1: Users\n\n**Goal:** Understand who will use the system and their characteristics.\n\n### Primary Questions\n- Who are the primary users of this system?\n- What are their roles and responsibilities?\n- What is their technical skill level?\n- How frequently will they use it?\n\n### Follow-up Questions\n- Are there secondary users or stakeholders?\n- Who are the administrators?\n- Are there external users (customers, partners)?\n- What devices will they use (desktop, mobile, tablet)?\n\n### Red Flags\n- \"Everyone\" (too broad, need segmentation)\n- No clear primary user (competing priorities)\n- User needs significantly different from requester\n\n## Category 2: Goals\n\n**Goal:** Understand what users are trying to accomplish.\n\n### Primary Questions\n- What is the primary job-to-be-done?\n- What outcome are users trying to achieve?\n- Why do they want to do this?\n- What value does completing this task provide?\n\n### Follow-up Questions\n- What are secondary goals?\n- How does this fit into their larger workflow?\n- What happens after they complete this task?\n- What triggers them to start this task?\n\n### Job Story Format\n```\nWhen [situation], I want to [motivation], so I can [expected outcome].\n```\n\n## Category 3: Current State\n\n**Goal:** Understand how the problem is solved today.\n\n### Primary Questions\n- How do users accomplish this task today?\n- What tools or systems do they currently use?\n- What is the current process/workflow?\n- Who is involved in the current process?\n\n### Follow-up Questions\n- How long has the current process been in place?\n- What workarounds exist?\n- Are there any tribal knowledge or undocumented steps?\n- What data exists from the current process?\n\n### Red Flags\n- No current process (users may not actually need this)\n- Heavy investment in current tools (migration challenges)\n- Process involves many manual steps (scope risk)\n\n## Category 4: Pain Points\n\n**Goal:** Understand what's broken, slow, or frustrating.\n\n### Primary Questions\n- What's the biggest problem with the current approach?\n- What takes too long?\n- What causes errors or failures?\n- What do users complain about most?\n\n### Follow-up Questions\n- How often does this problem occur?\n- What is the impact when it happens?\n- What have you tried before to solve this?\n- Why didn't previous solutions work?\n\n### Prioritization\n| Frequency | Impact | Priority |\n|-----------|--------|----------|\n| Daily | High | P1 - Must solve |\n| Daily | Low | P2 - Should solve |\n| Weekly | High | P2 - Should solve |\n| Rare | High | P3 - Nice to solve |\n| Rare | Low | P4 - Deprioritize |\n\n## Category 5: Constraints\n\n**Goal:** Understand limitations and requirements.\n\n### Primary Questions\n- What is the timeline?\n- What is the budget (if relevant)?\n- What technology constraints exist?\n- What regulatory or compliance requirements apply?\n\n### Follow-up Questions\n- Are there performance requirements?\n- Are there security requirements?\n- Are there availability requirements (uptime)?\n- What team/resources are available?\n\n### Constraint Types\n| Type | Examples |\n|------|----------|\n| Technology | Must use Python, must run on AWS |\n| Security | SOC2 compliance, data residency |\n| Performance | <100ms response, 99.9% uptime |\n| Business | Launch before Q2, budget < $50k |\n| Team | 2 engineers, no mobile expertise |\n\n## Category 6: Integration\n\n**Goal:** Understand what the system must work with.\n\n### Primary Questions\n- What existing systems must this integrate with?\n- What data needs to flow in/out?\n- Are there authentication/SSO requirements?\n- Are there third-party APIs involved?\n\n### Follow-up Questions\n- What format is existing data in?\n- How frequently does data need to sync?\n- Who owns the integrated systems?\n- Are there API rate limits or restrictions?\n\n### Integration Complexity\n| Factor | Low | High |\n|--------|-----|------|\n| Number of integrations | 1-2 | 5+ |\n| Data format | Standard (JSON, REST) | Proprietary |\n| Ownership | Your team | External |\n| Documentation | Good | Poor/None |\n| Stability | Stable | Frequently changes |\n\n## Category 7: Scale\n\n**Goal:** Understand size and growth expectations.\n\n### Primary Questions\n- How many users initially?\n- How many users at peak?\n- How much data will be processed?\n- What growth rate is expected?\n\n### Follow-up Questions\n- Are there seasonal variations?\n- What is the data retention period?\n- Are there geographic considerations?\n- What happens if we exceed capacity?\n\n### Scale Ranges\n| Scale | Users | Data | Complexity |\n|-------|-------|------|------------|\n| Small | <100 | <1GB | Single server |\n| Medium | 100-10k | 1-100GB | Scaling needed |\n| Large | 10k-1M | 100GB-10TB | Distributed |\n| Massive | >1M | >10TB | Specialized |\n\n## Category 8: Success\n\n**Goal:** Define measurable success criteria.\n\n### Primary Questions\n- How will we know this is successful?\n- What metrics will we track?\n- What is the minimum viable success?\n- What would exceptional success look like?\n\n### Follow-up Questions\n- How will we measure these metrics?\n- What is the baseline today?\n- When do we measure (day 1, month 1, quarter 1)?\n- Who decides if it's successful?\n\n### SMART Criteria\n- **S**pecific: Clearly defined metric\n- **M**easurable: Quantifiable\n- **A**chievable: Realistic target\n- **R**elevant: Matters to the business\n- **T**ime-bound: Deadline for achievement\n\n### Example Success Metrics\n| Category | Metric | Target |\n|----------|--------|--------|\n| Efficiency | Time to complete task | -50% |\n| Quality | Error rate | <1% |\n| Adoption | Daily active users | 80% of team |\n| Satisfaction | NPS score | >50 |\n| Business | Revenue impact | +$100k/month |\n\n## When to Stop Clarifying\n\nProceed to specification when:\n\n- [ ] **Users defined**: Primary and secondary users identified\n- [ ] **Goals clear**: Job-to-be-done articulated\n- [ ] **Scope bounded**: What's in and out of scope is clear\n- [ ] **Constraints documented**: Technology, timeline, budget known\n- [ ] **Integrations mapped**: External dependencies identified\n- [ ] **Scale estimated**: Initial and growth numbers known\n- [ ] **Success defined**: Measurable criteria established\n\n## Question Anti-Patterns\n\n### Don't Ask\n- Leading questions (\"Don't you think we should...\")\n- Multiple questions at once\n- Jargon the requester may not understand\n- Questions you can answer yourself\n\n### Do Ask\n- Open-ended questions\n- One question at a time\n- Clarifying follow-ups\n- \"Why?\" to understand motivation\n\n## Output\n\nAfter clarification, you should have:\n\n```markdown\n## Requirements Summary\n\n### Users\n- Primary: [description]\n- Secondary: [description]\n\n### Goals\n- Primary: [job-to-be-done]\n- Secondary: [additional goals]\n\n### Current State\n- [How it's done today]\n\n### Pain Points\n1. [Problem 1] - [frequency/impact]\n2. [Problem 2] - [frequency/impact]\n\n### Constraints\n- Technology: [constraints]\n- Timeline: [deadline]\n- Budget: [if applicable]\n- Compliance: [requirements]\n\n### Integrations\n- [System 1]: [data flow]\n- [System 2]: [data flow]\n\n### Scale\n- Initial: [users/data]\n- Target: [users/data]\n- Growth: [rate]\n\n### Success Criteria\n- [Metric 1]: [target]\n- [Metric 2]: [target]\n```\n"
    },
    {
      "name": "dream-state-template.md",
      "path": "references/dream-state-template.md",
      "content": "# Dream State Template\n\nTemplate for defining the end vision for a domain.\n\n## What is a Dream State?\n\nA dream state is the **complete vision** for a domain when fully realized. It describes:\n- What capabilities will exist\n- What problems will be solved\n- What the user experience will be\n- What constraints must be respected\n- How success will be measured\n\nThe dream state guides all systems built within the domain.\n\n## Template\n\n```markdown\n# Dream State: [Domain Name]\n\n## Vision Statement\n\n[2-3 sentences capturing the essence of what this domain will become when complete.\nWrite as if describing it to someone after it's built.]\n\nExample:\n\"Azure Standard Operations will be a fully integrated field service management platform\nthat enables dispatchers to optimize routes in real-time, technicians to access all\njob information on mobile devices, and managers to monitor operations through live dashboards.\nThe platform will reduce average response time by 40% and eliminate paper-based workflows.\"\n\n---\n\n## Key Capabilities\n\nWhen complete, the domain will provide:\n\n### Core Capabilities (Must Have)\n- [ ] [Capability 1]\n- [ ] [Capability 2]\n- [ ] [Capability 3]\n\n### Enhanced Capabilities (Should Have)\n- [ ] [Capability 4]\n- [ ] [Capability 5]\n\n### Future Capabilities (Could Have)\n- [ ] [Capability 6]\n- [ ] [Capability 7]\n\n---\n\n## Users\n\n### Primary Users\n\n| User Type | Description | Key Needs |\n|-----------|-------------|-----------|\n| [Role 1] | [Who they are] | [What they need] |\n| [Role 2] | [Who they are] | [What they need] |\n\n### Secondary Users\n\n| User Type | Description | Key Needs |\n|-----------|-------------|-----------|\n| [Role 3] | [Who they are] | [What they need] |\n\n---\n\n## Current State (As-Is)\n\n### Current Process\n[Describe how things work today, including pain points]\n\n### Current Systems\n- [System 1]: [What it does, limitations]\n- [System 2]: [What it does, limitations]\n\n### Key Problems\n1. [Problem 1]: [Impact]\n2. [Problem 2]: [Impact]\n3. [Problem 3]: [Impact]\n\n---\n\n## Future State (To-Be)\n\n### User Journey: [Primary User Type]\n\n```\n1. [Step 1]\n   â””â”€â†’ [What happens, what they see]\n2. [Step 2]\n   â””â”€â†’ [What happens, what they see]\n3. [Step 3]\n   â””â”€â†’ [What happens, what they see]\n```\n\n### Key Improvements\n| Before | After | Impact |\n|--------|-------|--------|\n| [Current state] | [Future state] | [Metric] |\n| [Current state] | [Future state] | [Metric] |\n\n---\n\n## Constraints\n\n### Technology Constraints\n| Constraint | Value | Rationale |\n|------------|-------|-----------|\n| Primary Language | [e.g., Python] | [Why] |\n| Frontend Framework | [e.g., React] | [Why] |\n| Database | [e.g., PostgreSQL] | [Why] |\n| Cloud Provider | [e.g., AWS] | [Why] |\n| Hosting | [e.g., Kubernetes] | [Why] |\n\n### Business Constraints\n| Constraint | Value | Rationale |\n|------------|-------|-----------|\n| Timeline | [e.g., MVP in 3 months] | [Why] |\n| Budget | [e.g., $100k total] | [Why] |\n| Team Size | [e.g., 3 engineers] | [Why] |\n\n### Compliance Constraints\n| Requirement | Details |\n|-------------|---------|\n| [e.g., SOC2] | [Specific requirements] |\n| [e.g., GDPR] | [Specific requirements] |\n\n---\n\n## Integration Requirements\n\n### Must Integrate With\n| System | Direction | Data | Priority |\n|--------|-----------|------|----------|\n| [System 1] | In/Out/Both | [What data] | Required |\n| [System 2] | In/Out/Both | [What data] | Required |\n\n### May Integrate With (Future)\n| System | Direction | Data | Priority |\n|--------|-----------|------|----------|\n| [System 3] | In/Out/Both | [What data] | Optional |\n\n---\n\n## Success Metrics\n\n### Launch Criteria (MVP)\n| Metric | Target | Measurement |\n|--------|--------|-------------|\n| [Metric 1] | [Value] | [How measured] |\n| [Metric 2] | [Value] | [How measured] |\n\n### 90-Day Targets\n| Metric | Target | Measurement |\n|--------|--------|-------------|\n| [Metric 3] | [Value] | [How measured] |\n| [Metric 4] | [Value] | [How measured] |\n\n### Long-Term Targets (1 Year)\n| Metric | Target | Measurement |\n|--------|--------|-------------|\n| [Metric 5] | [Value] | [How measured] |\n| [Metric 6] | [Value] | [How measured] |\n\n---\n\n## Anti-Goals (Explicitly Out of Scope)\n\nThings we will **NOT** build:\n- [Anti-goal 1]: [Why excluded]\n- [Anti-goal 2]: [Why excluded]\n- [Anti-goal 3]: [Why excluded]\n\n---\n\n## Risks and Mitigations\n\n| Risk | Likelihood | Impact | Mitigation |\n|------|------------|--------|------------|\n| [Risk 1] | High/Med/Low | High/Med/Low | [Strategy] |\n| [Risk 2] | High/Med/Low | High/Med/Low | [Strategy] |\n\n---\n\n## Open Questions\n\nQuestions that need answers before or during implementation:\n- [ ] [Question 1]\n- [ ] [Question 2]\n\n---\n\n## Appendix\n\n### Glossary\n| Term | Definition |\n|------|------------|\n| [Term 1] | [Definition] |\n| [Term 2] | [Definition] |\n\n### References\n- [Link to research]\n- [Link to competitor]\n- [Link to inspiration]\n```\n\n## Example: Completed Dream State\n\n```markdown\n# Dream State: Azure Standard Field Service\n\n## Vision Statement\n\nAzure Standard Field Service will be a mobile-first platform that enables our\n50+ field technicians to receive work orders, navigate to locations, complete\nservice tasks, and capture customer signaturesâ€”all from their phones. The back\noffice will have real-time visibility into field operations, with automated\ndispatching that reduces average response time from 4 hours to under 1 hour.\n\n---\n\n## Key Capabilities\n\nWhen complete, the domain will provide:\n\n### Core Capabilities (Must Have)\n- [ ] Work order creation and assignment\n- [ ] Mobile app for technicians (iOS + Android)\n- [ ] Real-time location tracking\n- [ ] Digital signature capture\n- [ ] Photo documentation\n- [ ] Offline support (sync when connected)\n\n### Enhanced Capabilities (Should Have)\n- [ ] Automated route optimization\n- [ ] Parts inventory management\n- [ ] Customer notification system\n- [ ] Performance dashboards\n\n### Future Capabilities (Could Have)\n- [ ] Predictive maintenance scheduling\n- [ ] Customer self-service portal\n- [ ] AI-powered dispatching\n\n---\n\n## Users\n\n### Primary Users\n\n| User Type | Description | Key Needs |\n|-----------|-------------|-----------|\n| Field Technician | 50 techs across 3 regions | Easy mobile access, offline support |\n| Dispatcher | 5 people managing daily assignments | Queue visibility, drag-drop scheduling |\n\n### Secondary Users\n\n| User Type | Description | Key Needs |\n|-----------|-------------|-----------|\n| Operations Manager | 2 people overseeing all operations | KPI dashboards, exception alerts |\n| Customer | Companies receiving service | Status updates, appointment windows |\n\n---\n\n## Constraints\n\n### Technology Constraints\n| Constraint | Value | Rationale |\n|------------|-------|-----------|\n| Backend | Django + DRF | Team expertise, existing systems |\n| Frontend | Elm | Type safety, team preference |\n| Mobile | React Native | Cross-platform, JS skills |\n| Database | PostgreSQL | Existing infrastructure |\n| Hosting | Azure | Corporate standard |\n\n### Business Constraints\n| Constraint | Value | Rationale |\n|------------|-------|-----------|\n| Timeline | MVP in 4 months | Peak season starts in May |\n| Budget | $75k infrastructure | Annual budget allocation |\n| Team | 2 engineers + contractor | Current headcount |\n\n---\n\n## Success Metrics\n\n### Launch Criteria (MVP)\n| Metric | Target | Measurement |\n|--------|--------|-------------|\n| Work orders processed | 100% via system | vs paper fallback |\n| Mobile app adoption | 80% of technicians | DAU/MAU |\n\n### 90-Day Targets\n| Metric | Target | Measurement |\n|--------|--------|-------------|\n| Average response time | <2 hours | Time from request to arrival |\n| Customer satisfaction | >4.0/5.0 | Post-service survey |\n\n---\n\n## Anti-Goals\n\n- **Billing/invoicing**: Use existing QuickBooks integration\n- **CRM**: Use existing Salesforce, sync only what's needed\n- **Fleet management**: Separate system, not in scope\n```\n\n## Checklist\n\nBefore proceeding, verify the dream state has:\n\n- [ ] Clear vision statement\n- [ ] Prioritized capabilities (must/should/could)\n- [ ] Defined users and their needs\n- [ ] Documented constraints\n- [ ] Integration requirements identified\n- [ ] Measurable success metrics\n- [ ] Explicit anti-goals\n- [ ] Known risks listed\n"
    },
    {
      "name": "github-issue-format.md",
      "path": "references/github-issue-format.md",
      "content": "# GitHub Issue Format\n\nTemplates and conventions for system issues.\n\n## Issue Creation\n\n### Using GitHub CLI\n\n```bash\n# Create issue with FeatureSpec attached\ngh issue create \\\n  --repo \"org/repo\" \\\n  --title \"ğŸ¯ System: [Name]\" \\\n  --body-file ISSUE_BODY.md \\\n  --label \"domain:azure-standard\" \\\n  --label \"system:servicegrid\" \\\n  --label \"status:specified\" \\\n  --label \"priority:p1\"\n```\n\n### Using GitHub API\n\n```bash\ncurl -X POST \\\n  -H \"Authorization: token $GITHUB_TOKEN\" \\\n  -H \"Accept: application/vnd.github.v3+json\" \\\n  https://api.github.com/repos/org/repo/issues \\\n  -d '{\n    \"title\": \"ğŸ¯ System: ServiceGrid Core\",\n    \"body\": \"...\",\n    \"labels\": [\"domain:azure-standard\", \"system:servicegrid\", \"status:specified\", \"priority:p1\"]\n  }'\n```\n\n## Issue Body Template\n\n```markdown\n## ğŸ¯ System: [System Name]\n\n| Property | Value |\n|----------|-------|\n| **Domain** | [domain-name] |\n| **System ID** | sys-[number] |\n| **Priority** | P[1-5] |\n| **Dependencies** | #[issue], #[issue] or None |\n| **Complexity** | Small / Medium / Large / XL |\n\n---\n\n### Overview\n\n[2-3 sentence description of what this system does and why it matters]\n\n---\n\n### FeatureSpec\n\n<details>\n<summary>ğŸ“‹ Click to expand full specification</summary>\n\n[Paste complete 18-section FeatureSpec here]\n\n</details>\n\n---\n\n### Acceptance Criteria\n\nCore functionality that must work for this system to be complete:\n\n- [ ] [Criterion 1 - specific, testable]\n- [ ] [Criterion 2 - specific, testable]\n- [ ] [Criterion 3 - specific, testable]\n- [ ] [Criterion 4 - specific, testable]\n\n### Quality Gates\n\n- [ ] All unit tests passing\n- [ ] All integration tests passing\n- [ ] Code coverage > 80%\n- [ ] No critical security vulnerabilities\n- [ ] Performance targets met\n- [ ] Documentation complete\n\n---\n\n### Technical Notes\n\n[Any important technical context, decisions, or constraints]\n\n---\n\n### Links\n\n- Dream State: [link to dream-state.md]\n- Related Issues: #[number], #[number]\n- Figma/Designs: [link if applicable]\n- API Docs: [link if applicable]\n```\n\n## Label Convention\n\n### Domain Labels\n```\ndomain:{domain-name}\n```\nExamples: `domain:azure-standard`, `domain:inventory`, `domain:customer-portal`\n\n### System Labels\n```\nsystem:{system-name}\n```\nExamples: `system:auth`, `system:servicegrid`, `system:routing`\n\n### Status Labels\n```\nstatus:{status}\n```\nValues:\n- `status:discovered` - Identified, needs specification\n- `status:specified` - FeatureSpec complete\n- `status:ready` - Dependencies met, can start\n- `status:in-progress` - Currently being built\n- `status:review` - In PR review\n- `status:blocked` - Cannot proceed\n\n### Priority Labels\n```\npriority:p{1-5}\n```\nValues:\n- `priority:p1` - Critical, build first\n- `priority:p2` - High, build soon\n- `priority:p3` - Medium, build when ready\n- `priority:p4` - Low, build eventually\n- `priority:p5` - Nice to have\n\n### Type Labels\n```\ntype:{type}\n```\nValues:\n- `type:system` - Full system/service\n- `type:feature` - Feature within existing system\n- `type:enhancement` - Improvement to existing\n- `type:bugfix` - Fix for existing\n\n## Example Issues\n\n### System Issue\n\n```markdown\n## ğŸ¯ System: Work Order Service\n\n| Property | Value |\n|----------|-------|\n| **Domain** | azure-standard-ops |\n| **System ID** | sys-002 |\n| **Priority** | P1 |\n| **Dependencies** | #100 (Auth Service) |\n| **Complexity** | Large |\n\n---\n\n### Overview\n\nThe Work Order Service is the core of the field service platform. It manages the\ncomplete lifecycle of work orders from creation through completion, including\nassignment, scheduling, status tracking, and completion documentation.\n\n---\n\n### FeatureSpec\n\n<details>\n<summary>ğŸ“‹ Click to expand full specification</summary>\n\n# Work Order Service FeatureSpec\n\n## 1. Overview\n[Full spec content...]\n\n## 2. Problem Statement\n[Full spec content...]\n\n[... remaining 16 sections ...]\n\n</details>\n\n---\n\n### Acceptance Criteria\n\n- [ ] Work orders can be created with required fields\n- [ ] Work orders can be assigned to technicians\n- [ ] Work order status transitions are enforced\n- [ ] Technicians can update work order status from mobile\n- [ ] Completion requires signature and photo documentation\n- [ ] Work order history is fully auditable\n- [ ] API supports filtering, sorting, and pagination\n- [ ] Offline-created work orders sync when connected\n\n### Quality Gates\n\n- [ ] All unit tests passing\n- [ ] All integration tests passing\n- [ ] Code coverage > 80%\n- [ ] No critical security vulnerabilities\n- [ ] API response time < 200ms p95\n- [ ] Documentation complete\n\n---\n\n### Technical Notes\n\n- Must integrate with existing Auth Service for user management\n- Use PostgreSQL with proper indexing for work order queries\n- Event sourcing for work order state changes\n- WebSocket support for real-time updates to dispatcher dashboard\n\n---\n\n### Links\n\n- Dream State: docs/dream-state.md\n- Auth Service: #100\n- API Design: docs/api/work-orders.yaml\n```\n\n### Feature Issue (within existing system)\n\n```markdown\n## âœ¨ Feature: Bulk Work Order Import\n\n| Property | Value |\n|----------|-------|\n| **System** | Work Order Service |\n| **Priority** | P3 |\n| **Dependencies** | #123 (Work Order Service core) |\n| **Complexity** | Medium |\n\n---\n\n### Overview\n\nEnable dispatchers to import multiple work orders from CSV files,\nvalidating data and providing error feedback before committing.\n\n---\n\n### Acceptance Criteria\n\n- [ ] CSV upload UI in dispatcher dashboard\n- [ ] Validation of all required fields before import\n- [ ] Clear error messages for invalid rows\n- [ ] Preview of valid rows before commit\n- [ ] Batch creation with transaction rollback on failure\n- [ ] Import history with ability to view past imports\n\n---\n\n### Technical Notes\n\n- Max file size: 10MB\n- Max rows per import: 1000\n- Support for UTF-8 encoding with BOM\n```\n\n## Linking Issues\n\n### Dependency Links\n\nIn the issue body:\n```markdown\n**Dependencies:** #100, #101\n```\n\n### Cross-References\n\nWhen issues reference each other:\n```markdown\nRelated to #100\nBlocked by #101\nBlocks #102\n```\n\n### After Issue Creation\n\nUpdate the system queue with the issue number:\n\n```json\n{\n  \"id\": \"sys-002\",\n  \"name\": \"Work Order Service\",\n  \"githubIssue\": 123,  // â† Add this\n  \"status\": \"specified\"\n}\n```\n\n## Issue Lifecycle\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                        ISSUE LIFECYCLE                                       â”‚\nâ”‚                                                                             â”‚\nâ”‚  1. CREATE                                                                  â”‚\nâ”‚     â€¢ Entry portal creates issue with FeatureSpec                           â”‚\nâ”‚     â€¢ Labels: domain, system, status:specified, priority                    â”‚\nâ”‚     â€¢ Update system-queue.json with issue number                            â”‚\nâ”‚                                                                             â”‚\nâ”‚  2. ASSIGN                                                                  â”‚\nâ”‚     â€¢ When dependencies are met, assign to engineer/agent                   â”‚\nâ”‚     â€¢ Update label: status:in-progress                                      â”‚\nâ”‚                                                                             â”‚\nâ”‚  3. TRACK                                                                   â”‚\nâ”‚     â€¢ Checkbox progress in Acceptance Criteria                              â”‚\nâ”‚     â€¢ Comments for decisions and blockers                                   â”‚\nâ”‚     â€¢ Link to PRs as work progresses                                        â”‚\nâ”‚                                                                             â”‚\nâ”‚  4. REVIEW                                                                  â”‚\nâ”‚     â€¢ Final PR linked to issue                                              â”‚\nâ”‚     â€¢ Update label: status:review                                           â”‚\nâ”‚                                                                             â”‚\nâ”‚  5. CLOSE                                                                   â”‚\nâ”‚     â€¢ PR merged                                                             â”‚\nâ”‚     â€¢ Verify all acceptance criteria checked                                â”‚\nâ”‚     â€¢ Close issue with comment summarizing completion                       â”‚\nâ”‚     â€¢ Update system-queue.json status to complete                           â”‚\nâ”‚                                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Closing Comment Template\n\nWhen closing a completed system issue:\n\n```markdown\n## âœ… System Complete\n\n**Merged PRs:**\n- #150 - Core work order model and API\n- #155 - Status transitions and validation\n- #160 - Mobile sync support\n- #165 - Documentation\n\n**Metrics:**\n- Lines of code: ~3,500\n- Test coverage: 87%\n- API endpoints: 12\n- Development time: 2 weeks\n\n**Documentation:**\n- README: /services/work-order/README.md\n- API Docs: /docs/api/work-orders.md\n- Architecture: /docs/architecture/work-order-service.md\n\n**Next Steps:**\n- sys-003 Route Optimization can now begin (#124)\n- sys-005 Analytics Dashboard can now begin (#126)\n```\n"
    },
    {
      "name": "queue-operations.md",
      "path": "references/queue-operations.md",
      "content": "# Queue Operations\n\nManaging the system queue for domain progression.\n\n## Queue File Location\n\n```\ndomain-memory/\nâ””â”€â”€ {domain-name}/\n    â””â”€â”€ system-queue.json\n```\n\n## Queue Schema\n\n```typescript\ninterface SystemQueue {\n  // Domain identification\n  domain: string;              // e.g., \"azure-standard-ops\"\n  repository: string;          // e.g., \"org/azure-standard\"\n  dreamState: string;          // Brief description of end vision\n\n  // Metadata\n  createdAt: string;           // ISO datetime\n  updatedAt: string;           // ISO datetime\n\n  // Systems in the queue\n  systems: System[];\n}\n\ninterface System {\n  // Identity\n  id: string;                  // e.g., \"sys-001\"\n  name: string;                // e.g., \"Auth Service\"\n  description: string;         // One sentence purpose\n\n  // GitHub tracking\n  githubIssue: number | null;  // Issue number once created\n\n  // Status\n  status: SystemStatus;\n\n  // Dependencies\n  dependencies: string[];      // Array of system IDs\n\n  // Priority\n  priority: number;            // 1 = highest priority\n\n  // Timestamps\n  createdAt?: string;\n  startedAt?: string;\n  completedAt?: string;\n\n  // Notes\n  blockedReason?: string;      // If status is 'blocked'\n  notes?: string;              // Additional context\n}\n\ntype SystemStatus =\n  | 'discovered'    // Identified, not yet specified\n  | 'specified'     // FeatureSpec complete, issue created\n  | 'ready'         // Dependencies met, can start\n  | 'in-progress'   // Currently being built\n  | 'review'        // In PR review\n  | 'complete'      // Merged and deployed\n  | 'blocked';      // Cannot proceed\n```\n\n## Queue Operations\n\n### Initialize Queue\n\nCreate a new queue for a domain:\n\n```json\n{\n  \"domain\": \"azure-standard-ops\",\n  \"repository\": \"azure-standard/field-service\",\n  \"dreamState\": \"Fully integrated field service management platform\",\n  \"createdAt\": \"2024-01-15T10:00:00Z\",\n  \"updatedAt\": \"2024-01-15T10:00:00Z\",\n  \"systems\": []\n}\n```\n\n### Add System\n\nAppend a new system to the queue:\n\n```javascript\nfunction addSystem(queue, system) {\n  const newSystem = {\n    id: `sys-${String(queue.systems.length + 1).padStart(3, '0')}`,\n    name: system.name,\n    description: system.description,\n    githubIssue: null,\n    status: 'discovered',\n    dependencies: system.dependencies || [],\n    priority: system.priority || queue.systems.length + 1,\n    createdAt: new Date().toISOString(),\n  };\n\n  queue.systems.push(newSystem);\n  queue.updatedAt = new Date().toISOString();\n\n  return newSystem;\n}\n```\n\n### Update System Status\n\nTransition a system to a new status:\n\n```javascript\nfunction updateStatus(queue, systemId, newStatus, metadata = {}) {\n  const system = queue.systems.find(s => s.id === systemId);\n  if (!system) throw new Error(`System ${systemId} not found`);\n\n  // Validate transition\n  const validTransitions = {\n    'discovered': ['specified', 'blocked'],\n    'specified': ['ready', 'in-progress', 'blocked'],\n    'ready': ['in-progress', 'blocked'],\n    'in-progress': ['review', 'blocked'],\n    'review': ['complete', 'in-progress', 'blocked'],\n    'blocked': ['discovered', 'specified', 'ready', 'in-progress'],\n    'complete': [], // Terminal state\n  };\n\n  if (!validTransitions[system.status].includes(newStatus)) {\n    throw new Error(`Invalid transition: ${system.status} -> ${newStatus}`);\n  }\n\n  system.status = newStatus;\n\n  // Set timestamps\n  if (newStatus === 'in-progress' && !system.startedAt) {\n    system.startedAt = new Date().toISOString();\n  }\n  if (newStatus === 'complete') {\n    system.completedAt = new Date().toISOString();\n  }\n  if (newStatus === 'blocked') {\n    system.blockedReason = metadata.reason || 'Reason not specified';\n  }\n\n  // Set GitHub issue if provided\n  if (metadata.githubIssue) {\n    system.githubIssue = metadata.githubIssue;\n  }\n\n  queue.updatedAt = new Date().toISOString();\n\n  return system;\n}\n```\n\n### Get Next Ready System\n\nFind the next system that can be started:\n\n```javascript\nfunction getNextReady(queue) {\n  // Get IDs of completed systems\n  const completedIds = new Set(\n    queue.systems\n      .filter(s => s.status === 'complete')\n      .map(s => s.id)\n  );\n\n  // Find systems that are specified/ready with all dependencies met\n  const readySystems = queue.systems.filter(system => {\n    // Must be in specified or ready status\n    if (!['specified', 'ready'].includes(system.status)) {\n      return false;\n    }\n\n    // All dependencies must be complete\n    const depsComplete = system.dependencies.every(depId =>\n      completedIds.has(depId)\n    );\n\n    return depsComplete;\n  });\n\n  // Sort by priority (lowest number = highest priority)\n  readySystems.sort((a, b) => a.priority - b.priority);\n\n  return readySystems[0] || null;\n}\n```\n\n### Get Queue Summary\n\nGenerate a status summary:\n\n```javascript\nfunction getQueueSummary(queue) {\n  const statusCounts = {};\n  queue.systems.forEach(s => {\n    statusCounts[s.status] = (statusCounts[s.status] || 0) + 1;\n  });\n\n  const total = queue.systems.length;\n  const complete = statusCounts.complete || 0;\n  const inProgress = statusCounts['in-progress'] || 0;\n  const blocked = statusCounts.blocked || 0;\n\n  return {\n    domain: queue.domain,\n    dreamState: queue.dreamState,\n    total,\n    complete,\n    inProgress,\n    blocked,\n    remaining: total - complete,\n    progress: total > 0 ? Math.round((complete / total) * 100) : 0,\n    nextReady: getNextReady(queue),\n  };\n}\n```\n\n### Reorder Priorities\n\nAdjust priorities after changes:\n\n```javascript\nfunction reorderPriorities(queue, newOrder) {\n  // newOrder is array of system IDs in desired priority order\n  newOrder.forEach((systemId, index) => {\n    const system = queue.systems.find(s => s.id === systemId);\n    if (system) {\n      system.priority = index + 1;\n    }\n  });\n\n  queue.updatedAt = new Date().toISOString();\n}\n```\n\n## Status Transitions\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                        STATUS STATE MACHINE                                  â”‚\nâ”‚                                                                             â”‚\nâ”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚\nâ”‚                    â”‚  discovered  â”‚                                         â”‚\nâ”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚\nâ”‚                           â”‚ specify                                         â”‚\nâ”‚                           â–¼                                                 â”‚\nâ”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚\nâ”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  specified   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚\nâ”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                â”‚\nâ”‚         â”‚                â”‚ deps met        â”‚ start directly                 â”‚\nâ”‚         â”‚                â–¼                 â”‚ (if deps met)                  â”‚\nâ”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                                â”‚\nâ”‚         â”‚         â”‚    ready     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚\nâ”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                â”‚\nâ”‚         â”‚                â”‚ start           â”‚                                â”‚\nâ”‚         â”‚                â–¼                 â”‚                                â”‚\nâ”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â—€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚\nâ”‚         â”‚         â”‚ in-progress  â”‚                                          â”‚\nâ”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚\nâ”‚         â”‚                â”‚ submit PR                                        â”‚\nâ”‚         â”‚                â–¼                                                  â”‚\nâ”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚\nâ”‚         â”‚         â”‚    review    â”‚â”€â”€â”€â”                                      â”‚\nâ”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ changes requested                    â”‚\nâ”‚         â”‚                â”‚ approve   â”‚                                      â”‚\nâ”‚         â”‚                â–¼           â”‚                                      â”‚\nâ”‚         â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                                      â”‚\nâ”‚         â”‚         â”‚   complete   â”‚â—€â”€â”€â”˜                                      â”‚\nâ”‚         â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚\nâ”‚         â”‚                                                                   â”‚\nâ”‚         â”‚ blocked        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚\nâ”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   blocked    â”‚                                   â”‚\nâ”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚\nâ”‚                                 â”‚ unblocked                                 â”‚\nâ”‚                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ (return to previous state)     â”‚\nâ”‚                                                                             â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Example Queue\n\n```json\n{\n  \"domain\": \"azure-standard-ops\",\n  \"repository\": \"azure-standard/field-service\",\n  \"dreamState\": \"Fully integrated field service management platform\",\n  \"createdAt\": \"2024-01-15T10:00:00Z\",\n  \"updatedAt\": \"2024-01-17T14:30:00Z\",\n  \"systems\": [\n    {\n      \"id\": \"sys-001\",\n      \"name\": \"Auth Service\",\n      \"description\": \"Authentication and authorization for all services\",\n      \"githubIssue\": 100,\n      \"status\": \"complete\",\n      \"dependencies\": [],\n      \"priority\": 1,\n      \"createdAt\": \"2024-01-15T10:00:00Z\",\n      \"startedAt\": \"2024-01-15T11:00:00Z\",\n      \"completedAt\": \"2024-01-16T16:00:00Z\"\n    },\n    {\n      \"id\": \"sys-002\",\n      \"name\": \"Work Order Service\",\n      \"description\": \"Core work order management and lifecycle\",\n      \"githubIssue\": 123,\n      \"status\": \"in-progress\",\n      \"dependencies\": [\"sys-001\"],\n      \"priority\": 1,\n      \"createdAt\": \"2024-01-15T10:00:00Z\",\n      \"startedAt\": \"2024-01-17T09:00:00Z\"\n    },\n    {\n      \"id\": \"sys-003\",\n      \"name\": \"Route Optimization\",\n      \"description\": \"Intelligent route planning and optimization\",\n      \"githubIssue\": 124,\n      \"status\": \"specified\",\n      \"dependencies\": [\"sys-002\"],\n      \"priority\": 2,\n      \"createdAt\": \"2024-01-15T10:00:00Z\"\n    },\n    {\n      \"id\": \"sys-004\",\n      \"name\": \"Mobile App\",\n      \"description\": \"Technician mobile application\",\n      \"githubIssue\": 125,\n      \"status\": \"specified\",\n      \"dependencies\": [\"sys-002\", \"sys-003\"],\n      \"priority\": 3,\n      \"createdAt\": \"2024-01-15T10:00:00Z\"\n    },\n    {\n      \"id\": \"sys-005\",\n      \"name\": \"Analytics Dashboard\",\n      \"description\": \"Operational analytics and reporting\",\n      \"githubIssue\": null,\n      \"status\": \"discovered\",\n      \"dependencies\": [\"sys-002\"],\n      \"priority\": 4,\n      \"createdAt\": \"2024-01-16T14:00:00Z\"\n    }\n  ]\n}\n```\n\n## CLI Commands (Manual Operations)\n\n```bash\n# View queue status\ncat domain-memory/azure-standard-ops/system-queue.json | jq '.systems[] | {id, name, status}'\n\n# Find next ready system\ncat domain-memory/azure-standard-ops/system-queue.json | jq '\n  .systems\n  | map(select(.status == \"specified\" or .status == \"ready\"))\n  | sort_by(.priority)\n  | .[0]'\n\n# Count by status\ncat domain-memory/azure-standard-ops/system-queue.json | jq '\n  .systems\n  | group_by(.status)\n  | map({status: .[0].status, count: length})'\n\n# Update status (use jq or edit directly)\n# After editing, validate JSON: jq . system-queue.json > /dev/null\n```\n\n## Queue Visualization\n\nGenerate a text-based visualization:\n\n```\nDomain: azure-standard-ops\nProgress: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 20% (1/5 complete)\n\nSystems:\n  âœ… sys-001 Auth Service [P1] #100\n  ğŸ”„ sys-002 Work Order Service [P1] #123 â† IN PROGRESS\n  â³ sys-003 Route Optimization [P2] #124 (waiting: sys-002)\n  â³ sys-004 Mobile App [P3] #125 (waiting: sys-002, sys-003)\n  ğŸ“ sys-005 Analytics Dashboard [P4] (not specified)\n\nLegend: âœ… complete | ğŸ”„ in-progress | â³ ready/specified | ğŸ“ discovered | ğŸš« blocked\n\nNext: sys-003 Route Optimization (when sys-002 completes)\n```\n"
    },
    {
      "name": "system-decomposition.md",
      "path": "references/system-decomposition.md",
      "content": "# System Decomposition\n\nHow to break a dream state into implementable systems.\n\n## Why Decompose?\n\nA dream state is often too large to build in one pass. Decomposition:\n- Creates manageable chunks of work\n- Enables parallel development\n- Reduces risk (ship incrementally)\n- Clarifies dependencies\n- Allows different teams/agents to work simultaneously\n\n## Decomposition Principles\n\n### 1. Single Responsibility\nEach system should do one thing well.\n\n```\nâŒ BAD: \"ServicePlatform\" - does scheduling, billing, reporting, and notifications\nâœ… GOOD: \"Scheduling Service\", \"Billing Service\", \"Analytics Service\", \"Notification Service\"\n```\n\n### 2. Deployable Independently\nEach system should be deployable without deploying others.\n\n```\nâŒ BAD: System A can't run without System B being updated simultaneously\nâœ… GOOD: System A has versioned API contract with System B\n```\n\n### 3. Owned by One Team\nEach system should have clear ownership.\n\n```\nâŒ BAD: Three teams all modify the same system\nâœ… GOOD: One team owns each system, others consume via API\n```\n\n### 4. Right-Sized\nNot too big (becomes monolith), not too small (coordination overhead).\n\n```\nâŒ BAD: Single function as a system (nano-service)\nâŒ BAD: 100 features in one system (monolith)\nâœ… GOOD: Cohesive set of related capabilities\n```\n\n## Finding System Boundaries\n\n### Method 1: Domain-Driven Design\n\nIdentify bounded contexts from the domain:\n\n```\nDomain: Field Service Management\nâ”œâ”€â”€ Work Order Context â†’ Work Order Service\nâ”œâ”€â”€ Scheduling Context â†’ Scheduling Service\nâ”œâ”€â”€ Routing Context â†’ Route Optimization Service\nâ”œâ”€â”€ Inventory Context â†’ Parts/Inventory Service\nâ”œâ”€â”€ Customer Context â†’ Customer Portal\nâ””â”€â”€ Reporting Context â†’ Analytics Service\n```\n\n### Method 2: User Journey Mapping\n\nFollow user journeys and identify natural handoffs:\n\n```\nTechnician Journey:\n1. Login              â†’ Auth Service\n2. View assignments   â†’ Work Order Service\n3. Get directions     â†’ Route Service\n4. Complete work      â†’ Work Order Service\n5. Get signature      â†’ Work Order Service\n6. Check inventory    â†’ Inventory Service\n7. Submit report      â†’ Work Order Service\n```\n\n### Method 3: Data Ownership\n\nGroup by who owns the data:\n\n```\nUser data        â†’ Auth/User Service\nWork order data  â†’ Work Order Service\nRoute data       â†’ Route Service\nInventory data   â†’ Inventory Service\nAnalytics data   â†’ Analytics Service\n```\n\n### Method 4: Rate of Change\n\nGroup things that change together:\n\n```\nFrequently changing:\n- UI components â†’ Frontend App\n- Business rules â†’ Core Service\n\nRarely changing:\n- Auth mechanisms â†’ Auth Service\n- Notification templates â†’ Notification Service\n```\n\n### Method 5: Scaling Requirements\n\nSeparate by scaling needs:\n\n```\nHigh throughput, low latency:\n- Real-time location â†’ Location Service\n\nCompute intensive:\n- Route optimization â†’ Route Service\n\nStorage intensive:\n- Photo/document storage â†’ Media Service\n\nEvent-driven:\n- Notifications â†’ Notification Service\n```\n\n## Dependency Analysis\n\n### Mapping Dependencies\n\nCreate a dependency matrix:\n\n| System | Depends On | Depended On By |\n|--------|------------|----------------|\n| Auth | - | All others |\n| Work Order | Auth | Route, Inventory, Analytics |\n| Route | Auth, Work Order | Mobile App |\n| Inventory | Auth, Work Order | Mobile App |\n| Analytics | Auth, Work Order | Dashboard |\n| Mobile App | Auth, Work Order, Route, Inventory | - |\n\n### Dependency Graph\n\n```\n                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                â”‚    Auth     â”‚\n                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n                       â”‚\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â–¼              â–¼              â–¼\n â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n â”‚ Work Order  â”‚ â”‚  Inventory  â”‚ â”‚  Analytics  â”‚\n â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n        â”‚              â”‚\n        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜\n               â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚    Route    â”‚\n        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n               â”‚\n               â–¼\n        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n        â”‚ Mobile App  â”‚\n        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Build Order\n\nTopologically sort by dependencies:\n\n1. **Level 0** (no dependencies): Auth\n2. **Level 1** (depends on Level 0): Work Order, Inventory, Analytics\n3. **Level 2** (depends on Level 1): Route\n4. **Level 3** (depends on Level 2): Mobile App\n\nSystems at the same level can be built in parallel.\n\n## System Definition Template\n\nFor each identified system:\n\n```markdown\n## System: [Name]\n\n### Identity\n- **ID**: sys-[number]\n- **Name**: [Human-readable name]\n- **Owner**: [Team/Person responsible]\n\n### Purpose\n[One sentence describing what this system does]\n\n### Capabilities\nThis system will:\n- [Capability 1]\n- [Capability 2]\n- [Capability 3]\n\n### Boundaries\n**In Scope:**\n- [What's included]\n\n**Out of Scope:**\n- [What's explicitly excluded]\n\n### Interfaces\n\n**Inputs:**\n| Source | Data | Format | Frequency |\n|--------|------|--------|-----------|\n| [System/User] | [What] | [JSON/Event/etc] | [Rate] |\n\n**Outputs:**\n| Destination | Data | Format | Frequency |\n|-------------|------|--------|-----------|\n| [System/User] | [What] | [JSON/Event/etc] | [Rate] |\n\n### Dependencies\n| System | Type | Required For |\n|--------|------|--------------|\n| [Name] | Hard/Soft | [What capability] |\n\n### Data Ownership\n| Entity | CRUD | Notes |\n|--------|------|-------|\n| [Entity] | CRUD | This system is source of truth |\n| [Entity] | R | Read from [other system] |\n\n### Technical Requirements\n- Performance: [SLA]\n- Availability: [Uptime target]\n- Security: [Requirements]\n\n### Priority\n- **Build Order**: [1-N]\n- **Business Priority**: P[1-5]\n- **Complexity**: S/M/L/XL\n\n### Estimated Effort\n- **Duration**: [time estimate]\n- **Team Size**: [people needed]\n```\n\n## Common Decomposition Patterns\n\n### Pattern 1: Core + Extensions\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                   Core Service                   â”‚\nâ”‚  (Essential functionality, build first)         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚           â”‚           â”‚\n         â–¼           â–¼           â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚ Ext 1   â”‚ â”‚ Ext 2   â”‚ â”‚ Ext 3   â”‚\n    â”‚(Reports)â”‚ â”‚(Notify) â”‚ â”‚(Import) â”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Pattern 2: Frontend + Backend + Workers\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Frontend   â”‚â”€â”€â”€â”€â–¶â”‚   Backend   â”‚â”€â”€â”€â”€â–¶â”‚   Workers   â”‚\nâ”‚   (Web)     â”‚     â”‚   (API)     â”‚     â”‚  (Async)    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                           â”‚\n                           â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚  Database   â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Pattern 3: Gateway + Microservices\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚                  API Gateway                     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚           â”‚           â”‚\n         â–¼           â–¼           â–¼\n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n    â”‚Service Aâ”‚ â”‚Service Bâ”‚ â”‚Service Câ”‚\n    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Pattern 4: Event-Driven\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Producer   â”‚â”€â”€â”€â”€â–¶â”‚ Event Bus   â”‚â”€â”€â”€â”€â–¶â”‚  Consumer   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                           â”‚\n                           â–¼\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â”‚  Consumer   â”‚\n                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Decomposition Anti-Patterns\n\n### Too Fine-Grained\n```\nâŒ Every database table is a service\nâŒ Every API endpoint is a service\nâŒ Functions-as-services for everything\n```\n\n**Problem:** Coordination overhead exceeds benefits.\n\n### Too Coarse-Grained\n```\nâŒ Everything in one service\nâŒ Multiple unrelated features together\nâŒ Different scaling needs combined\n```\n\n**Problem:** Back to monolith problems.\n\n### Distributed Monolith\n```\nâŒ Services that must deploy together\nâŒ Shared database between services\nâŒ Synchronous calls everywhere\n```\n\n**Problem:** Worst of both worlds.\n\n## Checklist\n\nBefore finalizing decomposition:\n\n- [ ] Each system has single clear purpose\n- [ ] Each system can deploy independently\n- [ ] Dependencies form a DAG (no cycles)\n- [ ] Build order is clear\n- [ ] No shared databases between systems\n- [ ] APIs are the only communication\n- [ ] Each system is right-sized\n- [ ] Ownership is clear for each system\n"
    }
  ],
  "tags": [
    "meta",
    "initialization",
    "discovery",
    "setup",
    "queue"
  ],
  "dependsOn": []
}